<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Neighborhood Analysis - Neighborhood Change</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Neighborhood Analysis</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../syllabus/index.html">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../schedule/index.html">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../assignments/index.html">
 <span class="menu-text">Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../howto/index.html">
 <span class="menu-text">How To</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resources/index.html">
 <span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://up570s23.slack.com/"><i class="bi bi-slack" role="img" aria-label="Slack">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#goals" id="toc-goals" class="nav-link" data-scroll-target="#goals">Goals</a></li>
  <li><a href="#github-lab-repository" id="toc-github-lab-repository" class="nav-link" data-scroll-target="#github-lab-repository">Github Lab Repository</a></li>
  <li><a href="#introduction-to-ltdb-data" id="toc-introduction-to-ltdb-data" class="nav-link" data-scroll-target="#introduction-to-ltdb-data">Introduction to LTDB Data</a></li>
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup">Setup</a>
  <ul>
  <li><a href="#ltdb-data-download" id="toc-ltdb-data-download" class="nav-link" data-scroll-target="#ltdb-data-download">LTDB Data Download</a></li>
  <li><a href="#data-import" id="toc-data-import" class="nav-link" data-scroll-target="#data-import">Data Import</a></li>
  </ul></li>
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation">Data Preparation</a>
  <ul>
  <li><a href="#isolate-income-data" id="toc-isolate-income-data" class="nav-link" data-scroll-target="#isolate-income-data">Isolate Income Data</a></li>
  <li><a href="#re-doing-data-import" id="toc-re-doing-data-import" class="nav-link" data-scroll-target="#re-doing-data-import">Re-doing Data Import</a></li>
  <li><a href="#join-together" id="toc-join-together" class="nav-link" data-scroll-target="#join-together">Join Together</a></li>
  <li><a href="#adjust-for-inflation" id="toc-adjust-for-inflation" class="nav-link" data-scroll-target="#adjust-for-inflation">Adjust for Inflation</a></li>
  </ul></li>
  <li><a href="#select-regional-data" id="toc-select-regional-data" class="nav-link" data-scroll-target="#select-regional-data">Select Regional Data</a></li>
  <li><a href="#tract-region-income-comparisons" id="toc-tract-region-income-comparisons" class="nav-link" data-scroll-target="#tract-region-income-comparisons">Tract-Region Income Comparisons</a></li>
  <li><a href="#completing-our-time-series" id="toc-completing-our-time-series" class="nav-link" data-scroll-target="#completing-our-time-series">Completing Our Time Series</a>
  <ul>
  <li><a href="#race-and-ethnicity" id="toc-race-and-ethnicity" class="nav-link" data-scroll-target="#race-and-ethnicity">Race and Ethnicity</a></li>
  <li><a href="#age-structure" id="toc-age-structure" class="nav-link" data-scroll-target="#age-structure">Age Structure</a></li>
  <li><a href="#disability-status" id="toc-disability-status" class="nav-link" data-scroll-target="#disability-status">Disability Status</a></li>
  <li><a href="#housing-tenure" id="toc-housing-tenure" class="nav-link" data-scroll-target="#housing-tenure">Housing Tenure</a></li>
  <li><a href="#housing-cost-burden" id="toc-housing-cost-burden" class="nav-link" data-scroll-target="#housing-cost-burden">Housing Cost Burden</a></li>
  <li><a href="#labor-force-participation-unemployment" id="toc-labor-force-participation-unemployment" class="nav-link" data-scroll-target="#labor-force-participation-unemployment">Labor Force Participation / Unemployment</a></li>
  <li><a href="#employment-by-industry" id="toc-employment-by-industry" class="nav-link" data-scroll-target="#employment-by-industry">Employment by Industry</a></li>
  <li><a href="#join-acs-data" id="toc-join-acs-data" class="nav-link" data-scroll-target="#join-acs-data">Join ACS Data</a></li>
  <li><a href="#moving-forward-with-our-three-cities-analysis" id="toc-moving-forward-with-our-three-cities-analysis" class="nav-link" data-scroll-target="#moving-forward-with-our-three-cities-analysis">Moving Forward with our Three Cities Analysis</a>
  <ul class="collapse">
  <li><a href="#join-acs-data-to-our-income-data" id="toc-join-acs-data-to-our-income-data" class="nav-link" data-scroll-target="#join-acs-data-to-our-income-data">Join ACS Data to our Income Data</a></li>
  <li><a href="#re-create-income-categories-in-wide-format-data" id="toc-re-create-income-categories-in-wide-format-data" class="nav-link" data-scroll-target="#re-create-income-categories-in-wide-format-data">Re-Create Income Categories in Wide-Format data</a></li>
  <li><a href="#calculate-three-cities-categories" id="toc-calculate-three-cities-categories" class="nav-link" data-scroll-target="#calculate-three-cities-categories">Calculate Three Cities Categories</a></li>
  </ul></li>
  <li><a href="#describing-out-three-cities" id="toc-describing-out-three-cities" class="nav-link" data-scroll-target="#describing-out-three-cities">Describing Out Three Cities</a>
  <ul class="collapse">
  <li><a href="#how-many-tracts-how-many-people" id="toc-how-many-tracts-how-many-people" class="nav-link" data-scroll-target="#how-many-tracts-how-many-people">How Many Tracts? How Many People?</a></li>
  <li><a href="#race" id="toc-race" class="nav-link" data-scroll-target="#race">Race</a></li>
  <li><a href="#age" id="toc-age" class="nav-link" data-scroll-target="#age">Age</a></li>
  <li><a href="#disability" id="toc-disability" class="nav-link" data-scroll-target="#disability">Disability</a></li>
  <li><a href="#housing" id="toc-housing" class="nav-link" data-scroll-target="#housing">Housing</a></li>
  <li><a href="#employment" id="toc-employment" class="nav-link" data-scroll-target="#employment">Employment</a></li>
  </ul></li>
  <li><a href="#describing-our-three-cities" id="toc-describing-our-three-cities" class="nav-link" data-scroll-target="#describing-our-three-cities">Describing our Three Cities</a></li>
  </ul></li>
  <li><a href="#lab-summary" id="toc-lab-summary" class="nav-link" data-scroll-target="#lab-summary">Lab Summary</a>
  <ul>
  <li><a href="#lab-evaluation" id="toc-lab-evaluation" class="nav-link" data-scroll-target="#lab-evaluation">Lab Evaluation</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Neighborhood Change</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i></button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidycensus)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>In this lab, we’ll explore in detail the <a href="https://voorheescenter.uic.edu">Nathalie P. Voorhees Center’s</a> methodology for measuring neighborhood change. The center has produced multiple analyses and strategies for measuring such change, focused on the Chicago metropolitan area.</p>
<p>By the end of this lab, you will replicate elements of the Voorhees Center’s <em>Who Can Live in Chicago?</em> report including maps and other visualizations of neighborhood change. We will develop a code base that could be applied to any location in the United States.</p>
</section>
<section id="goals" class="level2">
<h2 class="anchored" data-anchor-id="goals">Goals</h2>
<p>In this lab, we will use a combination of decennial census data and American Community Survey data to examine patterns of neighborhood income change. We will overlay on these patterns of income change information about the demographics of who lives in these neighborhoods. Our goals for this lab are as follows:</p>
<ul>
<li>Continue to work with common sources of sociodemographic information, including those that have been pre-processed by sources other than the Census Bureau.</li>
<li>Think critically about data processing pipelines and data requirements.</li>
<li>Explore strategies for spatial longitudinal data description and analysis.</li>
</ul>
<p>Taking a close look at the visuals from the <a href="https://voorheescenter.uic.edu/chicago_communities/">Voorhees Center website</a>, they calculate for each census tract in each year the average per capita income for the time periods 1970, 1980, 1990, 2000, 2010, and 2017 for each census tract and then compare it to the regional weighted average income.</p>
<p><img src="08_neighborhood_change/images/02_NVC_Combined-Decades.png" class="img-fluid"></p>
<p>They classify tracts based upon whether they are:</p>
<ul>
<li><strong>Very High Income:</strong> Greater than 40% above the regional average</li>
<li><strong>High Income:</strong> 20% - 40% above the reg ional average</li>
<li><strong>Middle Income:</strong> 20% below to 20% above the regional average</li>
<li><strong>Low Income:</strong> 20% below to 40% below the regional average</li>
<li><strong>Very Low Income:</strong> Greater than 40% below the regional average</li>
</ul>
<p>After classifying tracts, the study examines change over time, and then examines recent demographic characteristics based upon this change.</p>
<p><img src="08_neighborhood_change/images/03_NVC_Three_Cities.png" class="img-fluid"> This gives us a sense of what we need to do to prepare our data.</p>
</section>
<section id="github-lab-repository" class="level2">
<h2 class="anchored" data-anchor-id="github-lab-repository">Github Lab Repository</h2>
<p>If you have not already done so, follow <a href="https://classroom.github.com/a/QZUuklCL">this link</a> to accept the lab Github Classroom assignment repository.</p>
</section>
<section id="introduction-to-ltdb-data" class="level2">
<h2 class="anchored" data-anchor-id="introduction-to-ltdb-data">Introduction to LTDB Data</h2>
<p>At this point, you have spent time working with census data and common census geographies. We have used the tidycensus package to download census data from the Census Bureau’s servers using API calls.</p>
<p>In this lab, we are going to look at another source of historical census data - the Longitudinal Tract Database. Census tracts are a common geography used by planners and other analysts because tracts roughly approximate neighborhoods, especially in highly urbanized areas where population density means that tracts are relatively small. One challenge faced by analysts looking to examine neighborhood level characteristics over time is that the geographic definitions for census tracts change every 10 years following the decennial census. These changes are performed as part of the Census’ <a href="https://www.census.gov/programs-surveys/decennial-census/about/psap.html">Participant Statistical Areas Program (PSAP)</a>.</p>
<p>While some tracts may stay the same, some may be <em>split</em> in cases where the population increases, and others may be <em>merged</em> in cases where the population decreases. See this <a href="https://www2.census.gov/geo/pdfs/partnerships/psap/G-650.pdf">quick reference guide</a> for more information on thresholds for redefinition:</p>
<p><img src="08_neighborhood_change/images/04_2020PSAP.png" class="img-fluid"></p>
<p>The Census Bureau produces <a href="https://www.census.gov/geographies/reference-files/time-series/geo/relationship-files.2020.html">geographic relationship files</a> which can help show the relationships between geographies over time.</p>
<div class="cell">
<div class="cell-output-display">

<div id="dmoicsmsyk" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#dmoicsmsyk) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#dmoicsmsyk) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#dmoicsmsyk) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#dmoicsmsyk) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#dmoicsmsyk) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#dmoicsmsyk) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#dmoicsmsyk) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#dmoicsmsyk) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#dmoicsmsyk) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#dmoicsmsyk) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#dmoicsmsyk) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#dmoicsmsyk) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#dmoicsmsyk) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#dmoicsmsyk) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#dmoicsmsyk) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#dmoicsmsyk) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#dmoicsmsyk) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#dmoicsmsyk) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#dmoicsmsyk) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#dmoicsmsyk) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#dmoicsmsyk) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#dmoicsmsyk) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#dmoicsmsyk) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#dmoicsmsyk) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#dmoicsmsyk) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#dmoicsmsyk) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#dmoicsmsyk) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#dmoicsmsyk) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#dmoicsmsyk) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#dmoicsmsyk) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#dmoicsmsyk) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#dmoicsmsyk) .gt_left {
  text-align: left;
}

:where(#dmoicsmsyk) .gt_center {
  text-align: center;
}

:where(#dmoicsmsyk) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#dmoicsmsyk) .gt_font_normal {
  font-weight: normal;
}

:where(#dmoicsmsyk) .gt_font_bold {
  font-weight: bold;
}

:where(#dmoicsmsyk) .gt_font_italic {
  font-style: italic;
}

:where(#dmoicsmsyk) .gt_super {
  font-size: 65%;
}

:where(#dmoicsmsyk) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#dmoicsmsyk) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#dmoicsmsyk) .gt_indent_1 {
  text-indent: 5px;
}

:where(#dmoicsmsyk) .gt_indent_2 {
  text-indent: 10px;
}

:where(#dmoicsmsyk) .gt_indent_3 {
  text-indent: 15px;
}

:where(#dmoicsmsyk) .gt_indent_4 {
  text-indent: 20px;
}

:where(#dmoicsmsyk) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">GEOID_TRACT_10</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">GEOID_TRACT_20</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">NAMELSAD_TRACT_10</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">NAMELSAD_TRACT_20</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">AREALAND_TRACT_10</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">AREALAND_TRACT_20</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_right">01001020100</td>
<td class="gt_row gt_right">01001020100</td>
<td class="gt_row gt_left">Census Tract 201</td>
<td class="gt_row gt_left">Census Tract 201</td>
<td class="gt_row gt_right">9,827,271</td>
<td class="gt_row gt_right">9,825,304</td></tr>
    <tr><td class="gt_row gt_right">01001020200</td>
<td class="gt_row gt_right">01001020100</td>
<td class="gt_row gt_left">Census Tract 202</td>
<td class="gt_row gt_left">Census Tract 201</td>
<td class="gt_row gt_right">3,325,674</td>
<td class="gt_row gt_right">9,825,304</td></tr>
    <tr><td class="gt_row gt_right">01001020200</td>
<td class="gt_row gt_right">01001020200</td>
<td class="gt_row gt_left">Census Tract 202</td>
<td class="gt_row gt_left">Census Tract 202</td>
<td class="gt_row gt_right">3,325,674</td>
<td class="gt_row gt_right">3,320,818</td></tr>
    <tr><td class="gt_row gt_right">01001020300</td>
<td class="gt_row gt_right">01001020300</td>
<td class="gt_row gt_left">Census Tract 203</td>
<td class="gt_row gt_left">Census Tract 203</td>
<td class="gt_row gt_right">5,349,271</td>
<td class="gt_row gt_right">5,349,271</td></tr>
    <tr><td class="gt_row gt_right">01001020400</td>
<td class="gt_row gt_right">01001020400</td>
<td class="gt_row gt_left">Census Tract 204</td>
<td class="gt_row gt_left">Census Tract 204</td>
<td class="gt_row gt_right">6,384,282</td>
<td class="gt_row gt_right">6,384,282</td></tr>
    <tr><td class="gt_row gt_right">01001020500</td>
<td class="gt_row gt_right">01001020501</td>
<td class="gt_row gt_left">Census Tract 205</td>
<td class="gt_row gt_left">Census Tract 205.01</td>
<td class="gt_row gt_right">11,408,867</td>
<td class="gt_row gt_right">6,203,654</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>Note from these example records shifts in tract definitions and areas. These relationship files can help you identify which census tracts have changed, however, creating consistent estimates over time from this information is challenging. Researchers tend to use strategies that either attribute characteristics using either <em>area</em> or <em>share of population</em> to weight how portions of one tract might translate into a new boundary in a different year.</p>
<p>Brown University’s <a href="https://s4.ad.brown.edu/projects/diversity/index.htm">Spatial Structures in the Social Sciences</a> group has produced a <a href="https://s4.ad.brown.edu/projects/diversity/researcher/LTDB.htm">Longitudinal Tract Database</a> which provides demographic estimates for prior decennial census years 1970, 1980, 1990, and 2000 adjusted to 2010 boundaries. The files also include selected demographic indicators that are comparable across each of these decennial census enumerations (the questions are asked in the same or similar enough way to be able to reliably compare these qualities over time).</p>
<p>LTDB data come from two sources:</p>
<ol type="1">
<li><p>Decennial “short form” census data from the 100 percent count of the population. This includes race and ethnicity, age, household composition, and household tenure information.</p></li>
<li><p>Decennial “long form” census data administered to a sample of 1 in 6 households. These surveys contain far more detailed information on the characteristics of the population.</p></li>
</ol>
<p>Decennial data continues to be collected, but the 1 in 6 count sample data has now been replaced by the American Community Survey which annually samples the population creating valuable intercensal estimates used by analysts today.</p>
<p>You can find more information about the LTDB in the following <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4134912/pdf/nihms-522336.pdf">technical documentation</a>.</p>
<p>In order to examine income and demographic change for census tracts, we’re going to use LTDB data, and ultimately will supplement what’s in these data with additional ACS data. We do this so that we can compare estimates over time using the same census tract geographies.</p>
</section>
<section id="setup" class="level2">
<h2 class="anchored" data-anchor-id="setup">Setup</h2>
<p>Let’s get set up by loading a few packages:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="ltdb-data-download" class="level3">
<h3 class="anchored" data-anchor-id="ltdb-data-download">LTDB Data Download</h3>
<p>Let’s start by downloading LTDB data for analysis.</p>
<p>Go to the <a href="https://s4.ad.brown.edu/projects/diversity/researcher/LTBDDload/Default.aspx">data download</a> page. You will need to enter your email address and certify that you will follow terms of use for the data.</p>
<p>Make note of what datasets are aggregated in the LTDB Standard Datasets. <img src="08_neighborhood_change/images/01_ltdb.png" class="img-fluid"></p>
<p>Download both the <em>full</em> and <em>sample</em> standard data set files for all years. Also download the codebook.</p>
<p>Decompress the downloaded folder containing the data files and place the raw data csv files in your raw data folder. You should have 12 files - six “fullcount” files and six “sample” files (you can ignore those files in the fullcount download with “Global Neighborhood” in their file name).</p>
<p>Place the codebook in your data documentation folder.</p>
<p>Now that we have data and documentation manually downloaded, we can import the data for analysis.</p>
</section>
<section id="data-import" class="level3">
<h3 class="anchored" data-anchor-id="data-import">Data Import</h3>
<div class="cell">

</div>
<p>Let’s import our data. These are csv files - in the past we’ve used <code>read_csv()</code> from the readr package to do this (readr is part of the tidyverse so you don’t need to load it separately).</p>
<p>For clarity, use the prefix “F_” for full count data and “S_” for sample data when you read the LTDB into table objects in R. Go ahead and import the ten data files:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>F_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_1970_fullcount.csv"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>S_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_1970_sample.csv"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>F_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_1980_fullcount.csv"</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>S_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_1980_sample.csv"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>F_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_1990_fullcount.csv"</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>S_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_1990_sample.csv"</span>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>F_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_2000_fullcount.csv"</span>)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>S_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_2000_sample.csv"</span>)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>F_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_2010_fullcount.csv"</span>)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>S_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_std_200812_Sample.csv"</span>)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>F_2020<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_2020_fullcount.csv"</span>)</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>S_2020<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_std_201519_Sample.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now that we have all of the data loaded, we can start working on preparing it for analysis.</p>
</section>
</section>
<section id="data-preparation" class="level2">
<h2 class="anchored" data-anchor-id="data-preparation">Data Preparation</h2>
<section id="isolate-income-data" class="level3">
<h3 class="anchored" data-anchor-id="isolate-income-data">Isolate Income Data</h3>
<p>We need to start by identifying the variable(s) containing income information. Go into the data codebook and search for income. We have information on median household income, some breakdowns by race and ethnicity, and per-capita income.</p>
<p>Let’s move forward with the per-capita income information, since this is what is listed in the Voorhees study. We will need to pull that information from each of the data years 1970, 1980, 1990, 2000, 2010 (as proxied by 2008-2012 ACS data, and 2020 (as proxied by 2014 - 2019 ACS data)).</p>
<p>For each of the five decades, create a new dataset inc_[year] that contains the 2010 tract identifier (TRTID10), and the income per capita variable (INCPC[year]). For the 2010 data, also include the state identified (statea), the county identified (countya), and the tract identifier (tracta):</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>inc_70<span class="ot">&lt;-</span>S_1970 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, INCPC70)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>inc_80<span class="ot">&lt;-</span>S_1980 <span class="sc">|&gt;</span> <span class="fu">select</span>(trtid10, incpc80)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>inc_90<span class="ot">&lt;-</span>S_1990 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, INCPC90)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>inc_00<span class="ot">&lt;-</span>S_2000 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, INCPC00)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>inc_10<span class="ot">&lt;-</span>S_2010 <span class="sc">|&gt;</span> <span class="fu">select</span>(tractid, incpc12)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>inc_20<span class="ot">&lt;-</span>S_2020 <span class="sc">|&gt;</span> <span class="fu">select</span>(tractid, statea, countya, tracta, incpc19)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now that we’ve isolated the income per capita data, we can start to think about how we’d join it all together for the purposes of mapping and further analysis.</p>
<p>One thing we should immediately note here is that there are different numbers of observations for each year. For instance, inc_20 (observations for 2020) contains 73,056 observations:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(inc_20)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 73056</code></pre>
</div>
</div>
<p>inc_70 contains 52,759 observations:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(inc_70)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 52759</code></pre>
</div>
</div>
<p>This should guide our strategy for how we join the data together. Our join strategy should try to keep all records corresponding to the observation years that have more observations (this is due to differences in geographic coverage between each decade).</p>
<p>Another thing we may want to handle before we join the data together are to standardize column names. You’ll note from selecting columns and constructing the inc_[year] datasets that there’s different capitalization and naming for some years. We can fix this when we’re selecting our data by specifying [new name] = [column name] in our select calls:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>inc_70<span class="ot">&lt;-</span>S_1970 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, INCPC70)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>inc_80<span class="ot">&lt;-</span>S_1980 <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="at">TRTID10 =</span> trtid10, incpc80)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>inc_90<span class="ot">&lt;-</span>S_1990 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, INCPC90)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>inc_00<span class="ot">&lt;-</span>S_2000 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, INCPC00)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>inc_10<span class="ot">&lt;-</span>S_2010 <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="at">TRTID10 =</span> tractid, <span class="at">INCPC12 =</span> incpc12)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>inc_20<span class="ot">&lt;-</span>S_2020 <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="at">TRTID10 =</span> tractid, <span class="at">STATE =</span> statea, <span class="at">COUNTY =</span> countya, <span class="at">TRACT =</span> tracta, <span class="at">INCPC19 =</span> incpc19)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We have another major problem to deal with before we can join these data together. Take a look at the column types using the <code>str()</code> command:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(inc_70)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [52,759 × 2] (S3: tbl_df/tbl/data.frame)
 $ TRTID10: num [1:52759] 1e+09 1e+09 1e+09 1e+09 1e+09 ...
 $ INCPC70: num [1:52759] 2850 2597 2876 2567 2847 ...</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(inc_80)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [59,187 × 2] (S3: tbl_df/tbl/data.frame)
 $ TRTID10: num [1:59187] 1e+09 1e+09 1e+09 1e+09 1e+09 ...
 $ incpc80: num [1:59187] 0 4648 5804 7668 6339 ...</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(inc_90)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [72,693 × 2] (S3: tbl_df/tbl/data.frame)
 $ TRTID10: num [1:72693] 1e+09 1e+09 1e+09 1e+09 1e+09 ...
 $ INCPC90: num [1:72693] 11663 8555 11782 15323 14492 ...</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(inc_00)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [72,693 × 2] (S3: tbl_df/tbl/data.frame)
 $ TRTID10: num [1:72693] 1e+09 1e+09 1e+09 1e+09 1e+09 ...
 $ INCPC00: num [1:72693] 17771 14217 18346 19741 24492 ...</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(inc_10)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [73,056 × 2] (S3: tbl_df/tbl/data.frame)
 $ TRTID10: chr [1:73056] "01101005302" "01101005402" "01101001800" "01095030600" ...
 $ INCPC12: num [1:73056] 18084 18006 24799 21889 16953 ...</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(inc_20)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [73,056 × 5] (S3: tbl_df/tbl/data.frame)
 $ TRTID10: chr [1:73056] "01073001100" "01073001400" "01073002000" "01073003802" ...
 $ STATE  : chr [1:73056] "Alabama" "Alabama" "Alabama" "Alabama" ...
 $ COUNTY : chr [1:73056] "Jefferson County" "Jefferson County" "Jefferson County" "Jefferson County" ...
 $ TRACT  : chr [1:73056] "Census Tract 11" "Census Tract 14" "Census Tract 20" "Census Tract 38.02" ...
 $ INCPC19: num [1:73056] 21518 20209 15153 17416 16570 ...</code></pre>
</div>
</div>
<p>Some of our TRTID10 colums are defined as character and others as numeric. Although these FIPS codes look like numbers, they are unique IDs and we want to make sure that they are consistently stored as character vectors. This is also important, because some of the states that come early in the alphabet start with “0” (for instance, Alabama is state “01”). If these import as numeric, that leading zero may be lost. This means we need to go back to our import steps and <em>explicitly specify</em> how <code>read_csv()</code> should import these columns.</p>
<p>When <code>read_csv()</code> initiates the process of reading data, it reads the first several rows of data that then makes an educated guess as to the format to use for each column of data. We can override this and explicitly tell <code>read_csv()</code> what format to use for particular columns using the <code>col_types</code> option. We specify column types by providing an equivalency statement. For instance <code>col_types = cols(TRTID10 = col_character())</code> would say please let me explicitly define a column type. Where a column is named “TRTID10”, read in this column and assign it’s contents as character. We could explicitly set other types as needed (e.g.&nbsp;col_numeric(), col_boolean(), etc.).</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>F_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_1970_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>()))</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>S_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/ltdb_std_1970_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>()))</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>F_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_1980_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>()))</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>S_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/ltdb_std_1980_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">trtid10 =</span> <span class="fu">col_character</span>()))</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>F_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_1990_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>()))</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>S_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/ltdb_std_1990_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>()))</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>F_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_2000_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>()))</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>S_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/ltdb_std_2000_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>()))</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>F_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_2010_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid =</span> <span class="fu">col_character</span>()))</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>S_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_std_200812_Sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid =</span> <span class="fu">col_character</span>()))</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>F_2020<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_2020_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID2010 =</span> <span class="fu">col_character</span>()))</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>S_2020<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_std_201519_Sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid =</span> <span class="fu">col_character</span>()))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>F_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_1970_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>()))</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>S_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_1970_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>()))</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Finish (re)importing the LTDB data here.</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>F_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_1980_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>()))</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>S_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_1980_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">trtid10=</span><span class="fu">col_character</span>()))</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>F_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_1990_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>()))</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>S_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_1990_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>()))</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>F_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_2000_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>()))</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>S_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_2000_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>()))</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>F_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_2010_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid=</span><span class="fu">col_character</span>()))</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>S_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_std_200812_Sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid=</span><span class="fu">col_character</span>()))</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>F_2020<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_2020_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid=</span><span class="fu">col_character</span>()))</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>S_2020<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_std_201519_Sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid=</span><span class="fu">col_character</span>()))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Then we can go ahead and pull out our income columns as we did before:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>inc_70<span class="ot">&lt;-</span>S_1970 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, INCPC70)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>inc_80<span class="ot">&lt;-</span>S_1980 <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="at">TRTID10 =</span> trtid10, incpc80)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>inc_90<span class="ot">&lt;-</span>S_1990 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, INCPC90)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>inc_00<span class="ot">&lt;-</span>S_2000 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, INCPC00)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>inc_10<span class="ot">&lt;-</span>S_2010 <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="at">TRTID10 =</span> tractid, <span class="at">INCPC12 =</span> incpc12)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>inc_20<span class="ot">&lt;-</span>S_2020 <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="at">TRTID10 =</span> tractid, <span class="at">STATE =</span> statea, <span class="at">COUNTY =</span> countya, <span class="at">TRACT =</span> tracta, <span class="at">INCPC19 =</span> incpc19)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Let’s run one more check on the TRTID10 columns. Lets chech the number of characters in out TRTID columns. Every combined state-county-tract FIPS code should be 11 characters long:</p>
<ul>
<li>2 state characters</li>
<li>3 county characters</li>
<li>6 tract characters</li>
</ul>
<p>Lets take our inc_70 dataset, group it by the count of the number of characters in each observation in the TRTID10 column (<code>nchar()</code>), and then ciybt the number of observations:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>inc_70 <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span> </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  `nchar(TRTID10)` `n()`
             &lt;int&gt; &lt;int&gt;
1               10 11375
2               11 41384</code></pre>
</div>
</div>
<p>Hmm - in the 1970 income data, we have 11,375 observations with less than the expected number of characters. Why might this be? This could be an artifact of the data we downloaded or could be a function of how <code>read_csv()</code> is importing these data.</p>
<p>Past experience tells me that we are missing the leading zero from states with state FIPS codes under 10. We can easily add this back in using the <code>str_pad()</code> command from the <em>stringr</em> package - this package has tools for modifying strings or character vectors.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>inc_70<span class="ot">&lt;-</span>inc_70 <span class="sc">|&gt;</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The first part should be straightforward - we’re overwriting the existing inc_70 data with an updated version. We’re using <code>mutate()</code> to alter the TRTID10 column. We’re using <code>str_pad()</code> to “pad” the TRTID10 column. The desired width (number of characters) is 11, we’re going to add our pad to the left side of the existing string, and the pad we’ll add is the character “0”.</p>
<p><code>str_pad()</code> will add however many pad characters we need to get to the desired length. For instance, if we were padding a string “123” with “A” and specified a width of 5, we would get “AA123”. If we applied the same to the string “1536” we would get “A1536”. If we applied it to “15683” we would get “15683”.</p>
<p>Now we can check to confirm that this worked:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>inc_70 <span class="sc">|&gt;</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span>  </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  `nchar(TRTID10)` `n()`
             &lt;int&gt; &lt;int&gt;
1               11 52759</code></pre>
</div>
</div>
<p>All the observations of TRTID10 are now 11 characters wide.</p>
<p>Check the 1980 to 2010 data, and pad where needed.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>inc_80 <span class="sc">|&gt;</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span>  </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>()) <span class="co"># Needs padding</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  `nchar(TRTID10)` `n()`
             &lt;int&gt; &lt;int&gt;
1               10 12353
2               11 46834</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>inc_90 <span class="sc">|&gt;</span>  </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span>  </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>()) <span class="co"># Needs padding</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  `nchar(TRTID10)` `n()`
             &lt;int&gt; &lt;int&gt;
1               10 13663
2               11 59030</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>inc_00 <span class="sc">|&gt;</span>  </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span>  </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>()) <span class="co"># Needs padding</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  `nchar(TRTID10)` `n()`
             &lt;int&gt; &lt;int&gt;
1               10 13663
2               11 59030</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>inc_10 <span class="sc">|&gt;</span>  </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span> </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>()) <span class="co"># No padding needed</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  `nchar(TRTID10)` `n()`
             &lt;int&gt; &lt;int&gt;
1               11 73056</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>inc_20 <span class="sc">|&gt;</span>  </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span>  </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>()) <span class="co"># No padding needed</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  `nchar(TRTID10)` `n()`
             &lt;int&gt; &lt;int&gt;
1               11 73056</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>inc_80<span class="ot">&lt;-</span>inc_80 <span class="sc">|&gt;</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>inc_90<span class="ot">&lt;-</span>inc_90 <span class="sc">|&gt;</span>  </span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>inc_00<span class="ot">&lt;-</span>inc_00 <span class="sc">|&gt;</span>  </span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now confirm that your padding has worked:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>inc_70 <span class="sc">|&gt;</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span> </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  `nchar(TRTID10)` `n()`
             &lt;int&gt; &lt;int&gt;
1               11 52759</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>inc_80 <span class="sc">|&gt;</span>  </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span> </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  `nchar(TRTID10)` `n()`
             &lt;int&gt; &lt;int&gt;
1               11 59187</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>inc_90 <span class="sc">|&gt;</span> </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span> </span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  `nchar(TRTID10)` `n()`
             &lt;int&gt; &lt;int&gt;
1               11 72693</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>inc_00 <span class="sc">|&gt;</span>  </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span>  </span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  `nchar(TRTID10)` `n()`
             &lt;int&gt; &lt;int&gt;
1               11 72693</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>inc_10 <span class="sc">|&gt;</span> </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span> </span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  `nchar(TRTID10)` `n()`
             &lt;int&gt; &lt;int&gt;
1               11 73056</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>inc_20 <span class="sc">|&gt;</span> </span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span> </span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  `nchar(TRTID10)` `n()`
             &lt;int&gt; &lt;int&gt;
1               11 73056</code></pre>
</div>
</div>
<p>Note that this padding issue would not effect Illinois (state FIPS code 17), but it’s important to know how to diagnose and fix this problem, as it could come up for other states or places you are working with.</p>
<p>Remember to take your time, and build code that you (or others) can use universally in the future.</p>
</section>
<section id="re-doing-data-import" class="level3">
<h3 class="anchored" data-anchor-id="re-doing-data-import">Re-doing Data Import</h3>
<p>Before we move forward, let’s update our data import code so that we incorporate addressing the data issues we’ve covered into our data importation workflow. As a reminder, we need to rename our combined state-county-tract FIPS column and pad the column to 11 characters on the left size with “0”.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>F_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_1970_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>S_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/ltdb_std_1970_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>F_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_1980_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>S_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/ltdb_std_1980_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">trtid10 =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(trtid10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>F_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_1990_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>S_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/ltdb_std_1990_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>F_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_2000_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>S_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/ltdb_std_2000_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a>F_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_2010_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid =</span> <span class="fu">col_character</span>()))</span>
<span id="cb53-22"><a href="#cb53-22" aria-hidden="true" tabindex="-1"></a>S_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_std_200812_Sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb53-23"><a href="#cb53-23" aria-hidden="true" tabindex="-1"></a>   <span class="fu">rename</span>(<span class="at">TRTID10 =</span> tractid)</span>
<span id="cb53-24"><a href="#cb53-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-25"><a href="#cb53-25" aria-hidden="true" tabindex="-1"></a>F_2020<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_2020_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID2010 =</span> <span class="fu">col_character</span>()))</span>
<span id="cb53-26"><a href="#cb53-26" aria-hidden="true" tabindex="-1"></a>S_2020<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_std_201519_Sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb53-27"><a href="#cb53-27" aria-hidden="true" tabindex="-1"></a>   <span class="fu">rename</span>(<span class="at">TRTID10 =</span> tractid)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>F_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_1970_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>())) <span class="sc">|&gt;</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>S_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_1970_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>())) <span class="sc">|&gt;</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Finish (re)importing the LTDB data here.</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>F_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_1980_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>())) <span class="sc">|&gt;</span></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>S_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_1980_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">trtid10=</span><span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">TRTID10 =</span> trtid10) <span class="sc">|&gt;</span></span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>F_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_1990_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>())) <span class="sc">|&gt;</span></span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>S_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_1990_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>())) <span class="sc">|&gt;</span></span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a>F_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_2000_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>())) <span class="sc">|&gt;</span></span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a>S_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_2000_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>())) <span class="sc">|&gt;</span></span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb54-24"><a href="#cb54-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-25"><a href="#cb54-25" aria-hidden="true" tabindex="-1"></a>F_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_2010_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid=</span><span class="fu">col_character</span>())) <span class="sc">|&gt;</span></span>
<span id="cb54-26"><a href="#cb54-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">TRTID10 =</span> tractid) <span class="sc">|&gt;</span></span>
<span id="cb54-27"><a href="#cb54-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb54-28"><a href="#cb54-28" aria-hidden="true" tabindex="-1"></a>S_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_2010_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid=</span><span class="fu">col_character</span>())) <span class="sc">|&gt;</span></span>
<span id="cb54-29"><a href="#cb54-29" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rename</span>(<span class="at">TRTID10 =</span> tractid) <span class="sc">|&gt;</span></span>
<span id="cb54-30"><a href="#cb54-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>And from here we can re-create the inc_[year] datasets:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>inc_70<span class="ot">&lt;-</span>S_1970 <span class="sc">|&gt;</span>  </span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRTID10, INCPC70)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>inc_80<span class="ot">&lt;-</span>S_1980 <span class="sc">|&gt;</span>  </span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRTID10, <span class="at">INCPC80 =</span> incpc80)</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>inc_90<span class="ot">&lt;-</span>S_1990 <span class="sc">|&gt;</span>  </span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRTID10, INCPC90)</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>inc_00<span class="ot">&lt;-</span>S_2000 <span class="sc">|&gt;</span>  </span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRTID10, INCPC00)</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>inc_10<span class="ot">&lt;-</span>S_2010 <span class="sc">|&gt;</span>  </span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRTID10, <span class="at">INCPC12 =</span> incpc12)</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>inc_20 <span class="ot">&lt;-</span> S_2020 <span class="sc">|&gt;</span> </span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRTID10, <span class="at">STATE =</span> statea, <span class="at">COUNTY =</span> countya, <span class="at">TRACT =</span> tracta, <span class="at">INCPC19 =</span> incpc19)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="join-together" class="level3">
<h3 class="anchored" data-anchor-id="join-together">Join Together</h3>
<p>Finally we have our data in a form where we can join our income cross-sections together. Using left joins, join together your six income data cross-sections into a new dataset called income.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>income<span class="ot">&lt;-</span><span class="fu">left_join</span>(inc_20, inc_10, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>income<span class="ot">&lt;-</span><span class="fu">left_join</span>(income, inc_00, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>income<span class="ot">&lt;-</span><span class="fu">left_join</span>(income, inc_90, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>income<span class="ot">&lt;-</span><span class="fu">left_join</span>(income, inc_80, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>income<span class="ot">&lt;-</span><span class="fu">left_join</span>(income, inc_70, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Re-organize the income per capita fields so they are in the order 1970, 1980, 1990, 2000, 2010, 2010.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>income<span class="ot">&lt;-</span>income  <span class="sc">|&gt;</span>  </span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRTID10, STATE, COUNTY, TRACT, INCPC70, INCPC80, INCPC90, INCPC00, INCPC12, INCPC19)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="adjust-for-inflation" class="level3">
<h3 class="anchored" data-anchor-id="adjust-for-inflation">Adjust for Inflation</h3>
<p>We have one more step to accomplish before we can move forward with analysis. Each of our income observations is reported out in the monetary value associated with the time period in which it was collected. Due to inflation, money has a different value over time - $5 in 1970 could buy you a lot more than it can in 2020. Using the <a href="https://www.bls.gov/data/inflation_calculator.htm">CPI Inflation Calculator</a>, we can calculate that the value of 5 dollars in 1970 would have the equivalent value of 39 dollars and 57 cents in 2023 dollars.</p>
<p>By standardizing all of the dollar values to their equivalent value in a common year, it is much easier to compare changes in income over time as they are in the same dollar equivalent unit.</p>
<p>The CPI Inflation Calculator can help us here. If we find out how much $1 in our data collection year is worth in a common current year, we can figure out what we’d have to multiply our observations by to convert them to current year dollars.</p>
<p>We will eventually add some additional data and demographic characteristics from the 2015-2019 ACS. Looking in the 2015-2019 ACS per capital income table <a href="https://data.census.gov/cedsci/table?q=B19301%3A%20PER%20CAPITA%20INCOME%20IN%20THE%20PAST%2012%20MONTHS%20%28IN%202019%20INFLATION-ADJUSTED%20DOLLARS%29&amp;tid=ACSDT1Y2019.B19301&amp;hidePreview=true">B19301: Per Capita Income in the Past 12 Months</a> we see that these data are reported in inflation-adjusted 2019 dollars.</p>
<p>Since 2019 will be our most recent point of reference, let’s adjust our dollar values from 1970 - 2010 to 2019 dollars. Using the CPI Inflation Calculator, find the value of 1 dollar in January of each of the decennial years in January 2019.</p>
<table class="table">
<thead>
<tr class="header">
<th>Year</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1970</td>
<td>6.66</td>
</tr>
<tr class="even">
<td>1980</td>
<td>3.24</td>
</tr>
<tr class="odd">
<td>1990</td>
<td>1.98</td>
</tr>
<tr class="even">
<td>2000</td>
<td>1.49</td>
</tr>
<tr class="odd">
<td>2010 (2012)</td>
<td>1.11</td>
</tr>
</tbody>
</table>
<p>Now multiply each of the income per capita columns by their inflation adjustment factor to get them into 2019 dollars (assume 1970, 1980, 1990, and 2000 data are from January of that year, and our 2010 data which comes from the ACS is actually in 2012 dollars).</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>income<span class="ot">&lt;-</span>income <span class="sc">|&gt;</span> </span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">INCPC70 =</span> INCPC70<span class="sc">*</span><span class="fl">6.66</span>,</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">INCPC80 =</span> INCPC80<span class="sc">*</span><span class="fl">3.24</span>,</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">INCPC90 =</span> INCPC90<span class="sc">*</span><span class="fl">1.98</span>,</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">INCPC00 =</span> INCPC00<span class="sc">*</span><span class="fl">1.49</span>,</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">INCPC12 =</span> INCPC12<span class="sc">*</span><span class="fl">1.11</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We now have a relatively clean income dataset that we could use to analyze any tract, city, or region within the United States.</p>
</section>
</section>
<section id="select-regional-data" class="level2">
<h2 class="anchored" data-anchor-id="select-regional-data">Select Regional Data</h2>
<p>As we have for our last few analyses, we’re going to examine neighborhood change for New York City. As in the past, we’ll start by pulling out data for the counties that represent boroughs of New York City. Our LTDB data contains a combined State, County, Tract FIPS code - how could we pull out the state and county FIPS codes we would need to identify counties?</p>
<p>We have casually been introduced to stringr’s <code>substr()</code> function in the past, that allows us to pull out substrings based upon the character positions. In this case, we want to pull out the first five characters from the TRTID10 field, which contains the combined state and county FIPS code. Use <code>substr()</code> inside a mutate()` to create a new column called COFIPS in our combined income dataset that contains the first five characters from TRTID10.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>income<span class="ot">&lt;-</span>income <span class="sc">|&gt;</span> </span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">COFIPS =</span> <span class="fu">substr</span>(TRTID10, <span class="dv">0</span>, <span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>As a reminder, here’s the names and FIPS codes for NYC Boroughs:</p>
<table class="table">
<thead>
<tr class="header">
<th>FIPS Code</th>
<th>County Name</th>
<th>Borough Name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>36047</td>
<td>Kings County</td>
<td>Brooklyn</td>
</tr>
<tr class="even">
<td>36005</td>
<td>Bronx County</td>
<td>Bronx</td>
</tr>
<tr class="odd">
<td>36081</td>
<td>Queens County</td>
<td>Queens</td>
</tr>
<tr class="even">
<td>36085</td>
<td>Richmond County</td>
<td>Staten Island</td>
</tr>
<tr class="odd">
<td>36061</td>
<td>New York County</td>
<td>Manhattan</td>
</tr>
</tbody>
</table>
<p>Let’s create a new income dataset called _income that contains income observations for New York City’s Boroughs (in your <code>filter()</code> statement consider using <code>%in%</code> with a list of combined state-county FIPS codes):</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="ot">&lt;-</span> income <span class="sc">|&gt;</span> </span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(COFIPS <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"36047"</span>, <span class="st">"36005"</span>, <span class="st">"36081"</span>, <span class="st">"36085"</span>, <span class="st">"36061"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now’s a good time to check descriptive statistics for our income data. Let’s use <code>summary()</code> on the chi_income object:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(nyc_income)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   TRTID10             STATE              COUNTY             TRACT          
 Length:2167        Length:2167        Length:2167        Length:2167       
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
                                                                            
    INCPC70          INCPC80          INCPC90          INCPC00      
 Min.   :     0   Min.   :     0   Min.   :     0   Min.   :     0  
 1st Qu.: 24115   1st Qu.: 15030   1st Qu.: 18831   1st Qu.: 18996  
 Median : 29101   Median : 21062   Median : 27186   Median : 25768  
 Mean   : 31049   Mean   : 22503   Mean   : 30743   Mean   : 32044  
 3rd Qu.: 34249   3rd Qu.: 25867   3rd Qu.: 34583   3rd Qu.: 34538  
 Max.   :278792   Max.   :140026   Max.   :315848   Max.   :441085  
 NA's   :30       NA's   :15       NA's   :15       NA's   :15      
    INCPC12            INCPC19          COFIPS         
 Min.   :   387.4   Min.   :  3341   Length:2167       
 1st Qu.: 19782.1   1st Qu.: 22879   Class :character  
 Median : 26797.6   Median : 30120   Mode  :character  
 Mean   : 33951.3   Mean   : 38454                     
 3rd Qu.: 36367.8   3rd Qu.: 41411                     
 Max.   :280727.9   Max.   :258909                     
 NA's   :47         NA's   :50                         </code></pre>
</div>
</div>
<p>We have 2,167 observations for New York City.</p>
</section>
<section id="tract-region-income-comparisons" class="level1">
<h1>Tract-Region Income Comparisons</h1>
<p>Based upon the Voorhees Center’s analysis, our next step is to calculate the difference between the income in each tract and the “Metro Area Weighted Average Income”. Metro Area Average Income makes sense - this is the average of the income per capita for all census tracts in the metro area. <em>Weighted Average Income</em>, income requires just a bit more thought. If we were to find the <em>Average Income</em> for all tracts in the metro area, we would be assuming they all have the same population. Calculating the <em>Weighted Average Income</em> weights the contribution of each tract’s income observation by the population in the census tract, so that tracts with more people will get more weight in the calculation of the average.</p>
<p>This means that we need to grab population data for each of our observation years, so that we can then combine the population data and our income data to produced weighted average income.</p>
<p>Let’s pull the population numbers from our full count data. Create a dataset called pop that joins the tract population from the POP_[year] column for each year into one dataset:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>pop_70<span class="ot">&lt;-</span> F_1970 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, POP70)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>pop_80<span class="ot">&lt;-</span> F_1980 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, POP80)</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>pop_90<span class="ot">&lt;-</span> F_1990 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, POP90)</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>pop_00<span class="ot">&lt;-</span> F_2000 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, POP00)</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>pop_10<span class="ot">&lt;-</span> F_2010 <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="at">TRTID10 =</span> tractid, <span class="at">POP10=</span>pop10) <span class="co"># note the renaming of variables.</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>pop_20<span class="ot">&lt;-</span> F_2020 <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="at">TRTID10 =</span> TRTID2010, <span class="at">POP20=</span>pop20) <span class="co"># note the renaming of variables.</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>pop<span class="ot">&lt;-</span><span class="fu">left_join</span>(pop_20, pop_10, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>pop<span class="ot">&lt;-</span><span class="fu">left_join</span>(pop, pop_00, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>pop<span class="ot">&lt;-</span><span class="fu">left_join</span>(pop, pop_90, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>pop<span class="ot">&lt;-</span><span class="fu">left_join</span>(pop, pop_80, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>pop<span class="ot">&lt;-</span><span class="fu">left_join</span>(pop, pop_70, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>pop <span class="ot">&lt;-</span> pop <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, POP70, POP80, POP90, POP00, POP10, POP20)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now that you have combined population data, join it to your NYC income data:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>nyc_income<span class="ot">&lt;-</span><span class="fu">left_join</span>(nyc_income, pop, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now we can calculate the weighted average - we create a new column for the weighted average for each year. We supply the income per capita information and then the weights (in this case, the population count). We also specify the removal of NA values.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>nyc_income<span class="ot">&lt;-</span>nyc_income <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">winc_70 =</span> <span class="fu">weighted.mean</span>(INCPC70, POP70, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">winc_80 =</span> <span class="fu">weighted.mean</span>(INCPC80, POP80, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">winc_90 =</span> <span class="fu">weighted.mean</span>(INCPC90, POP90, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">winc_00 =</span> <span class="fu">weighted.mean</span>(INCPC00, POP00, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">winc_10 =</span> <span class="fu">weighted.mean</span>(INCPC12, POP10, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">winc_20 =</span> <span class="fu">weighted.mean</span>(INCPC19, POP20, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now we can calculate the difference between each tract’s income and the regional average income per capita. Place these differences in income into new columns dincome_[year]:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>nyc_income<span class="ot">&lt;-</span>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">dincome_70 =</span> INCPC70 <span class="sc">-</span> winc_70,</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">dincome_80 =</span> INCPC80 <span class="sc">-</span> winc_80,</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">dincome_90 =</span> INCPC90 <span class="sc">-</span> winc_90,</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">dincome_00 =</span> INCPC00 <span class="sc">-</span> winc_00,</span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">dincome_10 =</span> INCPC12 <span class="sc">-</span> winc_10,</span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">dincome_20 =</span> INCPC19 <span class="sc">-</span> winc_20</span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>And finally, we can calculate the percentage difference.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>nyc_income<span class="ot">&lt;-</span>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">pincome_70 =</span> dincome_70<span class="sc">/</span>winc_70,</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">pincome_80 =</span> dincome_80<span class="sc">/</span>winc_80,</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">pincome_90 =</span> dincome_90<span class="sc">/</span>winc_90,</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">pincome_00 =</span> dincome_00<span class="sc">/</span>winc_00,</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">pincome_10 =</span> dincome_10<span class="sc">/</span>winc_10,</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">pincome_20 =</span> dincome_20<span class="sc">/</span>winc_20</span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Recall that the Voorhees Center’s study classifies tracts based upon the percentage change:</p>
<ul>
<li><strong>Very High Income:</strong> Greater than 40% above the regional average</li>
<li><strong>High Income:</strong> 20% - 40% above the regional average</li>
<li><strong>Middle Income:</strong> 20% below to 20% above the regional average</li>
<li><strong>Low Income:</strong> 20% below to 40% below the regional average</li>
<li><strong>Very Low Income:</strong> Greater than 40% below the regional average</li>
</ul>
<p>We can then reshape our “wide” data into “long” data pulling out our percent change estimates:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>nyc_income_long<span class="ot">&lt;-</span>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(pincome_70<span class="sc">:</span>pincome_20) <span class="sc">|&gt;</span> </span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRTID10, COUNTY, name, value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Rename the name and value columns</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>nyc_income_long<span class="ot">&lt;-</span>nyc_income_long <span class="sc">|&gt;</span> </span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRTID10, COUNTY, <span class="at">Year =</span> name, <span class="at">pincome =</span> value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Re-label the years</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>nyc_income_long<span class="ot">&lt;-</span>nyc_income_long <span class="sc">|&gt;</span> </span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">case_when</span>(</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  Year <span class="sc">==</span> <span class="st">"pincome_70"</span> <span class="sc">~</span> <span class="st">"1970"</span>,</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  Year <span class="sc">==</span> <span class="st">"pincome_80"</span> <span class="sc">~</span> <span class="st">"1980"</span>,</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>  Year <span class="sc">==</span> <span class="st">"pincome_90"</span> <span class="sc">~</span> <span class="st">"1990"</span>,</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>  Year <span class="sc">==</span> <span class="st">"pincome_00"</span> <span class="sc">~</span> <span class="st">"2000"</span>,</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>  Year <span class="sc">==</span> <span class="st">"pincome_10"</span> <span class="sc">~</span> <span class="st">"2010"</span>,</span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>  Year <span class="sc">==</span> <span class="st">"pincome_20"</span> <span class="sc">~</span> <span class="st">"2020"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>And use <code>case_when()</code> to label the percentage change values using the labels in the Voorhees Center report:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>nyc_income_long<span class="ot">&lt;-</span>nyc_income_long <span class="sc">|&gt;</span> </span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pincome_cat =</span> <span class="fu">case_when</span>(</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome, <span class="sc">-</span><span class="dv">100</span>, <span class="sc">-</span>.<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"Very Low Income"</span>,</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome, <span class="sc">-</span>.<span class="dv">4</span>, <span class="sc">-</span>.<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Low Income"</span>,</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome, <span class="sc">-</span>.<span class="dv">2</span>, .<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Middle Income"</span>,</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome, .<span class="dv">2</span>, .<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"High Income"</span>,</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome, .<span class="dv">4</span>, <span class="dv">100</span>) <span class="sc">~</span> <span class="st">"Very High Income"</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We’re using <code>case_when()</code> to find the values in the pre-specified ranges, and then assigning them labels. <code>between()</code> conducts a logical test to see whether values fall within a range specified. In the case of “Very Low Income” and “Very High Income” we use really large values to specify the outer bounds that should capture all the values above of below 40 percent.</p>
<p>Let’s go ahead and count by each year the distribution of values in each category:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>nyc_income_long <span class="sc">|&gt;</span> </span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year, pincome_cat) <span class="sc">|&gt;</span> </span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Year, <span class="at">values_from =</span> count) <span class="sc">|&gt;</span> </span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Year'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output-display">

<div id="qxaokplxlp" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#qxaokplxlp) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#qxaokplxlp) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#qxaokplxlp) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#qxaokplxlp) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#qxaokplxlp) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#qxaokplxlp) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#qxaokplxlp) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#qxaokplxlp) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#qxaokplxlp) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#qxaokplxlp) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#qxaokplxlp) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#qxaokplxlp) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#qxaokplxlp) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#qxaokplxlp) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#qxaokplxlp) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#qxaokplxlp) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#qxaokplxlp) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#qxaokplxlp) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#qxaokplxlp) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#qxaokplxlp) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#qxaokplxlp) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#qxaokplxlp) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#qxaokplxlp) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#qxaokplxlp) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#qxaokplxlp) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#qxaokplxlp) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#qxaokplxlp) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#qxaokplxlp) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#qxaokplxlp) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#qxaokplxlp) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#qxaokplxlp) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#qxaokplxlp) .gt_left {
  text-align: left;
}

:where(#qxaokplxlp) .gt_center {
  text-align: center;
}

:where(#qxaokplxlp) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#qxaokplxlp) .gt_font_normal {
  font-weight: normal;
}

:where(#qxaokplxlp) .gt_font_bold {
  font-weight: bold;
}

:where(#qxaokplxlp) .gt_font_italic {
  font-style: italic;
}

:where(#qxaokplxlp) .gt_super {
  font-size: 65%;
}

:where(#qxaokplxlp) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#qxaokplxlp) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#qxaokplxlp) .gt_indent_1 {
  text-indent: 5px;
}

:where(#qxaokplxlp) .gt_indent_2 {
  text-indent: 10px;
}

:where(#qxaokplxlp) .gt_indent_3 {
  text-indent: 15px;
}

:where(#qxaokplxlp) .gt_indent_4 {
  text-indent: 20px;
}

:where(#qxaokplxlp) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">pincome_cat</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">1970</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">1980</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">1990</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">2000</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">2010</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">2020</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">High Income</td>
<td class="gt_row gt_right">169</td>
<td class="gt_row gt_right">149</td>
<td class="gt_row gt_right">127</td>
<td class="gt_row gt_right">113</td>
<td class="gt_row gt_right">106</td>
<td class="gt_row gt_right">82</td></tr>
    <tr><td class="gt_row gt_left">Low Income</td>
<td class="gt_row gt_right">376</td>
<td class="gt_row gt_right">389</td>
<td class="gt_row gt_right">398</td>
<td class="gt_row gt_right">528</td>
<td class="gt_row gt_right">529</td>
<td class="gt_row gt_right">566</td></tr>
    <tr><td class="gt_row gt_left">Middle Income</td>
<td class="gt_row gt_right">1192</td>
<td class="gt_row gt_right">922</td>
<td class="gt_row gt_right">829</td>
<td class="gt_row gt_right">636</td>
<td class="gt_row gt_right">597</td>
<td class="gt_row gt_right">558</td></tr>
    <tr><td class="gt_row gt_left">Very High Income</td>
<td class="gt_row gt_right">192</td>
<td class="gt_row gt_right">222</td>
<td class="gt_row gt_right">234</td>
<td class="gt_row gt_right">249</td>
<td class="gt_row gt_right">263</td>
<td class="gt_row gt_right">281</td></tr>
    <tr><td class="gt_row gt_left">Very Low Income</td>
<td class="gt_row gt_right">208</td>
<td class="gt_row gt_right">470</td>
<td class="gt_row gt_right">564</td>
<td class="gt_row gt_right">626</td>
<td class="gt_row gt_right">625</td>
<td class="gt_row gt_right">630</td></tr>
    <tr><td class="gt_row gt_left">NA</td>
<td class="gt_row gt_right">30</td>
<td class="gt_row gt_right">15</td>
<td class="gt_row gt_right">15</td>
<td class="gt_row gt_right">15</td>
<td class="gt_row gt_right">47</td>
<td class="gt_row gt_right">50</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>We used <code>pivot_wider()</code> here to make each year into a column and specify that values were coming from the count of census tracts (it will assume that any remaining columns are our identity columns, in this case, the income category).</p>
<p>Can you see anything immediately from this table? If you look at middle income tracts, we see a decline in the number. We see more tracts transitioning to the extremes - very high income or very low income.</p>
<p>This is already getting interesting. This also corresponds with one of the main findings highlighted by the Voorhees Center:</p>
<blockquote class="blockquote">
<p>As illustrated by our research, between the nearly fifty-year time period, poverty and wealth has substantially increased while middle-income earning populations have largely declined.</p>
</blockquote>
<p>Before we move forward, we can take care of one more technical thing and remove the raw data we worked with using <code>rm()</code>.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(F_1970, F_1980, F_1990, F_2000, F_2010, F_2020, S_1970, S_1980, S_1990, S_2000, S_2010, S_2020, inc_70, inc_80, inc_90, inc_00, inc_10, inc_20, pop_70, pop_80, pop_90, pop_00, pop_10, pop_20, income, pop)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="completing-our-time-series" class="level1">
<h1>Completing Our Time Series</h1>
<p>We currently have data from 1970, 1980, 1990, 2000, 2010 (2012 ACS), and 2020 (2019 ACS). Let’s also create indicators comparable to what is in the Who Can Live in Chicago? Report: Race, Age, Disability, Housing, and Employment.</p>
<ul>
<li><strong>Race:</strong> Race and Ethnicity (Percent White, Black, Asian, Other, Latinx)</li>
<li><strong>Age:</strong> Age structure</li>
<li><strong>Disability:</strong> Population with a disability</li>
<li><strong>Housing:</strong> Housing tenure (own vs.&nbsp;rent), Housing cost burden (% households paying &gt; 30% income towards rent)</li>
<li><strong>Employment:</strong> Unemployment, Labor Force Participation, Occupation</li>
</ul>
<table class="table">
<thead>
<tr class="header">
<th>Census Table</th>
<th>Description</th>
<th>Indicators to Construct</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="https://data.census.gov/cedsci/table?q=ethnicity&amp;y=2019&amp;d=ACS%205-Year%20Estimates%20Detailed%20Tables&amp;tid=ACSDT5Y2019.B03002">B03002</a></td>
<td>Race and Ethnicity</td>
<td>% White, % Black, % Asian, % Other, % Latinx (all races)</td>
</tr>
<tr class="even">
<td><a href="https://data.census.gov/cedsci/table?q=B01001&amp;y=2019&amp;d=ACS%205-Year%20Estimates%20Detailed%20Tables&amp;tid=ACSDT5Y2019.B01001">B01001</a></td>
<td>Age Structure</td>
<td>Age 0-19, Age 20-34, Age 35-64, Age 65 up</td>
</tr>
<tr class="odd">
<td><a href="https://data.census.gov/cedsci/table?q=age&amp;y=2019&amp;d=ACS%205-Year%20Estimates%20Detailed%20Tables&amp;tid=ACSDT5Y2019.B01001https://data.census.gov/cedsci/table?q=age&amp;y=2019&amp;d=ACS%205-Year%20Estimates%20Detailed%20Tables&amp;tid=ACSDT5Y2019.B01001">B18101</a></td>
<td>Disability Status</td>
<td>% Disabled</td>
</tr>
<tr class="even">
<td><a href="https://data.census.gov/cedsci/table?q=Owner%2FRenter%20%28Tenure%29&amp;y=2019&amp;d=ACS%205-Year%20Estimates%20Detailed%20Tables&amp;tid=ACSDT5Y2019.B25003&amp;hidePreview=false">B25003</a></td>
<td>Housing Tenure</td>
<td>% Renter, % Owner</td>
</tr>
<tr class="odd">
<td><a href="https://data.census.gov/cedsci/table?q=housing%20cost&amp;y=2019&amp;d=ACS%205-Year%20Estimates%20Detailed%20Tables&amp;tid=ACSDT5Y2019.B25106&amp;hidePreview=false">B25106</a></td>
<td>Housing Cost Burden</td>
<td>% Housing Cost Burdened (owners and renters)</td>
</tr>
<tr class="even">
<td><a href="https://data.census.gov/cedsci/table?q=labor%20force&amp;y=2019&amp;d=ACS%205-Year%20Estimates%20Detailed%20Tables&amp;tid=ACSDT5Y2019.B23025&amp;hidePreview=false">B23025</a></td>
<td>Unemployment</td>
<td>% Unemployed</td>
</tr>
<tr class="odd">
<td><a href="https://data.census.gov/cedsci/table?q=labor%20force&amp;y=2019&amp;d=ACS%205-Year%20Estimates%20Detailed%20Tables&amp;tid=ACSDT5Y2019.B23025&amp;hidePreview=false">B23025</a></td>
<td>Labor Force Participation</td>
<td>% In the Labor Force</td>
</tr>
<tr class="even">
<td><a href="https://data.census.gov/cedsci/table?q=employment%20by%20industry&amp;y=2019&amp;d=ACS%205-Year%20Estimates%20Detailed%20Tables&amp;tid=ACSDT5Y2019.C24050&amp;hidePreview=false">C24050</a></td>
<td>Employment by Industry</td>
<td></td>
</tr>
</tbody>
</table>
<section id="race-and-ethnicity" class="level3">
<h3 class="anchored" data-anchor-id="race-and-ethnicity">Race and Ethnicity</h3>
<p>While you’re at it, be sure to download population data so you can calculate weighted regional averages.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>acs_race<span class="ot">&lt;-</span><span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">"tract"</span>, <span class="at">state =</span> <span class="st">"NY"</span>, <span class="at">variables =</span> <span class="fu">c</span>(<span class="st">"B03002_001"</span>, <span class="st">"B03002_003"</span>, <span class="st">"B03002_004"</span>, <span class="st">"B03002_006"</span>, <span class="st">"B03002_012"</span>), <span class="at">year =</span> <span class="dv">2019</span>, <span class="at">survey =</span> <span class="st">"acs5"</span>, <span class="at">output =</span> <span class="st">"wide"</span>)  <span class="sc">|&gt;</span> </span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_White =</span> B03002_003E<span class="sc">/</span>B03002_001E,</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_Black =</span> B03002_004E<span class="sc">/</span>B03002_001E,</span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_Asian =</span> B03002_006E<span class="sc">/</span>B03002_001E,</span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_Latinx =</span> B03002_012E<span class="sc">/</span>B03002_001E,</span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_Other =</span> (B03002_001E <span class="sc">-</span> B03002_003E <span class="sc">-</span> B03002_004E <span class="sc">-</span> B03002_006E <span class="sc">-</span> B03002_012E)<span class="sc">/</span>B03002_001E</span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> <span class="fu">select</span>(GEOID, <span class="at">POP19 =</span> B03002_001E, P_White, P_Black, P_Asian, P_Latinx, P_Other)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="age-structure" class="level3">
<h3 class="anchored" data-anchor-id="age-structure">Age Structure</h3>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>acs_age<span class="ot">&lt;-</span><span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">"tract"</span>, <span class="at">state =</span> <span class="st">"NY"</span>, <span class="at">table =</span> <span class="fu">c</span>(<span class="st">"B01001"</span>), <span class="at">year =</span> <span class="dv">2019</span>, <span class="at">survey =</span> <span class="st">"acs5"</span>, <span class="at">output =</span> <span class="st">"wide"</span>) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Age_00_19 =</span> B01001_003E<span class="sc">+</span>B01001_004E<span class="sc">+</span>B01001_005E<span class="sc">+</span>B01001_006E<span class="sc">+</span>B01001_007E <span class="sc">+</span> B01001_027E<span class="sc">+</span>B01001_028E<span class="sc">+</span>B01001_029E<span class="sc">+</span>B01001_030E<span class="sc">+</span>B01001_031E,</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Age_20_34 =</span> B01001_008E<span class="sc">+</span>B01001_009E<span class="sc">+</span>B01001_010E<span class="sc">+</span>B01001_011E<span class="sc">+</span>B01001_012E<span class="sc">+</span>B01001_032E <span class="sc">+</span>B01001_033E <span class="sc">+</span> B01001_034E <span class="sc">+</span> B01001_035E<span class="sc">+</span> B01001_036E,</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Age_35_64 =</span> B01001_013E <span class="sc">+</span>B01001_014E <span class="sc">+</span> B01001_015E <span class="sc">+</span> B01001_016E <span class="sc">+</span> B01001_017E <span class="sc">+</span> B01001_018E <span class="sc">+</span> B01001_019E <span class="sc">+</span> B01001_037E <span class="sc">+</span> B01001_038E <span class="sc">+</span> B01001_039E <span class="sc">+</span> B01001_040E<span class="sc">+</span>B01001_041E<span class="sc">+</span>B01001_042E<span class="sc">+</span>B01001_043E,</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Age_65up =</span> B01001_020E <span class="sc">+</span> B01001_021E <span class="sc">+</span> B01001_022E <span class="sc">+</span> B01001_023E <span class="sc">+</span> B01001_024E <span class="sc">+</span>B01001_025E <span class="sc">+</span> B01001_044E <span class="sc">+</span> B01001_045E <span class="sc">+</span> B01001_046E <span class="sc">+</span> B01001_047E <span class="sc">+</span> B01001_048E <span class="sc">+</span>B01001_049E</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> <span class="fu">select</span>(GEOID, Age_00_19, Age_20_34, Age_35_64, Age_65up)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="disability-status" class="level3">
<h3 class="anchored" data-anchor-id="disability-status">Disability Status</h3>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>acs_disability<span class="ot">&lt;-</span><span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">"tract"</span>, <span class="at">state =</span> <span class="st">"NY"</span>, <span class="at">table =</span> <span class="fu">c</span>(<span class="st">"B18101"</span>), <span class="at">year =</span> <span class="dv">2019</span>, <span class="at">survey =</span> <span class="st">"acs5"</span>, <span class="at">output =</span> <span class="st">"wide"</span>)  <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_Disabled =</span> (B18101_004E <span class="sc">+</span> B18101_007E <span class="sc">+</span> B18101_010E<span class="sc">+</span>B18101_013E<span class="sc">+</span>B18101_016E<span class="sc">+</span>B18101_019E<span class="sc">+</span>B18101_023E<span class="sc">+</span>B18101_026E<span class="sc">+</span>B18101_029E<span class="sc">+</span>B18101_032E<span class="sc">+</span>B18101_035E<span class="sc">+</span>B18101_038E)<span class="sc">/</span>B18101_001E</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> <span class="fu">select</span>(GEOID, P_Disabled)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="housing-tenure" class="level3">
<h3 class="anchored" data-anchor-id="housing-tenure">Housing Tenure</h3>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>acs_tenure<span class="ot">&lt;-</span><span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">"tract"</span>, <span class="at">state =</span> <span class="st">"NY"</span>, <span class="at">table =</span> <span class="fu">c</span>(<span class="st">"B25003"</span>), <span class="at">year =</span> <span class="dv">2019</span>, <span class="at">survey =</span> <span class="st">"acs5"</span>, <span class="at">output =</span> <span class="st">"wide"</span>)  <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_Own =</span>B25003_002E<span class="sc">/</span>B25003_001E,</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_Rent =</span> B25003_003E<span class="sc">/</span>B25003_001E) <span class="sc">|&gt;</span> <span class="fu">select</span>(GEOID, P_Own, P_Rent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="housing-cost-burden" class="level3">
<h3 class="anchored" data-anchor-id="housing-cost-burden">Housing Cost Burden</h3>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>acs_cost<span class="ot">&lt;-</span><span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">"tract"</span>, <span class="at">state =</span> <span class="st">"NY"</span>, <span class="at">table =</span> <span class="fu">c</span>(<span class="st">"B25106"</span>), <span class="at">year =</span> <span class="dv">2019</span>, <span class="at">survey =</span> <span class="st">"acs5"</span>, <span class="at">output =</span> <span class="st">"wide"</span>)  <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_CostBurden =</span> (B25106_006E <span class="sc">+</span> B25106_010E <span class="sc">+</span>B25106_014E <span class="sc">+</span> B25106_018E <span class="sc">+</span> B25106_022E <span class="sc">+</span> B25106_028E <span class="sc">+</span> B25106_032E <span class="sc">+</span> B25106_036E <span class="sc">+</span> B25106_040E<span class="sc">+</span>B25106_044E)<span class="sc">/</span>B25106_001E</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> <span class="fu">select</span>(GEOID, P_CostBurden)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="labor-force-participation-unemployment" class="level3">
<h3 class="anchored" data-anchor-id="labor-force-participation-unemployment">Labor Force Participation / Unemployment</h3>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>acs_labor<span class="ot">&lt;-</span><span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">"tract"</span>, <span class="at">state =</span> <span class="st">"NY"</span>, <span class="at">table =</span> <span class="fu">c</span>(<span class="st">"B23025"</span>), <span class="at">year =</span> <span class="dv">2019</span>, <span class="at">survey =</span> <span class="st">"acs5"</span>, <span class="at">output =</span> <span class="st">"wide"</span>)  <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_Unemp =</span> B23025_005E<span class="sc">/</span>B23025_002E,</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_LabForce =</span> B23025_002E<span class="sc">/</span>B23025_001E</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> <span class="fu">select</span>(GEOID, P_Unemp, P_LabForce)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="employment-by-industry" class="level3">
<h3 class="anchored" data-anchor-id="employment-by-industry">Employment by Industry</h3>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>acs_employment<span class="ot">&lt;-</span><span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">"tract"</span>, <span class="at">state =</span> <span class="st">"NY"</span>, <span class="at">table =</span> <span class="fu">c</span>(<span class="st">"C24050"</span>), <span class="at">year =</span> <span class="dv">2019</span>, <span class="at">survey =</span> <span class="st">"acs5"</span>, <span class="at">output =</span> <span class="st">"wide"</span>)  <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">P_Emp_Ag =</span> C24050_002E<span class="sc">/</span>C24050_001E,</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Const =</span> C24050_003E<span class="sc">/</span>C24050_001E,</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Manuf =</span> C24050_004E<span class="sc">/</span>C24050_001E,</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Wholesale =</span> C24050_005E<span class="sc">/</span>C24050_001E,</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Retail =</span> C24050_006E<span class="sc">/</span>C24050_001E,</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Transportation =</span> C24050_007E <span class="sc">/</span> C24050_001E,</span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Information =</span> C24050_008E <span class="sc">/</span> C24050_001E,</span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_FIRE =</span> C24050_009E <span class="sc">/</span> C24050_001E,</span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Management =</span> C24050_010E <span class="sc">/</span> C24050_001E,</span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Education =</span> C24050_011E <span class="sc">/</span> C24050_001E,</span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Arts =</span> C24050_012E <span class="sc">/</span> C24050_001E,</span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Other =</span> C24050_013E <span class="sc">/</span> C24050_001E,</span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_PA =</span> C24050_014E <span class="sc">/</span> C24050_001E</span>
<span id="cb81-14"><a href="#cb81-14" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> <span class="fu">select</span>(GEOID, P_Emp_Ag, P_Emp_Const, P_Emp_Manuf, P_Emp_Wholesale, P_Emp_Retail, P_Emp_Transportation, P_Emp_FIRE, P_Emp_Management, P_Emp_Education,P_Emp_Arts, P_Emp_Other, P_Emp_PA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="join-acs-data" class="level3">
<h3 class="anchored" data-anchor-id="join-acs-data">Join ACS Data</h3>
<p>Now that we’ve downloaded your 2019 5-year ACS data, let’s join the downloaded tables together. We will ultimately join this to our other income data.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>acs_19<span class="ot">&lt;-</span><span class="fu">left_join</span>(acs_age, acs_cost, <span class="at">by=</span><span class="st">"GEOID"</span>)</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>acs_19<span class="ot">&lt;-</span><span class="fu">left_join</span>(acs_19, acs_disability, <span class="at">by=</span><span class="st">"GEOID"</span>)</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>acs_19<span class="ot">&lt;-</span><span class="fu">left_join</span>(acs_19, acs_employment, <span class="at">by=</span><span class="st">"GEOID"</span>)</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>acs_19<span class="ot">&lt;-</span><span class="fu">left_join</span>(acs_19, acs_labor, <span class="at">by=</span><span class="st">"GEOID"</span>)</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>acs_19<span class="ot">&lt;-</span><span class="fu">left_join</span>(acs_19, acs_race, <span class="at">by=</span><span class="st">"GEOID"</span>)</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>acs_19<span class="ot">&lt;-</span><span class="fu">left_join</span>(acs_19, acs_tenure, <span class="at">by=</span><span class="st">"GEOID"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(acs_age, acs_cost, acs_disability, acs_employment, acs_labor, acs_race, acs_tenure)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="moving-forward-with-our-three-cities-analysis" class="level2">
<h2 class="anchored" data-anchor-id="moving-forward-with-our-three-cities-analysis">Moving Forward with our Three Cities Analysis</h2>
<section id="join-acs-data-to-our-income-data" class="level3">
<h3 class="anchored" data-anchor-id="join-acs-data-to-our-income-data">Join ACS Data to our Income Data</h3>
<p>Let’s next join our “new” ACS data to our prior income data. Let’s join to our chi_income (as opposed to chi_income_long data):</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="ot">&lt;-</span> <span class="fu">left_join</span>(nyc_income, acs_19, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"TRTID10"</span> <span class="ot">=</span> <span class="st">"GEOID"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="re-create-income-categories-in-wide-format-data" class="level3">
<h3 class="anchored" data-anchor-id="re-create-income-categories-in-wide-format-data">Re-Create Income Categories in Wide-Format data</h3>
<p>Previously, we created income category labels in our long-format version of the nyc_income data. This time, let’s do the same thing in the wide format data.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>nyc_income<span class="ot">&lt;-</span>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">pincome_70 =</span> <span class="fu">case_when</span>(</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_70, <span class="sc">-</span><span class="dv">100</span>, <span class="sc">-</span>.<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"Very Low Income"</span>,</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_70, <span class="sc">-</span>.<span class="dv">4</span>, <span class="sc">-</span>.<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Low Income"</span>,</span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_70, <span class="sc">-</span>.<span class="dv">2</span>, .<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Middle Income"</span>,</span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_70, .<span class="dv">2</span>, .<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"High Income"</span>,</span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_70, .<span class="dv">4</span>, <span class="dv">100</span>) <span class="sc">~</span> <span class="st">"Very High Income"</span></span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">pincome_80 =</span> <span class="fu">case_when</span>(</span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_80, <span class="sc">-</span><span class="dv">100</span>, <span class="sc">-</span>.<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"Very Low Income"</span>,</span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_80, <span class="sc">-</span>.<span class="dv">4</span>, <span class="sc">-</span>.<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Low Income"</span>,</span>
<span id="cb85-13"><a href="#cb85-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_80, <span class="sc">-</span>.<span class="dv">2</span>, .<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Middle Income"</span>,</span>
<span id="cb85-14"><a href="#cb85-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_80, .<span class="dv">2</span>, .<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"High Income"</span>,</span>
<span id="cb85-15"><a href="#cb85-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_80, .<span class="dv">4</span>, <span class="dv">100</span>) <span class="sc">~</span> <span class="st">"Very High Income"</span></span>
<span id="cb85-16"><a href="#cb85-16" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb85-17"><a href="#cb85-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">pincome_90 =</span> <span class="fu">case_when</span>(</span>
<span id="cb85-18"><a href="#cb85-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_90, <span class="sc">-</span><span class="dv">100</span>, <span class="sc">-</span>.<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"Very Low Income"</span>,</span>
<span id="cb85-19"><a href="#cb85-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_90, <span class="sc">-</span>.<span class="dv">4</span>, <span class="sc">-</span>.<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Low Income"</span>,</span>
<span id="cb85-20"><a href="#cb85-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_90, <span class="sc">-</span>.<span class="dv">2</span>, .<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Middle Income"</span>,</span>
<span id="cb85-21"><a href="#cb85-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_90, .<span class="dv">2</span>, .<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"High Income"</span>,</span>
<span id="cb85-22"><a href="#cb85-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_90, .<span class="dv">4</span>, <span class="dv">100</span>) <span class="sc">~</span> <span class="st">"Very High Income"</span></span>
<span id="cb85-23"><a href="#cb85-23" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb85-24"><a href="#cb85-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">pincome_00 =</span> <span class="fu">case_when</span>(</span>
<span id="cb85-25"><a href="#cb85-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_00, <span class="sc">-</span><span class="dv">100</span>, <span class="sc">-</span>.<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"Very Low Income"</span>,</span>
<span id="cb85-26"><a href="#cb85-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_00, <span class="sc">-</span>.<span class="dv">4</span>, <span class="sc">-</span>.<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Low Income"</span>,</span>
<span id="cb85-27"><a href="#cb85-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_00, <span class="sc">-</span>.<span class="dv">2</span>, .<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Middle Income"</span>,</span>
<span id="cb85-28"><a href="#cb85-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_00, .<span class="dv">2</span>, .<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"High Income"</span>,</span>
<span id="cb85-29"><a href="#cb85-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_00, .<span class="dv">4</span>, <span class="dv">100</span>) <span class="sc">~</span> <span class="st">"Very High Income"</span></span>
<span id="cb85-30"><a href="#cb85-30" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb85-31"><a href="#cb85-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">pincome_10 =</span> <span class="fu">case_when</span>(</span>
<span id="cb85-32"><a href="#cb85-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_10, <span class="sc">-</span><span class="dv">100</span>, <span class="sc">-</span>.<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"Very Low Income"</span>,</span>
<span id="cb85-33"><a href="#cb85-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_10, <span class="sc">-</span>.<span class="dv">4</span>, <span class="sc">-</span>.<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Low Income"</span>,</span>
<span id="cb85-34"><a href="#cb85-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_10, <span class="sc">-</span>.<span class="dv">2</span>, .<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Middle Income"</span>,</span>
<span id="cb85-35"><a href="#cb85-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_10, .<span class="dv">2</span>, .<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"High Income"</span>,</span>
<span id="cb85-36"><a href="#cb85-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_10, .<span class="dv">4</span>, <span class="dv">100</span>) <span class="sc">~</span> <span class="st">"Very High Income"</span></span>
<span id="cb85-37"><a href="#cb85-37" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb85-38"><a href="#cb85-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">pincome_20 =</span> <span class="fu">case_when</span>(</span>
<span id="cb85-39"><a href="#cb85-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_20, <span class="sc">-</span><span class="dv">100</span>, <span class="sc">-</span>.<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"Very Low Income"</span>,</span>
<span id="cb85-40"><a href="#cb85-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_20, <span class="sc">-</span>.<span class="dv">4</span>, <span class="sc">-</span>.<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Low Income"</span>,</span>
<span id="cb85-41"><a href="#cb85-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_20, <span class="sc">-</span>.<span class="dv">2</span>, .<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Middle Income"</span>,</span>
<span id="cb85-42"><a href="#cb85-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_20, .<span class="dv">2</span>, .<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"High Income"</span>,</span>
<span id="cb85-43"><a href="#cb85-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_20, .<span class="dv">4</span>, <span class="dv">100</span>) <span class="sc">~</span> <span class="st">"Very High Income"</span></span>
<span id="cb85-44"><a href="#cb85-44" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb85-45"><a href="#cb85-45" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="calculate-three-cities-categories" class="level3">
<h3 class="anchored" data-anchor-id="calculate-three-cities-categories">Calculate Three Cities Categories</h3>
<p>If you look on the “Three Cities” tab on the Voorhees website, you’ll note that they separate tracts based upon the change in income between 1970 and the most recent time period (they use 2016 but we’ll use 2019). Let’s go ahead and calculate that change as well as the categorization of each census tract:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>nyc_income<span class="ot">&lt;-</span>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pchange_70.19 =</span> (INCPC19 <span class="sc">-</span> INCPC70)<span class="sc">/</span>INCPC70)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>And once we calculate this, we can assign each tract to which “City” it belongs to based upon the change in income between 1970 and 2019:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>nyc_income<span class="ot">&lt;-</span>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">change_cat_70.19 =</span> <span class="fu">case_when</span>(</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pchange_70<span class="fl">.19</span>, .<span class="dv">2</span>, <span class="dv">100</span>) <span class="sc">~</span> <span class="st">"City 1 - Growing"</span>,</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pchange_70<span class="fl">.19</span>, <span class="sc">-</span>.<span class="dv">2</span>, .<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"City 2 - Middle"</span>,</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pchange_70<span class="fl">.19</span>,  <span class="sc">-</span><span class="dv">100</span>, <span class="sc">-</span>.<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"City 3 - Shrinking"</span>,</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(pchange_70<span class="fl">.19</span>) <span class="sc">==</span> <span class="st">"TRUE"</span> <span class="sc">~</span> <span class="st">"Uncategorized"</span>,</span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>    pchange_70<span class="fl">.19</span> <span class="sc">==</span> <span class="cn">Inf</span> <span class="sc">~</span> <span class="st">"Uncategorized"</span>)</span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We have a small proportion of tracts which are ultimately not characterized because they are missing data for either 1970 or 2020. We can label these as uncategorized so that we can compare them and understand how they may be different from tracts whoch area assigned to a change type.</p>
<p>With this done, we can now develop some descriptives to help us understand differences between our three cities.</p>
</section>
</section>
<section id="describing-out-three-cities" class="level2">
<h2 class="anchored" data-anchor-id="describing-out-three-cities">Describing Out Three Cities</h2>
<p>Following the descriptions provided on the Voorhees Center’s <a href="https://voorheescenter.uic.edu/chicago_communities/">three cities study site</a>, let’s systematically describe New York’s neighborhoods based upon change in income.</p>
<section id="how-many-tracts-how-many-people" class="level3">
<h3 class="anchored" data-anchor-id="how-many-tracts-how-many-people">How Many Tracts? How Many People?</h3>
<p>Looking at the first tab in the Voorhees report, we need to describe how many tracts and how many people fall within each city.</p>
<p><img src="08_neighborhood_change/images/03_NVC_Three_Cities.png" class="img-fluid"> Start by counting how many tracts there are in each city and how many people lived in each city in 2019. Use <code>group_by()</code> and <code>summarise()</code> to accomplish this.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(change_cat_70<span class="fl">.19</span>) <span class="sc">|&gt;</span> </span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Tracts =</span> <span class="fu">n</span>(), <span class="at">Population =</span> <span class="fu">sum</span>(POP19, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="dv">3</span>, <span class="at">decimals =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="otbteeafzr" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#otbteeafzr) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#otbteeafzr) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#otbteeafzr) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#otbteeafzr) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#otbteeafzr) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#otbteeafzr) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#otbteeafzr) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#otbteeafzr) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#otbteeafzr) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#otbteeafzr) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#otbteeafzr) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#otbteeafzr) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#otbteeafzr) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#otbteeafzr) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#otbteeafzr) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#otbteeafzr) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#otbteeafzr) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#otbteeafzr) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#otbteeafzr) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#otbteeafzr) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#otbteeafzr) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#otbteeafzr) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#otbteeafzr) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#otbteeafzr) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#otbteeafzr) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#otbteeafzr) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#otbteeafzr) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#otbteeafzr) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#otbteeafzr) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#otbteeafzr) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#otbteeafzr) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#otbteeafzr) .gt_left {
  text-align: left;
}

:where(#otbteeafzr) .gt_center {
  text-align: center;
}

:where(#otbteeafzr) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#otbteeafzr) .gt_font_normal {
  font-weight: normal;
}

:where(#otbteeafzr) .gt_font_bold {
  font-weight: bold;
}

:where(#otbteeafzr) .gt_font_italic {
  font-style: italic;
}

:where(#otbteeafzr) .gt_super {
  font-size: 65%;
}

:where(#otbteeafzr) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#otbteeafzr) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#otbteeafzr) .gt_indent_1 {
  text-indent: 5px;
}

:where(#otbteeafzr) .gt_indent_2 {
  text-indent: 10px;
}

:where(#otbteeafzr) .gt_indent_3 {
  text-indent: 15px;
}

:where(#otbteeafzr) .gt_indent_4 {
  text-indent: 20px;
}

:where(#otbteeafzr) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">change_cat_70.19</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Tracts</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Population</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">City 1 - Growing</td>
<td class="gt_row gt_right">678</td>
<td class="gt_row gt_right">2,824,154</td></tr>
    <tr><td class="gt_row gt_left">City 2 - Middle</td>
<td class="gt_row gt_right">971</td>
<td class="gt_row gt_right">3,543,062</td></tr>
    <tr><td class="gt_row gt_left">City 3 - Shrinking</td>
<td class="gt_row gt_right">453</td>
<td class="gt_row gt_right">2,009,535</td></tr>
    <tr><td class="gt_row gt_left">Uncategorized</td>
<td class="gt_row gt_right">65</td>
<td class="gt_row gt_right">42,565</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>We can see the split in 2019 population between growing, middle and shrinking places. We have 65 tracts which are unclassified with a population of around 42,565.</p>
</section>
<section id="race" class="level3">
<h3 class="anchored" data-anchor-id="race">Race</h3>
<p>The next pane in the Voorhees analysis summarizes each city based upon it’s racial composition:</p>
<p><img src="08_neighborhood_change/images/05_Race.png" class="img-fluid"></p>
<p>Let’s develop a table that does the same:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(change_cat_70<span class="fl">.19</span>) <span class="sc">|&gt;</span> </span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="at">Tracts =</span> <span class="fu">n</span>(), </span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="at">PWhite =</span> <span class="fu">mean</span>(P_White, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a><span class="at">PBlack =</span> <span class="fu">mean</span>(P_Black, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a><span class="at">PAsian =</span> <span class="fu">mean</span>(P_Asian, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a><span class="at">PLatinx =</span> <span class="fu">mean</span>(P_Latinx, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a><span class="at">POther =</span> <span class="fu">mean</span>(P_Other, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>, <span class="at">decimals =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="nipcyapxij" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#nipcyapxij) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#nipcyapxij) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#nipcyapxij) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#nipcyapxij) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#nipcyapxij) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#nipcyapxij) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#nipcyapxij) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#nipcyapxij) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#nipcyapxij) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#nipcyapxij) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#nipcyapxij) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#nipcyapxij) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#nipcyapxij) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#nipcyapxij) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#nipcyapxij) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#nipcyapxij) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#nipcyapxij) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#nipcyapxij) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#nipcyapxij) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#nipcyapxij) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#nipcyapxij) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#nipcyapxij) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#nipcyapxij) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#nipcyapxij) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#nipcyapxij) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#nipcyapxij) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#nipcyapxij) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#nipcyapxij) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#nipcyapxij) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#nipcyapxij) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#nipcyapxij) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#nipcyapxij) .gt_left {
  text-align: left;
}

:where(#nipcyapxij) .gt_center {
  text-align: center;
}

:where(#nipcyapxij) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#nipcyapxij) .gt_font_normal {
  font-weight: normal;
}

:where(#nipcyapxij) .gt_font_bold {
  font-weight: bold;
}

:where(#nipcyapxij) .gt_font_italic {
  font-style: italic;
}

:where(#nipcyapxij) .gt_super {
  font-size: 65%;
}

:where(#nipcyapxij) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#nipcyapxij) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#nipcyapxij) .gt_indent_1 {
  text-indent: 5px;
}

:where(#nipcyapxij) .gt_indent_2 {
  text-indent: 10px;
}

:where(#nipcyapxij) .gt_indent_3 {
  text-indent: 15px;
}

:where(#nipcyapxij) .gt_indent_4 {
  text-indent: 20px;
}

:where(#nipcyapxij) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">change_cat_70.19</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Tracts</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">PWhite</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">PBlack</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">PAsian</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">PLatinx</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">POther</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">City 1 - Growing</td>
<td class="gt_row gt_right">678</td>
<td class="gt_row gt_right">49.3%</td>
<td class="gt_row gt_right">17.4%</td>
<td class="gt_row gt_right">10.7%</td>
<td class="gt_row gt_right">19.5%</td>
<td class="gt_row gt_right">3.1%</td></tr>
    <tr><td class="gt_row gt_left">City 2 - Middle</td>
<td class="gt_row gt_right">971</td>
<td class="gt_row gt_right">27.9%</td>
<td class="gt_row gt_right">28.0%</td>
<td class="gt_row gt_right">15.1%</td>
<td class="gt_row gt_right">25.5%</td>
<td class="gt_row gt_right">3.5%</td></tr>
    <tr><td class="gt_row gt_left">City 3 - Shrinking</td>
<td class="gt_row gt_right">453</td>
<td class="gt_row gt_right">16.1%</td>
<td class="gt_row gt_right">20.6%</td>
<td class="gt_row gt_right">18.4%</td>
<td class="gt_row gt_right">42.0%</td>
<td class="gt_row gt_right">2.8%</td></tr>
    <tr><td class="gt_row gt_left">Uncategorized</td>
<td class="gt_row gt_right">65</td>
<td class="gt_row gt_right">30.9%</td>
<td class="gt_row gt_right">38.2%</td>
<td class="gt_row gt_right">4.2%</td>
<td class="gt_row gt_right">25.9%</td>
<td class="gt_row gt_right">0.8%</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>We might also want to revisit our based LTDB data so that we can describe change in racial composition for each city over time.</p>
</section>
<section id="age" class="level3">
<h3 class="anchored" data-anchor-id="age">Age</h3>
<p>We will next summarize each of the three cities by their age composition. Consider calculating percentages in addition to reporting the population counts.</p>
<p><img src="08_neighborhood_change/images/06_Age.png" class="img-fluid"></p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(change_cat_70<span class="fl">.19</span>) <span class="sc">|&gt;</span> </span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a><span class="at">Tracts =</span> <span class="fu">n</span>(), </span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a><span class="at">PopTot =</span> <span class="fu">sum</span>(POP19, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a><span class="at">Age_00_19 =</span> <span class="fu">sum</span>(Age_00_19, <span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">/</span><span class="fu">sum</span>(POP19, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a><span class="at">Age_20_34 =</span> <span class="fu">sum</span>(Age_20_34, <span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">/</span><span class="fu">sum</span>(POP19, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a><span class="at">Age_35_64 =</span> <span class="fu">sum</span>(Age_35_64, <span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">/</span><span class="fu">sum</span>(POP19, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a><span class="at">Age_65up =</span> <span class="fu">sum</span>(Age_65up, <span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">/</span><span class="fu">sum</span>(POP19, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">7</span>, <span class="at">decimals =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="yvzrtllgun" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#yvzrtllgun) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#yvzrtllgun) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#yvzrtllgun) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#yvzrtllgun) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#yvzrtllgun) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#yvzrtllgun) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#yvzrtllgun) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#yvzrtllgun) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#yvzrtllgun) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#yvzrtllgun) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#yvzrtllgun) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#yvzrtllgun) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#yvzrtllgun) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#yvzrtllgun) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#yvzrtllgun) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#yvzrtllgun) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#yvzrtllgun) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#yvzrtllgun) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#yvzrtllgun) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#yvzrtllgun) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#yvzrtllgun) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#yvzrtllgun) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#yvzrtllgun) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#yvzrtllgun) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#yvzrtllgun) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#yvzrtllgun) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#yvzrtllgun) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#yvzrtllgun) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#yvzrtllgun) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#yvzrtllgun) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#yvzrtllgun) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#yvzrtllgun) .gt_left {
  text-align: left;
}

:where(#yvzrtllgun) .gt_center {
  text-align: center;
}

:where(#yvzrtllgun) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#yvzrtllgun) .gt_font_normal {
  font-weight: normal;
}

:where(#yvzrtllgun) .gt_font_bold {
  font-weight: bold;
}

:where(#yvzrtllgun) .gt_font_italic {
  font-style: italic;
}

:where(#yvzrtllgun) .gt_super {
  font-size: 65%;
}

:where(#yvzrtllgun) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#yvzrtllgun) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#yvzrtllgun) .gt_indent_1 {
  text-indent: 5px;
}

:where(#yvzrtllgun) .gt_indent_2 {
  text-indent: 10px;
}

:where(#yvzrtllgun) .gt_indent_3 {
  text-indent: 15px;
}

:where(#yvzrtllgun) .gt_indent_4 {
  text-indent: 20px;
}

:where(#yvzrtllgun) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">change_cat_70.19</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Tracts</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">PopTot</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Age_00_19</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Age_20_34</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Age_35_64</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Age_65up</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">City 1 - Growing</td>
<td class="gt_row gt_right">678</td>
<td class="gt_row gt_right">2,824,154</td>
<td class="gt_row gt_right">17.8%</td>
<td class="gt_row gt_right">28.4%</td>
<td class="gt_row gt_right">38.7%</td>
<td class="gt_row gt_right">15.0%</td></tr>
    <tr><td class="gt_row gt_left">City 2 - Middle</td>
<td class="gt_row gt_right">971</td>
<td class="gt_row gt_right">3,543,062</td>
<td class="gt_row gt_right">23.7%</td>
<td class="gt_row gt_right">21.8%</td>
<td class="gt_row gt_right">39.0%</td>
<td class="gt_row gt_right">15.5%</td></tr>
    <tr><td class="gt_row gt_left">City 3 - Shrinking</td>
<td class="gt_row gt_right">453</td>
<td class="gt_row gt_right">2,009,535</td>
<td class="gt_row gt_right">28.9%</td>
<td class="gt_row gt_right">23.2%</td>
<td class="gt_row gt_right">35.8%</td>
<td class="gt_row gt_right">12.1%</td></tr>
    <tr><td class="gt_row gt_left">Uncategorized</td>
<td class="gt_row gt_right">65</td>
<td class="gt_row gt_right">42,565</td>
<td class="gt_row gt_right">18.8%</td>
<td class="gt_row gt_right">33.2%</td>
<td class="gt_row gt_right">34.1%</td>
<td class="gt_row gt_right">14.0%</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
</section>
<section id="disability" class="level3">
<h3 class="anchored" data-anchor-id="disability">Disability</h3>
<p>Next up, we’ll examine disability, primarily be calculating the average share of each city that is disabled.</p>
<p><img src="08_neighborhood_change/images/07_Disability.png" class="img-fluid"></p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(change_cat_70<span class="fl">.19</span>) <span class="sc">|&gt;</span> </span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="at">Tracts =</span> <span class="fu">n</span>(), </span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a><span class="at">P_Disabled =</span> <span class="fu">mean</span>(P_Disabled, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(<span class="dv">3</span>, <span class="at">decimals =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="ucwiddhsrs" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#ucwiddhsrs) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#ucwiddhsrs) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#ucwiddhsrs) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#ucwiddhsrs) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#ucwiddhsrs) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ucwiddhsrs) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#ucwiddhsrs) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#ucwiddhsrs) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#ucwiddhsrs) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#ucwiddhsrs) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#ucwiddhsrs) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#ucwiddhsrs) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#ucwiddhsrs) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#ucwiddhsrs) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#ucwiddhsrs) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#ucwiddhsrs) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#ucwiddhsrs) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ucwiddhsrs) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#ucwiddhsrs) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#ucwiddhsrs) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ucwiddhsrs) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#ucwiddhsrs) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#ucwiddhsrs) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ucwiddhsrs) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ucwiddhsrs) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#ucwiddhsrs) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#ucwiddhsrs) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ucwiddhsrs) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#ucwiddhsrs) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ucwiddhsrs) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#ucwiddhsrs) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ucwiddhsrs) .gt_left {
  text-align: left;
}

:where(#ucwiddhsrs) .gt_center {
  text-align: center;
}

:where(#ucwiddhsrs) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#ucwiddhsrs) .gt_font_normal {
  font-weight: normal;
}

:where(#ucwiddhsrs) .gt_font_bold {
  font-weight: bold;
}

:where(#ucwiddhsrs) .gt_font_italic {
  font-style: italic;
}

:where(#ucwiddhsrs) .gt_super {
  font-size: 65%;
}

:where(#ucwiddhsrs) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#ucwiddhsrs) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#ucwiddhsrs) .gt_indent_1 {
  text-indent: 5px;
}

:where(#ucwiddhsrs) .gt_indent_2 {
  text-indent: 10px;
}

:where(#ucwiddhsrs) .gt_indent_3 {
  text-indent: 15px;
}

:where(#ucwiddhsrs) .gt_indent_4 {
  text-indent: 20px;
}

:where(#ucwiddhsrs) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">change_cat_70.19</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Tracts</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">P_Disabled</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">City 1 - Growing</td>
<td class="gt_row gt_right">678</td>
<td class="gt_row gt_right">9.7%</td></tr>
    <tr><td class="gt_row gt_left">City 2 - Middle</td>
<td class="gt_row gt_right">971</td>
<td class="gt_row gt_right">10.8%</td></tr>
    <tr><td class="gt_row gt_left">City 3 - Shrinking</td>
<td class="gt_row gt_right">453</td>
<td class="gt_row gt_right">12.0%</td></tr>
    <tr><td class="gt_row gt_left">Uncategorized</td>
<td class="gt_row gt_right">65</td>
<td class="gt_row gt_right">17.4%</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
</section>
<section id="housing" class="level3">
<h3 class="anchored" data-anchor-id="housing">Housing</h3>
<p>Next up, we’ll look at housing tenure (the balance between owners and renters), as well as cost burden (the share of households paying more than 30 percent of their income towards housing costs.</p>
<p><img src="08_neighborhood_change/images/08_Housing.png" class="img-fluid"></p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(change_cat_70<span class="fl">.19</span>) <span class="sc">|&gt;</span> </span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a><span class="at">Tracts =</span> <span class="fu">n</span>(), </span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a><span class="at">P_Own =</span> <span class="fu">mean</span>(P_Own, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a><span class="at">P_Rent =</span> <span class="fu">mean</span>(P_Rent, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a><span class="at">P_CostBurden =</span> <span class="fu">mean</span>(P_CostBurden, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">decimals =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="mwwyazomrv" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#mwwyazomrv) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#mwwyazomrv) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#mwwyazomrv) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#mwwyazomrv) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#mwwyazomrv) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#mwwyazomrv) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#mwwyazomrv) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#mwwyazomrv) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#mwwyazomrv) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#mwwyazomrv) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#mwwyazomrv) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#mwwyazomrv) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#mwwyazomrv) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#mwwyazomrv) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#mwwyazomrv) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#mwwyazomrv) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#mwwyazomrv) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#mwwyazomrv) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#mwwyazomrv) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#mwwyazomrv) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#mwwyazomrv) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#mwwyazomrv) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#mwwyazomrv) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#mwwyazomrv) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#mwwyazomrv) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#mwwyazomrv) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#mwwyazomrv) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#mwwyazomrv) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#mwwyazomrv) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#mwwyazomrv) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#mwwyazomrv) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#mwwyazomrv) .gt_left {
  text-align: left;
}

:where(#mwwyazomrv) .gt_center {
  text-align: center;
}

:where(#mwwyazomrv) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#mwwyazomrv) .gt_font_normal {
  font-weight: normal;
}

:where(#mwwyazomrv) .gt_font_bold {
  font-weight: bold;
}

:where(#mwwyazomrv) .gt_font_italic {
  font-style: italic;
}

:where(#mwwyazomrv) .gt_super {
  font-size: 65%;
}

:where(#mwwyazomrv) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#mwwyazomrv) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#mwwyazomrv) .gt_indent_1 {
  text-indent: 5px;
}

:where(#mwwyazomrv) .gt_indent_2 {
  text-indent: 10px;
}

:where(#mwwyazomrv) .gt_indent_3 {
  text-indent: 15px;
}

:where(#mwwyazomrv) .gt_indent_4 {
  text-indent: 20px;
}

:where(#mwwyazomrv) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">change_cat_70.19</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Tracts</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">P_Own</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">P_Rent</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">P_CostBurden</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">City 1 - Growing</td>
<td class="gt_row gt_right">678</td>
<td class="gt_row gt_right">36.1%</td>
<td class="gt_row gt_right">63.9%</td>
<td class="gt_row gt_right">39.2%</td></tr>
    <tr><td class="gt_row gt_left">City 2 - Middle</td>
<td class="gt_row gt_right">971</td>
<td class="gt_row gt_right">45.4%</td>
<td class="gt_row gt_right">54.6%</td>
<td class="gt_row gt_right">46.6%</td></tr>
    <tr><td class="gt_row gt_left">City 3 - Shrinking</td>
<td class="gt_row gt_right">453</td>
<td class="gt_row gt_right">22.7%</td>
<td class="gt_row gt_right">77.3%</td>
<td class="gt_row gt_right">55.6%</td></tr>
    <tr><td class="gt_row gt_left">Uncategorized</td>
<td class="gt_row gt_right">65</td>
<td class="gt_row gt_right">37.5%</td>
<td class="gt_row gt_right">62.5%</td>
<td class="gt_row gt_right">51.2%</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
</section>
<section id="employment" class="level3">
<h3 class="anchored" data-anchor-id="employment">Employment</h3>
<p>Let’s finally calculate labor force participation and unemployment by city.</p>
<p><img src="08_neighborhood_change/images/09_Labor.png" class="img-fluid"></p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(change_cat_70<span class="fl">.19</span>) <span class="sc">|&gt;</span> </span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="at">Tracts =</span> <span class="fu">n</span>(), </span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a><span class="at">P_Unemp =</span> <span class="fu">mean</span>(P_Unemp, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a><span class="at">P_LabForce =</span> <span class="fu">mean</span>(P_LabForce, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">decimals =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="yqfacwqlas" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#yqfacwqlas) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#yqfacwqlas) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#yqfacwqlas) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#yqfacwqlas) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#yqfacwqlas) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#yqfacwqlas) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#yqfacwqlas) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#yqfacwqlas) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#yqfacwqlas) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#yqfacwqlas) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#yqfacwqlas) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#yqfacwqlas) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#yqfacwqlas) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#yqfacwqlas) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#yqfacwqlas) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#yqfacwqlas) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#yqfacwqlas) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#yqfacwqlas) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#yqfacwqlas) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#yqfacwqlas) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#yqfacwqlas) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#yqfacwqlas) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#yqfacwqlas) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#yqfacwqlas) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#yqfacwqlas) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#yqfacwqlas) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#yqfacwqlas) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#yqfacwqlas) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#yqfacwqlas) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#yqfacwqlas) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#yqfacwqlas) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#yqfacwqlas) .gt_left {
  text-align: left;
}

:where(#yqfacwqlas) .gt_center {
  text-align: center;
}

:where(#yqfacwqlas) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#yqfacwqlas) .gt_font_normal {
  font-weight: normal;
}

:where(#yqfacwqlas) .gt_font_bold {
  font-weight: bold;
}

:where(#yqfacwqlas) .gt_font_italic {
  font-style: italic;
}

:where(#yqfacwqlas) .gt_super {
  font-size: 65%;
}

:where(#yqfacwqlas) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#yqfacwqlas) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#yqfacwqlas) .gt_indent_1 {
  text-indent: 5px;
}

:where(#yqfacwqlas) .gt_indent_2 {
  text-indent: 10px;
}

:where(#yqfacwqlas) .gt_indent_3 {
  text-indent: 15px;
}

:where(#yqfacwqlas) .gt_indent_4 {
  text-indent: 20px;
}

:where(#yqfacwqlas) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">change_cat_70.19</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Tracts</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">P_Unemp</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">P_LabForce</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">City 1 - Growing</td>
<td class="gt_row gt_right">678</td>
<td class="gt_row gt_right">5.0%</td>
<td class="gt_row gt_right">68.2%</td></tr>
    <tr><td class="gt_row gt_left">City 2 - Middle</td>
<td class="gt_row gt_right">971</td>
<td class="gt_row gt_right">6.5%</td>
<td class="gt_row gt_right">61.8%</td></tr>
    <tr><td class="gt_row gt_left">City 3 - Shrinking</td>
<td class="gt_row gt_right">453</td>
<td class="gt_row gt_right">8.5%</td>
<td class="gt_row gt_right">59.0%</td></tr>
    <tr><td class="gt_row gt_left">Uncategorized</td>
<td class="gt_row gt_right">65</td>
<td class="gt_row gt_right">13.0%</td>
<td class="gt_row gt_right">58.6%</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>Also calculate average employment by industry for the three cities.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(change_cat_70<span class="fl">.19</span>) <span class="sc">|&gt;</span> </span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a><span class="at">Tracts =</span> <span class="fu">n</span>(), </span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Ag =</span> <span class="fu">mean</span>(P_Emp_Ag, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Const =</span> <span class="fu">mean</span>(P_Emp_Const, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Manuf =</span> <span class="fu">mean</span>(P_Emp_Manuf, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Wholesale =</span> <span class="fu">mean</span>(P_Emp_Wholesale, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Retail =</span> <span class="fu">mean</span>(P_Emp_Retail, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Transportation =</span> <span class="fu">mean</span>(P_Emp_Transportation, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_FIRE =</span> <span class="fu">mean</span>(P_Emp_FIRE, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Management =</span> <span class="fu">mean</span>(P_Emp_Management, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb94-13"><a href="#cb94-13" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Education =</span> <span class="fu">mean</span>(P_Emp_Education, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb94-14"><a href="#cb94-14" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Arts =</span> <span class="fu">mean</span>(P_Emp_Arts, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb94-15"><a href="#cb94-15" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Other =</span> <span class="fu">mean</span>(P_Emp_Other, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb94-16"><a href="#cb94-16" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_PA =</span> <span class="fu">mean</span>(P_Emp_PA, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb94-17"><a href="#cb94-17" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb94-18"><a href="#cb94-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb94-19"><a href="#cb94-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">14</span>, <span class="at">decimals =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="ikeqwndsdq" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#ikeqwndsdq) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#ikeqwndsdq) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#ikeqwndsdq) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#ikeqwndsdq) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#ikeqwndsdq) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ikeqwndsdq) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#ikeqwndsdq) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#ikeqwndsdq) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#ikeqwndsdq) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#ikeqwndsdq) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#ikeqwndsdq) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#ikeqwndsdq) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#ikeqwndsdq) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#ikeqwndsdq) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#ikeqwndsdq) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#ikeqwndsdq) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#ikeqwndsdq) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ikeqwndsdq) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#ikeqwndsdq) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#ikeqwndsdq) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ikeqwndsdq) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#ikeqwndsdq) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#ikeqwndsdq) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ikeqwndsdq) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ikeqwndsdq) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#ikeqwndsdq) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#ikeqwndsdq) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#ikeqwndsdq) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#ikeqwndsdq) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ikeqwndsdq) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#ikeqwndsdq) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#ikeqwndsdq) .gt_left {
  text-align: left;
}

:where(#ikeqwndsdq) .gt_center {
  text-align: center;
}

:where(#ikeqwndsdq) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#ikeqwndsdq) .gt_font_normal {
  font-weight: normal;
}

:where(#ikeqwndsdq) .gt_font_bold {
  font-weight: bold;
}

:where(#ikeqwndsdq) .gt_font_italic {
  font-style: italic;
}

:where(#ikeqwndsdq) .gt_super {
  font-size: 65%;
}

:where(#ikeqwndsdq) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#ikeqwndsdq) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#ikeqwndsdq) .gt_indent_1 {
  text-indent: 5px;
}

:where(#ikeqwndsdq) .gt_indent_2 {
  text-indent: 10px;
}

:where(#ikeqwndsdq) .gt_indent_3 {
  text-indent: 15px;
}

:where(#ikeqwndsdq) .gt_indent_4 {
  text-indent: 20px;
}

:where(#ikeqwndsdq) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">change_cat_70.19</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Tracts</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">P_Emp_Ag</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">P_Emp_Const</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">P_Emp_Manuf</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">P_Emp_Wholesale</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">P_Emp_Retail</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">P_Emp_Transportation</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">P_Emp_FIRE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">P_Emp_Management</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">P_Emp_Education</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">P_Emp_Arts</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">P_Emp_Other</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">P_Emp_PA</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">City 1 - Growing</td>
<td class="gt_row gt_right">678</td>
<td class="gt_row gt_right">0.1%</td>
<td class="gt_row gt_right">3.8%</td>
<td class="gt_row gt_right">3.0%</td>
<td class="gt_row gt_right">2.0%</td>
<td class="gt_row gt_right">7.8%</td>
<td class="gt_row gt_right">4.6%</td>
<td class="gt_row gt_right">11.8%</td>
<td class="gt_row gt_right">18.0%</td>
<td class="gt_row gt_right">24.4%</td>
<td class="gt_row gt_right">9.9%</td>
<td class="gt_row gt_right">4.5%</td>
<td class="gt_row gt_right">4.1%</td></tr>
    <tr><td class="gt_row gt_left">City 2 - Middle</td>
<td class="gt_row gt_right">971</td>
<td class="gt_row gt_right">0.1%</td>
<td class="gt_row gt_right">6.3%</td>
<td class="gt_row gt_right">3.2%</td>
<td class="gt_row gt_right">2.3%</td>
<td class="gt_row gt_right">9.6%</td>
<td class="gt_row gt_right">8.5%</td>
<td class="gt_row gt_right">7.4%</td>
<td class="gt_row gt_right">10.5%</td>
<td class="gt_row gt_right">30.2%</td>
<td class="gt_row gt_right">9.6%</td>
<td class="gt_row gt_right">5.4%</td>
<td class="gt_row gt_right">4.5%</td></tr>
    <tr><td class="gt_row gt_left">City 3 - Shrinking</td>
<td class="gt_row gt_right">453</td>
<td class="gt_row gt_right">0.2%</td>
<td class="gt_row gt_right">6.4%</td>
<td class="gt_row gt_right">3.6%</td>
<td class="gt_row gt_right">2.2%</td>
<td class="gt_row gt_right">11.2%</td>
<td class="gt_row gt_right">8.4%</td>
<td class="gt_row gt_right">6.2%</td>
<td class="gt_row gt_right">9.2%</td>
<td class="gt_row gt_right">28.5%</td>
<td class="gt_row gt_right">13.0%</td>
<td class="gt_row gt_right">6.6%</td>
<td class="gt_row gt_right">3.0%</td></tr>
    <tr><td class="gt_row gt_left">Uncategorized</td>
<td class="gt_row gt_right">65</td>
<td class="gt_row gt_right">0.0%</td>
<td class="gt_row gt_right">2.4%</td>
<td class="gt_row gt_right">6.3%</td>
<td class="gt_row gt_right">0.8%</td>
<td class="gt_row gt_right">7.1%</td>
<td class="gt_row gt_right">3.1%</td>
<td class="gt_row gt_right">11.7%</td>
<td class="gt_row gt_right">19.7%</td>
<td class="gt_row gt_right">26.5%</td>
<td class="gt_row gt_right">7.5%</td>
<td class="gt_row gt_right">7.6%</td>
<td class="gt_row gt_right">4.1%</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
</section>
</section>
<section id="describing-our-three-cities" class="level2">
<h2 class="anchored" data-anchor-id="describing-our-three-cities">Describing our Three Cities</h2>
</section>
</section>
<section id="lab-summary" class="level1">
<h1>Lab Summary</h1>
<p>In this lab, you started working with harmonized census data in order to describe trajectories of neighborhood change. You spent lots of time cleaning your data and preparing it for further analysis. You joined to the historical census data current ACS data, and then compared the current demographic attributes of those places based upon their historical trajectories of income change.</p>
<p>In this lab, you’ve had the opportunitiy to work (more) independently, relying upon your past skills and R skillset. The focus in this lab has been on data cleaning and manipulation.</p>
<p>Your next steps might be to spend more time visualizing and analyzing the resulting data. Based upon what we’ve done here, here are some thoughts on some ways to extend this lab.</p>
<ul>
<li>Join the “long” income data to census geographies and visualize the time series.</li>
<li>Map out census tracts based upon their belonging to the three cities, both the entire region, and for each county.</li>
<li>Use the five income labels to describe trajectories of change for each census tract. Consider categorizing census tracts based upon their long run trajectories.</li>
<li>Examine the demographics of census tracts in each decade (we could have pulled that from the LTDB sample data). How have demographic attributes changed of places in each income category?</li>
</ul>
<section id="lab-evaluation" class="level2">
<h2 class="anchored" data-anchor-id="lab-evaluation">Lab Evaluation</h2>
<p>In evaluating your lab submission, we’ll be paying attention to the following:</p>
<ul>
<li><p>Proper import, cleaning, and formatting of LTDB data, paying particular attention to building reproducible data pipelines that you could use for any geographic location.</p></li>
<li><p>Thoughtful reflection on data process and outputs.</p></li>
</ul>
<p>As you get into the lab, please feel welcome to ask us questions, and please share where you’re struggling with us and with others in the class.</p>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb95" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Neighborhood Change"</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="an">sidebar:</span><span class="co"> false</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a><span class="an">toc-depth:</span><span class="co"> 4</span></span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a><span class="an">page-layout:</span><span class="co"> full</span></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a><span class="an">bibliography:</span><span class="co"> ../references.bib</span></span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a><span class="an">csl:</span><span class="co"> ../apa-6th-edition.csl</span></span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb95-11"><a href="#cb95-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: show</span></span>
<span id="cb95-12"><a href="#cb95-12" aria-hidden="true" tabindex="-1"></a><span class="co">    code-overflow: wrap</span></span>
<span id="cb95-13"><a href="#cb95-13" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools:</span></span>
<span id="cb95-14"><a href="#cb95-14" aria-hidden="true" tabindex="-1"></a><span class="co">      source: true</span></span>
<span id="cb95-15"><a href="#cb95-15" aria-hidden="true" tabindex="-1"></a><span class="co">      toggle: false</span></span>
<span id="cb95-16"><a href="#cb95-16" aria-hidden="true" tabindex="-1"></a><span class="co">      caption: none</span></span>
<span id="cb95-17"><a href="#cb95-17" aria-hidden="true" tabindex="-1"></a><span class="an">fig-responsive:</span><span class="co"> true</span></span>
<span id="cb95-18"><a href="#cb95-18" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb95-19"><a href="#cb95-19" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb95-20"><a href="#cb95-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-23"><a href="#cb95-23" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-24"><a href="#cb95-24" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb95-25"><a href="#cb95-25" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb95-26"><a href="#cb95-26" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidycensus)</span>
<span id="cb95-27"><a href="#cb95-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb95-28"><a href="#cb95-28" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-29"><a href="#cb95-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-30"><a href="#cb95-30" aria-hidden="true" tabindex="-1"></a><span class="fu">## Introduction</span></span>
<span id="cb95-31"><a href="#cb95-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-32"><a href="#cb95-32" aria-hidden="true" tabindex="-1"></a>In this lab, we'll explore in detail the <span class="co">[</span><span class="ot">Nathalie P. Voorhees Center's</span><span class="co">](https://voorheescenter.uic.edu)</span> methodology for measuring neighborhood change. The center has produced multiple analyses and strategies for measuring such change, focused on the Chicago metropolitan area.</span>
<span id="cb95-33"><a href="#cb95-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-34"><a href="#cb95-34" aria-hidden="true" tabindex="-1"></a>By the end of this lab, you will replicate elements of the Voorhees Center's *Who Can Live in Chicago?* report including maps and other visualizations of neighborhood change. We will develop a code base that could be applied to any location in the United States.</span>
<span id="cb95-35"><a href="#cb95-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-36"><a href="#cb95-36" aria-hidden="true" tabindex="-1"></a><span class="fu">## Goals</span></span>
<span id="cb95-37"><a href="#cb95-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-38"><a href="#cb95-38" aria-hidden="true" tabindex="-1"></a>In this lab, we will use a combination of decennial census data and American Community Survey data to examine patterns of neighborhood income change. We will overlay on these patterns of income change information about the demographics of who lives in these neighborhoods. Our goals for this lab are as follows:</span>
<span id="cb95-39"><a href="#cb95-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-40"><a href="#cb95-40" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Continue to work with common sources of sociodemographic information, including those that have been pre-processed by sources other than the Census Bureau.</span>
<span id="cb95-41"><a href="#cb95-41" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Think critically about data processing pipelines and data requirements.</span>
<span id="cb95-42"><a href="#cb95-42" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Explore strategies for spatial longitudinal data description and analysis.</span>
<span id="cb95-43"><a href="#cb95-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-44"><a href="#cb95-44" aria-hidden="true" tabindex="-1"></a>Taking a close look at the visuals from the <span class="co">[</span><span class="ot">Voorhees Center website</span><span class="co">](https://voorheescenter.uic.edu/chicago_communities/)</span>, they calculate for each census tract in each year the average per capita income for the time periods 1970, 1980, 1990, 2000, 2010, and 2017 for each census tract and then compare it to the regional weighted average income.</span>
<span id="cb95-45"><a href="#cb95-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-46"><a href="#cb95-46" aria-hidden="true" tabindex="-1"></a><span class="al">![](08_neighborhood_change/images/02_NVC_Combined-Decades.png)</span></span>
<span id="cb95-47"><a href="#cb95-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-48"><a href="#cb95-48" aria-hidden="true" tabindex="-1"></a>They classify tracts based upon whether they are:</span>
<span id="cb95-49"><a href="#cb95-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-50"><a href="#cb95-50" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Very High Income:** Greater than 40% above the regional average</span>
<span id="cb95-51"><a href="#cb95-51" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**High Income:** 20% - 40% above the reg ional average</span>
<span id="cb95-52"><a href="#cb95-52" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Middle Income:** 20% below to 20% above the regional average</span>
<span id="cb95-53"><a href="#cb95-53" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Low Income:** 20% below to 40% below the regional average</span>
<span id="cb95-54"><a href="#cb95-54" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Very Low Income:** Greater than 40% below the regional average</span>
<span id="cb95-55"><a href="#cb95-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-56"><a href="#cb95-56" aria-hidden="true" tabindex="-1"></a>After classifying tracts, the study examines change over time, and then examines recent demographic characteristics based upon this change.</span>
<span id="cb95-57"><a href="#cb95-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-58"><a href="#cb95-58" aria-hidden="true" tabindex="-1"></a><span class="al">![](08_neighborhood_change/images/03_NVC_Three_Cities.png)</span> This gives us a sense of what we need to do to prepare our data.</span>
<span id="cb95-59"><a href="#cb95-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-60"><a href="#cb95-60" aria-hidden="true" tabindex="-1"></a><span class="fu">## Github Lab Repository</span></span>
<span id="cb95-61"><a href="#cb95-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-62"><a href="#cb95-62" aria-hidden="true" tabindex="-1"></a>If you have not already done so, follow <span class="co">[</span><span class="ot">this link</span><span class="co">](https://classroom.github.com/a/QZUuklCL)</span> to accept the lab Github Classroom assignment repository.</span>
<span id="cb95-63"><a href="#cb95-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-64"><a href="#cb95-64" aria-hidden="true" tabindex="-1"></a><span class="fu">## Introduction to LTDB Data</span></span>
<span id="cb95-65"><a href="#cb95-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-66"><a href="#cb95-66" aria-hidden="true" tabindex="-1"></a>At this point, you have spent time working with census data and common census geographies. We have used the tidycensus package to download census data from the Census Bureau's servers using API calls.</span>
<span id="cb95-67"><a href="#cb95-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-68"><a href="#cb95-68" aria-hidden="true" tabindex="-1"></a>In this lab, we are going to look at another source of historical census data - the Longitudinal Tract Database. Census tracts are a common geography used by planners and other analysts because tracts roughly approximate neighborhoods, especially in highly urbanized areas where population density means that tracts are relatively small. One challenge faced by analysts looking to examine neighborhood level characteristics over time is that the geographic definitions for census tracts change every 10 years following the decennial census. These changes are performed as part of the Census' <span class="co">[</span><span class="ot">Participant Statistical Areas Program (PSAP)</span><span class="co">](https://www.census.gov/programs-surveys/decennial-census/about/psap.html)</span>.</span>
<span id="cb95-69"><a href="#cb95-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-70"><a href="#cb95-70" aria-hidden="true" tabindex="-1"></a>While some tracts may stay the same, some may be *split* in cases where the population increases, and others may be *merged* in cases where the population decreases. See this <span class="co">[</span><span class="ot">quick reference guide</span><span class="co">](https://www2.census.gov/geo/pdfs/partnerships/psap/G-650.pdf)</span> for more information on thresholds for redefinition:</span>
<span id="cb95-71"><a href="#cb95-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-72"><a href="#cb95-72" aria-hidden="true" tabindex="-1"></a><span class="al">![](08_neighborhood_change/images/04_2020PSAP.png)</span></span>
<span id="cb95-73"><a href="#cb95-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-74"><a href="#cb95-74" aria-hidden="true" tabindex="-1"></a>The Census Bureau produces <span class="co">[</span><span class="ot">geographic relationship files</span><span class="co">](https://www.census.gov/geographies/reference-files/time-series/geo/relationship-files.2020.html)</span> which can help show the relationships between geographies over time.</span>
<span id="cb95-75"><a href="#cb95-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-78"><a href="#cb95-78" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-79"><a href="#cb95-79" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb95-80"><a href="#cb95-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-81"><a href="#cb95-81" aria-hidden="true" tabindex="-1"></a><span class="fu">read_delim</span>(<span class="st">"https://www2.census.gov/geo/docs/maps-data/data/rel2020/tract/tab20_tract20_tract10_natl.txt"</span>, <span class="at">delim =</span> <span class="st">"|"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">OID_TRACT_20 =</span> <span class="fu">col_character</span>(),</span>
<span id="cb95-82"><a href="#cb95-82" aria-hidden="true" tabindex="-1"></a>     <span class="at">OID_TRACT_10 =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb95-83"><a href="#cb95-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID_TRACT_10, GEOID_TRACT_20, NAMELSAD_TRACT_10, NAMELSAD_TRACT_20, AREALAND_TRACT_10, AREALAND_TRACT_20) <span class="sc">|&gt;</span> </span>
<span id="cb95-84"><a href="#cb95-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span> </span>
<span id="cb95-85"><a href="#cb95-85" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb95-86"><a href="#cb95-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">decimals =</span> <span class="dv">0</span>)</span>
<span id="cb95-87"><a href="#cb95-87" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-88"><a href="#cb95-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-89"><a href="#cb95-89" aria-hidden="true" tabindex="-1"></a>Note from these example records shifts in tract definitions and areas. These relationship files can help you identify which census tracts have changed, however, creating consistent estimates over time from this information is challenging. Researchers tend to use strategies that either attribute characteristics using either *area* or *share of population* to weight how portions of one tract might translate into a new boundary in a different year.</span>
<span id="cb95-90"><a href="#cb95-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-91"><a href="#cb95-91" aria-hidden="true" tabindex="-1"></a>Brown University's <span class="co">[</span><span class="ot">Spatial Structures in the Social Sciences</span><span class="co">](https://s4.ad.brown.edu/projects/diversity/index.htm)</span> group has produced a <span class="co">[</span><span class="ot">Longitudinal Tract Database</span><span class="co">](https://s4.ad.brown.edu/projects/diversity/researcher/LTDB.htm)</span> which provides demographic estimates for prior decennial census years 1970, 1980, 1990, and 2000 adjusted to 2010 boundaries. The files also include selected demographic indicators that are comparable across each of these decennial census enumerations (the questions are asked in the same or similar enough way to be able to reliably compare these qualities over time).</span>
<span id="cb95-92"><a href="#cb95-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-93"><a href="#cb95-93" aria-hidden="true" tabindex="-1"></a>LTDB data come from two sources:</span>
<span id="cb95-94"><a href="#cb95-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-95"><a href="#cb95-95" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Decennial "short form" census data from the 100 percent count of the population. This includes race and ethnicity, age, household composition, and household tenure information.</span>
<span id="cb95-96"><a href="#cb95-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-97"><a href="#cb95-97" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Decennial "long form" census data administered to a sample of 1 in 6 households. These surveys contain far more detailed information on the characteristics of the population.</span>
<span id="cb95-98"><a href="#cb95-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-99"><a href="#cb95-99" aria-hidden="true" tabindex="-1"></a>Decennial data continues to be collected, but the 1 in 6 count sample data has now been replaced by the American Community Survey which annually samples the population creating valuable intercensal estimates used by analysts today.</span>
<span id="cb95-100"><a href="#cb95-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-101"><a href="#cb95-101" aria-hidden="true" tabindex="-1"></a>You can find more information about the LTDB in the following <span class="co">[</span><span class="ot">technical documentation</span><span class="co">](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4134912/pdf/nihms-522336.pdf)</span>.</span>
<span id="cb95-102"><a href="#cb95-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-103"><a href="#cb95-103" aria-hidden="true" tabindex="-1"></a>In order to examine income and demographic change for census tracts, we're going to use LTDB data, and ultimately will supplement what's in these data with additional ACS data. We do this so that we can compare estimates over time using the same census tract geographies.</span>
<span id="cb95-104"><a href="#cb95-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-105"><a href="#cb95-105" aria-hidden="true" tabindex="-1"></a><span class="fu">## Setup</span></span>
<span id="cb95-106"><a href="#cb95-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-107"><a href="#cb95-107" aria-hidden="true" tabindex="-1"></a>Let's get set up by loading a few packages:</span>
<span id="cb95-108"><a href="#cb95-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-111"><a href="#cb95-111" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-112"><a href="#cb95-112" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb95-113"><a href="#cb95-113" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb95-114"><a href="#cb95-114" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb95-115"><a href="#cb95-115" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-116"><a href="#cb95-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-117"><a href="#cb95-117" aria-hidden="true" tabindex="-1"></a><span class="fu">### LTDB Data Download</span></span>
<span id="cb95-118"><a href="#cb95-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-119"><a href="#cb95-119" aria-hidden="true" tabindex="-1"></a>Let's start by downloading LTDB data for analysis.</span>
<span id="cb95-120"><a href="#cb95-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-121"><a href="#cb95-121" aria-hidden="true" tabindex="-1"></a>Go to the <span class="co">[</span><span class="ot">data download</span><span class="co">](https://s4.ad.brown.edu/projects/diversity/researcher/LTBDDload/Default.aspx)</span> page. You will need to enter your email address and certify that you will follow terms of use for the data.</span>
<span id="cb95-122"><a href="#cb95-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-123"><a href="#cb95-123" aria-hidden="true" tabindex="-1"></a>Make note of what datasets are aggregated in the LTDB Standard Datasets. <span class="al">![](08_neighborhood_change/images/01_ltdb.png)</span></span>
<span id="cb95-124"><a href="#cb95-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-125"><a href="#cb95-125" aria-hidden="true" tabindex="-1"></a>Download both the *full* and *sample* standard data set files for all years. Also download the codebook.</span>
<span id="cb95-126"><a href="#cb95-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-127"><a href="#cb95-127" aria-hidden="true" tabindex="-1"></a>Decompress the downloaded folder containing the data files and place the raw data csv files in your raw data folder. You should have 12 files - six "fullcount" files and six "sample" files (you can ignore those files in the fullcount download with "Global Neighborhood" in their file name).</span>
<span id="cb95-128"><a href="#cb95-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-129"><a href="#cb95-129" aria-hidden="true" tabindex="-1"></a>Place the codebook in your data documentation folder.</span>
<span id="cb95-130"><a href="#cb95-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-131"><a href="#cb95-131" aria-hidden="true" tabindex="-1"></a>Now that we have data and documentation manually downloaded, we can import the data for analysis.</span>
<span id="cb95-132"><a href="#cb95-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-133"><a href="#cb95-133" aria-hidden="true" tabindex="-1"></a><span class="fu">### Data Import</span></span>
<span id="cb95-134"><a href="#cb95-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-137"><a href="#cb95-137" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-138"><a href="#cb95-138" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb95-139"><a href="#cb95-139" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb95-140"><a href="#cb95-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-141"><a href="#cb95-141" aria-hidden="true" tabindex="-1"></a>F_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_1970_fullcount.csv"</span>)</span>
<span id="cb95-142"><a href="#cb95-142" aria-hidden="true" tabindex="-1"></a>S_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/ltdb_std_1970_sample.csv"</span>)</span>
<span id="cb95-143"><a href="#cb95-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-144"><a href="#cb95-144" aria-hidden="true" tabindex="-1"></a>F_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_1980_fullcount.csv"</span>)</span>
<span id="cb95-145"><a href="#cb95-145" aria-hidden="true" tabindex="-1"></a>S_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/ltdb_std_1980_sample.csv"</span>)</span>
<span id="cb95-146"><a href="#cb95-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-147"><a href="#cb95-147" aria-hidden="true" tabindex="-1"></a>F_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_1990_fullcount.csv"</span>)</span>
<span id="cb95-148"><a href="#cb95-148" aria-hidden="true" tabindex="-1"></a>S_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/ltdb_std_1990_sample.csv"</span>)</span>
<span id="cb95-149"><a href="#cb95-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-150"><a href="#cb95-150" aria-hidden="true" tabindex="-1"></a>F_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_2000_fullcount.csv"</span>)</span>
<span id="cb95-151"><a href="#cb95-151" aria-hidden="true" tabindex="-1"></a>S_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/ltdb_std_2000_sample.csv"</span>)</span>
<span id="cb95-152"><a href="#cb95-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-153"><a href="#cb95-153" aria-hidden="true" tabindex="-1"></a>F_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_2010_fullcount.csv"</span>)</span>
<span id="cb95-154"><a href="#cb95-154" aria-hidden="true" tabindex="-1"></a>S_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_std_200812_Sample.csv"</span>)</span>
<span id="cb95-155"><a href="#cb95-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-156"><a href="#cb95-156" aria-hidden="true" tabindex="-1"></a>F_2020<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_2020_fullcount.csv"</span>)</span>
<span id="cb95-157"><a href="#cb95-157" aria-hidden="true" tabindex="-1"></a>S_2020<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_std_201519_Sample.csv"</span>)</span>
<span id="cb95-158"><a href="#cb95-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-159"><a href="#cb95-159" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-160"><a href="#cb95-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-161"><a href="#cb95-161" aria-hidden="true" tabindex="-1"></a>Let's import our data. These are csv files - in the past we've used <span class="in">`read_csv()`</span> from the readr package to do this (readr is part of the tidyverse so you don't need to load it separately).</span>
<span id="cb95-162"><a href="#cb95-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-163"><a href="#cb95-163" aria-hidden="true" tabindex="-1"></a>For clarity, use the prefix "F<span class="sc">\_</span>" for full count data and "S<span class="sc">\_</span>" for sample data when you read the LTDB into table objects in R. Go ahead and import the ten data files:</span>
<span id="cb95-164"><a href="#cb95-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-167"><a href="#cb95-167" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-168"><a href="#cb95-168" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb95-169"><a href="#cb95-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-170"><a href="#cb95-170" aria-hidden="true" tabindex="-1"></a>F_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_1970_fullcount.csv"</span>)</span>
<span id="cb95-171"><a href="#cb95-171" aria-hidden="true" tabindex="-1"></a>S_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_1970_sample.csv"</span>)</span>
<span id="cb95-172"><a href="#cb95-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-173"><a href="#cb95-173" aria-hidden="true" tabindex="-1"></a>F_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_1980_fullcount.csv"</span>)</span>
<span id="cb95-174"><a href="#cb95-174" aria-hidden="true" tabindex="-1"></a>S_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_1980_sample.csv"</span>)</span>
<span id="cb95-175"><a href="#cb95-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-176"><a href="#cb95-176" aria-hidden="true" tabindex="-1"></a>F_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_1990_fullcount.csv"</span>)</span>
<span id="cb95-177"><a href="#cb95-177" aria-hidden="true" tabindex="-1"></a>S_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_1990_sample.csv"</span>)</span>
<span id="cb95-178"><a href="#cb95-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-179"><a href="#cb95-179" aria-hidden="true" tabindex="-1"></a>F_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_2000_fullcount.csv"</span>)</span>
<span id="cb95-180"><a href="#cb95-180" aria-hidden="true" tabindex="-1"></a>S_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_2000_sample.csv"</span>)</span>
<span id="cb95-181"><a href="#cb95-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-182"><a href="#cb95-182" aria-hidden="true" tabindex="-1"></a>F_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_2010_fullcount.csv"</span>)</span>
<span id="cb95-183"><a href="#cb95-183" aria-hidden="true" tabindex="-1"></a>S_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_std_200812_Sample.csv"</span>)</span>
<span id="cb95-184"><a href="#cb95-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-185"><a href="#cb95-185" aria-hidden="true" tabindex="-1"></a>F_2020<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_2020_fullcount.csv"</span>)</span>
<span id="cb95-186"><a href="#cb95-186" aria-hidden="true" tabindex="-1"></a>S_2020<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_std_201519_Sample.csv"</span>)</span>
<span id="cb95-187"><a href="#cb95-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-188"><a href="#cb95-188" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-189"><a href="#cb95-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-190"><a href="#cb95-190" aria-hidden="true" tabindex="-1"></a>Now that we have all of the data loaded, we can start working on preparing it for analysis.</span>
<span id="cb95-191"><a href="#cb95-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-192"><a href="#cb95-192" aria-hidden="true" tabindex="-1"></a><span class="fu">## Data Preparation</span></span>
<span id="cb95-193"><a href="#cb95-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-194"><a href="#cb95-194" aria-hidden="true" tabindex="-1"></a><span class="fu">### Isolate Income Data</span></span>
<span id="cb95-195"><a href="#cb95-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-196"><a href="#cb95-196" aria-hidden="true" tabindex="-1"></a>We need to start by identifying the variable(s) containing income information. Go into the data codebook and search for income. We have information on median household income, some breakdowns by race and ethnicity, and per-capita income.</span>
<span id="cb95-197"><a href="#cb95-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-198"><a href="#cb95-198" aria-hidden="true" tabindex="-1"></a>Let's move forward with the per-capita income information, since this is what is listed in the Voorhees study. We will need to pull that information from each of the data years 1970, 1980, 1990, 2000, 2010 (as proxied by 2008-2012 ACS data, and 2020 (as proxied by 2014 - 2019 ACS data)).</span>
<span id="cb95-199"><a href="#cb95-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-200"><a href="#cb95-200" aria-hidden="true" tabindex="-1"></a>For each of the five decades, create a new dataset inc<span class="sc">\_\[</span>year<span class="sc">\]</span> that contains the 2010 tract identifier (TRTID10), and the income per capita variable (INCPC<span class="sc">\[</span>year<span class="sc">\]</span>). For the 2010 data, also include the state identified (statea), the county identified (countya), and the tract identifier (tracta):</span>
<span id="cb95-201"><a href="#cb95-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-204"><a href="#cb95-204" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-205"><a href="#cb95-205" aria-hidden="true" tabindex="-1"></a>inc_70<span class="ot">&lt;-</span>S_1970 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, INCPC70)</span>
<span id="cb95-206"><a href="#cb95-206" aria-hidden="true" tabindex="-1"></a>inc_80<span class="ot">&lt;-</span>S_1980 <span class="sc">|&gt;</span> <span class="fu">select</span>(trtid10, incpc80)</span>
<span id="cb95-207"><a href="#cb95-207" aria-hidden="true" tabindex="-1"></a>inc_90<span class="ot">&lt;-</span>S_1990 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, INCPC90)</span>
<span id="cb95-208"><a href="#cb95-208" aria-hidden="true" tabindex="-1"></a>inc_00<span class="ot">&lt;-</span>S_2000 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, INCPC00)</span>
<span id="cb95-209"><a href="#cb95-209" aria-hidden="true" tabindex="-1"></a>inc_10<span class="ot">&lt;-</span>S_2010 <span class="sc">|&gt;</span> <span class="fu">select</span>(tractid, incpc12)</span>
<span id="cb95-210"><a href="#cb95-210" aria-hidden="true" tabindex="-1"></a>inc_20<span class="ot">&lt;-</span>S_2020 <span class="sc">|&gt;</span> <span class="fu">select</span>(tractid, statea, countya, tracta, incpc19)</span>
<span id="cb95-211"><a href="#cb95-211" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-212"><a href="#cb95-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-213"><a href="#cb95-213" aria-hidden="true" tabindex="-1"></a>Now that we've isolated the income per capita data, we can start to think about how we'd join it all together for the purposes of mapping and further analysis.</span>
<span id="cb95-214"><a href="#cb95-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-215"><a href="#cb95-215" aria-hidden="true" tabindex="-1"></a>One thing we should immediately note here is that there are different numbers of observations for each year. For instance, inc_20 (observations for 2020) contains 73,056 observations:</span>
<span id="cb95-216"><a href="#cb95-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-219"><a href="#cb95-219" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-220"><a href="#cb95-220" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(inc_20)</span>
<span id="cb95-221"><a href="#cb95-221" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-222"><a href="#cb95-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-223"><a href="#cb95-223" aria-hidden="true" tabindex="-1"></a>inc_70 contains 52,759 observations:</span>
<span id="cb95-224"><a href="#cb95-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-227"><a href="#cb95-227" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-228"><a href="#cb95-228" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(inc_70)</span>
<span id="cb95-229"><a href="#cb95-229" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-230"><a href="#cb95-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-231"><a href="#cb95-231" aria-hidden="true" tabindex="-1"></a>This should guide our strategy for how we join the data together. Our join strategy should try to keep all records corresponding to the observation years that have more observations (this is due to differences in geographic coverage between each decade).</span>
<span id="cb95-232"><a href="#cb95-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-233"><a href="#cb95-233" aria-hidden="true" tabindex="-1"></a>Another thing we may want to handle before we join the data together are to standardize column names. You'll note from selecting columns and constructing the inc<span class="sc">\_\[</span>year<span class="sc">\]</span> datasets that there's different capitalization and naming for some years. We can fix this when we're selecting our data by specifying <span class="sc">\[</span>new name<span class="sc">\]</span> = <span class="sc">\[</span>column name<span class="sc">\]</span> in our select calls:</span>
<span id="cb95-234"><a href="#cb95-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-237"><a href="#cb95-237" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-238"><a href="#cb95-238" aria-hidden="true" tabindex="-1"></a>inc_70<span class="ot">&lt;-</span>S_1970 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, INCPC70)</span>
<span id="cb95-239"><a href="#cb95-239" aria-hidden="true" tabindex="-1"></a>inc_80<span class="ot">&lt;-</span>S_1980 <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="at">TRTID10 =</span> trtid10, incpc80)</span>
<span id="cb95-240"><a href="#cb95-240" aria-hidden="true" tabindex="-1"></a>inc_90<span class="ot">&lt;-</span>S_1990 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, INCPC90)</span>
<span id="cb95-241"><a href="#cb95-241" aria-hidden="true" tabindex="-1"></a>inc_00<span class="ot">&lt;-</span>S_2000 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, INCPC00)</span>
<span id="cb95-242"><a href="#cb95-242" aria-hidden="true" tabindex="-1"></a>inc_10<span class="ot">&lt;-</span>S_2010 <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="at">TRTID10 =</span> tractid, <span class="at">INCPC12 =</span> incpc12)</span>
<span id="cb95-243"><a href="#cb95-243" aria-hidden="true" tabindex="-1"></a>inc_20<span class="ot">&lt;-</span>S_2020 <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="at">TRTID10 =</span> tractid, <span class="at">STATE =</span> statea, <span class="at">COUNTY =</span> countya, <span class="at">TRACT =</span> tracta, <span class="at">INCPC19 =</span> incpc19)</span>
<span id="cb95-244"><a href="#cb95-244" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-245"><a href="#cb95-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-246"><a href="#cb95-246" aria-hidden="true" tabindex="-1"></a>We have another major problem to deal with before we can join these data together. Take a look at the column types using the <span class="in">`str()`</span> command:</span>
<span id="cb95-247"><a href="#cb95-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-250"><a href="#cb95-250" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-251"><a href="#cb95-251" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(inc_70)</span>
<span id="cb95-252"><a href="#cb95-252" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(inc_80)</span>
<span id="cb95-253"><a href="#cb95-253" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(inc_90)</span>
<span id="cb95-254"><a href="#cb95-254" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(inc_00)</span>
<span id="cb95-255"><a href="#cb95-255" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(inc_10)</span>
<span id="cb95-256"><a href="#cb95-256" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(inc_20)</span>
<span id="cb95-257"><a href="#cb95-257" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-258"><a href="#cb95-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-259"><a href="#cb95-259" aria-hidden="true" tabindex="-1"></a>Some of our TRTID10 colums are defined as character and others as numeric. Although these FIPS codes look like numbers, they are unique IDs and we want to make sure that they are consistently stored as character vectors. This is also important, because some of the states that come early in the alphabet start with "0" (for instance, Alabama is state "01"). If these import as numeric, that leading zero may be lost. This means we need to go back to our import steps and *explicitly specify* how <span class="in">`read_csv()`</span> should import these columns.</span>
<span id="cb95-260"><a href="#cb95-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-261"><a href="#cb95-261" aria-hidden="true" tabindex="-1"></a>When <span class="in">`read_csv()`</span> initiates the process of reading data, it reads the first several rows of data that then makes an educated guess as to the format to use for each column of data. We can override this and explicitly tell <span class="in">`read_csv()`</span> what format to use for particular columns using the <span class="in">`col_types`</span> option. We specify column types by providing an equivalency statement. For instance <span class="in">`col_types = cols(TRTID10 = col_character())`</span> would say please let me explicitly define a column type. Where a column is named "TRTID10", read in this column and assign it's contents as character. We could explicitly set other types as needed (e.g. col_numeric(), col_boolean(), etc.).</span>
<span id="cb95-262"><a href="#cb95-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-265"><a href="#cb95-265" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-266"><a href="#cb95-266" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb95-267"><a href="#cb95-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-268"><a href="#cb95-268" aria-hidden="true" tabindex="-1"></a>F_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_1970_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>()))</span>
<span id="cb95-269"><a href="#cb95-269" aria-hidden="true" tabindex="-1"></a>S_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/ltdb_std_1970_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>()))</span>
<span id="cb95-270"><a href="#cb95-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-271"><a href="#cb95-271" aria-hidden="true" tabindex="-1"></a>F_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_1980_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>()))</span>
<span id="cb95-272"><a href="#cb95-272" aria-hidden="true" tabindex="-1"></a>S_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/ltdb_std_1980_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">trtid10 =</span> <span class="fu">col_character</span>()))</span>
<span id="cb95-273"><a href="#cb95-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-274"><a href="#cb95-274" aria-hidden="true" tabindex="-1"></a>F_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_1990_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>()))</span>
<span id="cb95-275"><a href="#cb95-275" aria-hidden="true" tabindex="-1"></a>S_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/ltdb_std_1990_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>()))</span>
<span id="cb95-276"><a href="#cb95-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-277"><a href="#cb95-277" aria-hidden="true" tabindex="-1"></a>F_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_2000_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>()))</span>
<span id="cb95-278"><a href="#cb95-278" aria-hidden="true" tabindex="-1"></a>S_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/ltdb_std_2000_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>()))</span>
<span id="cb95-279"><a href="#cb95-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-280"><a href="#cb95-280" aria-hidden="true" tabindex="-1"></a>F_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_2010_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid =</span> <span class="fu">col_character</span>()))</span>
<span id="cb95-281"><a href="#cb95-281" aria-hidden="true" tabindex="-1"></a>S_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_std_200812_Sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid =</span> <span class="fu">col_character</span>()))</span>
<span id="cb95-282"><a href="#cb95-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-283"><a href="#cb95-283" aria-hidden="true" tabindex="-1"></a>F_2020<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_2020_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID2010 =</span> <span class="fu">col_character</span>()))</span>
<span id="cb95-284"><a href="#cb95-284" aria-hidden="true" tabindex="-1"></a>S_2020<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_std_201519_Sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid =</span> <span class="fu">col_character</span>()))</span>
<span id="cb95-285"><a href="#cb95-285" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-286"><a href="#cb95-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-289"><a href="#cb95-289" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-290"><a href="#cb95-290" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb95-291"><a href="#cb95-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-292"><a href="#cb95-292" aria-hidden="true" tabindex="-1"></a>F_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_1970_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>()))</span>
<span id="cb95-293"><a href="#cb95-293" aria-hidden="true" tabindex="-1"></a>S_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_1970_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>()))</span>
<span id="cb95-294"><a href="#cb95-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-295"><a href="#cb95-295" aria-hidden="true" tabindex="-1"></a><span class="co"># Finish (re)importing the LTDB data here.</span></span>
<span id="cb95-296"><a href="#cb95-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-297"><a href="#cb95-297" aria-hidden="true" tabindex="-1"></a>F_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_1980_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>()))</span>
<span id="cb95-298"><a href="#cb95-298" aria-hidden="true" tabindex="-1"></a>S_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_1980_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">trtid10=</span><span class="fu">col_character</span>()))</span>
<span id="cb95-299"><a href="#cb95-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-300"><a href="#cb95-300" aria-hidden="true" tabindex="-1"></a>F_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_1990_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>()))</span>
<span id="cb95-301"><a href="#cb95-301" aria-hidden="true" tabindex="-1"></a>S_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_1990_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>()))</span>
<span id="cb95-302"><a href="#cb95-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-303"><a href="#cb95-303" aria-hidden="true" tabindex="-1"></a>F_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_2000_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>()))</span>
<span id="cb95-304"><a href="#cb95-304" aria-hidden="true" tabindex="-1"></a>S_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_2000_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>()))</span>
<span id="cb95-305"><a href="#cb95-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-306"><a href="#cb95-306" aria-hidden="true" tabindex="-1"></a>F_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_2010_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid=</span><span class="fu">col_character</span>()))</span>
<span id="cb95-307"><a href="#cb95-307" aria-hidden="true" tabindex="-1"></a>S_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_std_200812_Sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid=</span><span class="fu">col_character</span>()))</span>
<span id="cb95-308"><a href="#cb95-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-309"><a href="#cb95-309" aria-hidden="true" tabindex="-1"></a>F_2020<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_2020_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid=</span><span class="fu">col_character</span>()))</span>
<span id="cb95-310"><a href="#cb95-310" aria-hidden="true" tabindex="-1"></a>S_2020<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_std_201519_Sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid=</span><span class="fu">col_character</span>()))</span>
<span id="cb95-311"><a href="#cb95-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-312"><a href="#cb95-312" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-313"><a href="#cb95-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-314"><a href="#cb95-314" aria-hidden="true" tabindex="-1"></a>Then we can go ahead and pull out our income columns as we did before:</span>
<span id="cb95-315"><a href="#cb95-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-318"><a href="#cb95-318" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-319"><a href="#cb95-319" aria-hidden="true" tabindex="-1"></a>inc_70<span class="ot">&lt;-</span>S_1970 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, INCPC70)</span>
<span id="cb95-320"><a href="#cb95-320" aria-hidden="true" tabindex="-1"></a>inc_80<span class="ot">&lt;-</span>S_1980 <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="at">TRTID10 =</span> trtid10, incpc80)</span>
<span id="cb95-321"><a href="#cb95-321" aria-hidden="true" tabindex="-1"></a>inc_90<span class="ot">&lt;-</span>S_1990 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, INCPC90)</span>
<span id="cb95-322"><a href="#cb95-322" aria-hidden="true" tabindex="-1"></a>inc_00<span class="ot">&lt;-</span>S_2000 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, INCPC00)</span>
<span id="cb95-323"><a href="#cb95-323" aria-hidden="true" tabindex="-1"></a>inc_10<span class="ot">&lt;-</span>S_2010 <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="at">TRTID10 =</span> tractid, <span class="at">INCPC12 =</span> incpc12)</span>
<span id="cb95-324"><a href="#cb95-324" aria-hidden="true" tabindex="-1"></a>inc_20<span class="ot">&lt;-</span>S_2020 <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="at">TRTID10 =</span> tractid, <span class="at">STATE =</span> statea, <span class="at">COUNTY =</span> countya, <span class="at">TRACT =</span> tracta, <span class="at">INCPC19 =</span> incpc19)</span>
<span id="cb95-325"><a href="#cb95-325" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-326"><a href="#cb95-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-327"><a href="#cb95-327" aria-hidden="true" tabindex="-1"></a>Let's run one more check on the TRTID10 columns. Lets chech the number of characters in out TRTID columns. Every combined state-county-tract FIPS code should be 11 characters long:</span>
<span id="cb95-328"><a href="#cb95-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-329"><a href="#cb95-329" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>2 state characters</span>
<span id="cb95-330"><a href="#cb95-330" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>3 county characters</span>
<span id="cb95-331"><a href="#cb95-331" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>6 tract characters</span>
<span id="cb95-332"><a href="#cb95-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-333"><a href="#cb95-333" aria-hidden="true" tabindex="-1"></a>Lets take our inc_70 dataset, group it by the count of the number of characters in each observation in the TRTID10 column (<span class="in">`nchar()`</span>), and then ciybt the number of observations:</span>
<span id="cb95-334"><a href="#cb95-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-337"><a href="#cb95-337" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-338"><a href="#cb95-338" aria-hidden="true" tabindex="-1"></a>inc_70 <span class="sc">|&gt;</span> </span>
<span id="cb95-339"><a href="#cb95-339" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span> </span>
<span id="cb95-340"><a href="#cb95-340" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>())</span>
<span id="cb95-341"><a href="#cb95-341" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-342"><a href="#cb95-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-343"><a href="#cb95-343" aria-hidden="true" tabindex="-1"></a>Hmm - in the 1970 income data, we have 11,375 observations with less than the expected number of characters. Why might this be? This could be an artifact of the data we downloaded or could be a function of how <span class="in">`read_csv()`</span> is importing these data.</span>
<span id="cb95-344"><a href="#cb95-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-345"><a href="#cb95-345" aria-hidden="true" tabindex="-1"></a>Past experience tells me that we are missing the leading zero from states with state FIPS codes under 10. We can easily add this back in using the <span class="in">`str_pad()`</span> command from the *stringr* package - this package has tools for modifying strings or character vectors.</span>
<span id="cb95-346"><a href="#cb95-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-349"><a href="#cb95-349" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-350"><a href="#cb95-350" aria-hidden="true" tabindex="-1"></a>inc_70<span class="ot">&lt;-</span>inc_70 <span class="sc">|&gt;</span> </span>
<span id="cb95-351"><a href="#cb95-351" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-352"><a href="#cb95-352" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-353"><a href="#cb95-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-354"><a href="#cb95-354" aria-hidden="true" tabindex="-1"></a>The first part should be straightforward - we're overwriting the existing inc_70 data with an updated version. We're using <span class="in">`mutate()`</span> to alter the TRTID10 column. We're using <span class="in">`str_pad()`</span> to "pad" the TRTID10 column. The desired width (number of characters) is 11, we're going to add our pad to the left side of the existing string, and the pad we'll add is the character "0".</span>
<span id="cb95-355"><a href="#cb95-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-356"><a href="#cb95-356" aria-hidden="true" tabindex="-1"></a><span class="in">`str_pad()`</span> will add however many pad characters we need to get to the desired length. For instance, if we were padding a string "123" with "A" and specified a width of 5, we would get "AA123". If we applied the same to the string "1536" we would get "A1536". If we applied it to "15683" we would get "15683".</span>
<span id="cb95-357"><a href="#cb95-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-358"><a href="#cb95-358" aria-hidden="true" tabindex="-1"></a>Now we can check to confirm that this worked:</span>
<span id="cb95-359"><a href="#cb95-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-362"><a href="#cb95-362" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-363"><a href="#cb95-363" aria-hidden="true" tabindex="-1"></a>inc_70 <span class="sc">|&gt;</span> </span>
<span id="cb95-364"><a href="#cb95-364" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span>  </span>
<span id="cb95-365"><a href="#cb95-365" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>())</span>
<span id="cb95-366"><a href="#cb95-366" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-367"><a href="#cb95-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-368"><a href="#cb95-368" aria-hidden="true" tabindex="-1"></a>All the observations of TRTID10 are now 11 characters wide.</span>
<span id="cb95-369"><a href="#cb95-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-370"><a href="#cb95-370" aria-hidden="true" tabindex="-1"></a>Check the 1980 to 2010 data, and pad where needed.</span>
<span id="cb95-371"><a href="#cb95-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-374"><a href="#cb95-374" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-375"><a href="#cb95-375" aria-hidden="true" tabindex="-1"></a>inc_80 <span class="sc">|&gt;</span> </span>
<span id="cb95-376"><a href="#cb95-376" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span>  </span>
<span id="cb95-377"><a href="#cb95-377" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>()) <span class="co"># Needs padding</span></span>
<span id="cb95-378"><a href="#cb95-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-379"><a href="#cb95-379" aria-hidden="true" tabindex="-1"></a>inc_90 <span class="sc">|&gt;</span>  </span>
<span id="cb95-380"><a href="#cb95-380" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span>  </span>
<span id="cb95-381"><a href="#cb95-381" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>()) <span class="co"># Needs padding</span></span>
<span id="cb95-382"><a href="#cb95-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-383"><a href="#cb95-383" aria-hidden="true" tabindex="-1"></a>inc_00 <span class="sc">|&gt;</span>  </span>
<span id="cb95-384"><a href="#cb95-384" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span>  </span>
<span id="cb95-385"><a href="#cb95-385" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>()) <span class="co"># Needs padding</span></span>
<span id="cb95-386"><a href="#cb95-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-387"><a href="#cb95-387" aria-hidden="true" tabindex="-1"></a>inc_10 <span class="sc">|&gt;</span>  </span>
<span id="cb95-388"><a href="#cb95-388" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span> </span>
<span id="cb95-389"><a href="#cb95-389" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>()) <span class="co"># No padding needed</span></span>
<span id="cb95-390"><a href="#cb95-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-391"><a href="#cb95-391" aria-hidden="true" tabindex="-1"></a>inc_20 <span class="sc">|&gt;</span>  </span>
<span id="cb95-392"><a href="#cb95-392" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span>  </span>
<span id="cb95-393"><a href="#cb95-393" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>()) <span class="co"># No padding needed</span></span>
<span id="cb95-394"><a href="#cb95-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-395"><a href="#cb95-395" aria-hidden="true" tabindex="-1"></a>inc_80<span class="ot">&lt;-</span>inc_80 <span class="sc">|&gt;</span> </span>
<span id="cb95-396"><a href="#cb95-396" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-397"><a href="#cb95-397" aria-hidden="true" tabindex="-1"></a>inc_90<span class="ot">&lt;-</span>inc_90 <span class="sc">|&gt;</span>  </span>
<span id="cb95-398"><a href="#cb95-398" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-399"><a href="#cb95-399" aria-hidden="true" tabindex="-1"></a>inc_00<span class="ot">&lt;-</span>inc_00 <span class="sc">|&gt;</span>  </span>
<span id="cb95-400"><a href="#cb95-400" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-401"><a href="#cb95-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-402"><a href="#cb95-402" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-403"><a href="#cb95-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-404"><a href="#cb95-404" aria-hidden="true" tabindex="-1"></a>Now confirm that your padding has worked:</span>
<span id="cb95-405"><a href="#cb95-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-408"><a href="#cb95-408" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-409"><a href="#cb95-409" aria-hidden="true" tabindex="-1"></a>inc_70 <span class="sc">|&gt;</span> </span>
<span id="cb95-410"><a href="#cb95-410" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span> </span>
<span id="cb95-411"><a href="#cb95-411" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>())</span>
<span id="cb95-412"><a href="#cb95-412" aria-hidden="true" tabindex="-1"></a>inc_80 <span class="sc">|&gt;</span>  </span>
<span id="cb95-413"><a href="#cb95-413" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span> </span>
<span id="cb95-414"><a href="#cb95-414" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>())</span>
<span id="cb95-415"><a href="#cb95-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-416"><a href="#cb95-416" aria-hidden="true" tabindex="-1"></a>inc_90 <span class="sc">|&gt;</span> </span>
<span id="cb95-417"><a href="#cb95-417" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span> </span>
<span id="cb95-418"><a href="#cb95-418" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>())</span>
<span id="cb95-419"><a href="#cb95-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-420"><a href="#cb95-420" aria-hidden="true" tabindex="-1"></a>inc_00 <span class="sc">|&gt;</span>  </span>
<span id="cb95-421"><a href="#cb95-421" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span>  </span>
<span id="cb95-422"><a href="#cb95-422" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>())</span>
<span id="cb95-423"><a href="#cb95-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-424"><a href="#cb95-424" aria-hidden="true" tabindex="-1"></a>inc_10 <span class="sc">|&gt;</span> </span>
<span id="cb95-425"><a href="#cb95-425" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span> </span>
<span id="cb95-426"><a href="#cb95-426" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>())</span>
<span id="cb95-427"><a href="#cb95-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-428"><a href="#cb95-428" aria-hidden="true" tabindex="-1"></a>inc_20 <span class="sc">|&gt;</span> </span>
<span id="cb95-429"><a href="#cb95-429" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">nchar</span>(TRTID10)) <span class="sc">|&gt;</span> </span>
<span id="cb95-430"><a href="#cb95-430" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n</span>())</span>
<span id="cb95-431"><a href="#cb95-431" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-432"><a href="#cb95-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-433"><a href="#cb95-433" aria-hidden="true" tabindex="-1"></a>Note that this padding issue would not effect Illinois (state FIPS code 17), but it's important to know how to diagnose and fix this problem, as it could come up for other states or places you are working with.</span>
<span id="cb95-434"><a href="#cb95-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-435"><a href="#cb95-435" aria-hidden="true" tabindex="-1"></a>Remember to take your time, and build code that you (or others) can use universally in the future.</span>
<span id="cb95-436"><a href="#cb95-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-437"><a href="#cb95-437" aria-hidden="true" tabindex="-1"></a><span class="fu">### Re-doing Data Import</span></span>
<span id="cb95-438"><a href="#cb95-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-439"><a href="#cb95-439" aria-hidden="true" tabindex="-1"></a>Before we move forward, let's update our data import code so that we incorporate addressing the data issues we've covered into our data importation workflow. As a reminder, we need to rename our combined state-county-tract FIPS column and pad the column to 11 characters on the left size with "0".</span>
<span id="cb95-440"><a href="#cb95-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-443"><a href="#cb95-443" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-444"><a href="#cb95-444" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb95-445"><a href="#cb95-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-446"><a href="#cb95-446" aria-hidden="true" tabindex="-1"></a>F_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_1970_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb95-447"><a href="#cb95-447" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-448"><a href="#cb95-448" aria-hidden="true" tabindex="-1"></a>S_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/ltdb_std_1970_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb95-449"><a href="#cb95-449" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-450"><a href="#cb95-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-451"><a href="#cb95-451" aria-hidden="true" tabindex="-1"></a>F_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_1980_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb95-452"><a href="#cb95-452" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-453"><a href="#cb95-453" aria-hidden="true" tabindex="-1"></a>S_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/ltdb_std_1980_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">trtid10 =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb95-454"><a href="#cb95-454" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(trtid10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-455"><a href="#cb95-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-456"><a href="#cb95-456" aria-hidden="true" tabindex="-1"></a>F_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_1990_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb95-457"><a href="#cb95-457" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-458"><a href="#cb95-458" aria-hidden="true" tabindex="-1"></a>S_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/ltdb_std_1990_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb95-459"><a href="#cb95-459" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-460"><a href="#cb95-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-461"><a href="#cb95-461" aria-hidden="true" tabindex="-1"></a>F_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_2000_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb95-462"><a href="#cb95-462" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-463"><a href="#cb95-463" aria-hidden="true" tabindex="-1"></a>S_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/ltdb_std_2000_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10 =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb95-464"><a href="#cb95-464" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-465"><a href="#cb95-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-466"><a href="#cb95-466" aria-hidden="true" tabindex="-1"></a>F_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_2010_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid =</span> <span class="fu">col_character</span>()))</span>
<span id="cb95-467"><a href="#cb95-467" aria-hidden="true" tabindex="-1"></a>S_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_std_200812_Sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb95-468"><a href="#cb95-468" aria-hidden="true" tabindex="-1"></a>   <span class="fu">rename</span>(<span class="at">TRTID10 =</span> tractid)</span>
<span id="cb95-469"><a href="#cb95-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-470"><a href="#cb95-470" aria-hidden="true" tabindex="-1"></a>F_2020<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_Std_2020_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID2010 =</span> <span class="fu">col_character</span>()))</span>
<span id="cb95-471"><a href="#cb95-471" aria-hidden="true" tabindex="-1"></a>S_2020<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"08_neighborhood_change/data_raw/LTDB_std_201519_Sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid =</span> <span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb95-472"><a href="#cb95-472" aria-hidden="true" tabindex="-1"></a>   <span class="fu">rename</span>(<span class="at">TRTID10 =</span> tractid)</span>
<span id="cb95-473"><a href="#cb95-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-474"><a href="#cb95-474" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-475"><a href="#cb95-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-478"><a href="#cb95-478" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-479"><a href="#cb95-479" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb95-480"><a href="#cb95-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-481"><a href="#cb95-481" aria-hidden="true" tabindex="-1"></a>F_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_1970_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>())) <span class="sc">|&gt;</span></span>
<span id="cb95-482"><a href="#cb95-482" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-483"><a href="#cb95-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-484"><a href="#cb95-484" aria-hidden="true" tabindex="-1"></a>S_1970<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_1970_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>())) <span class="sc">|&gt;</span></span>
<span id="cb95-485"><a href="#cb95-485" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-486"><a href="#cb95-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-487"><a href="#cb95-487" aria-hidden="true" tabindex="-1"></a><span class="co"># Finish (re)importing the LTDB data here.</span></span>
<span id="cb95-488"><a href="#cb95-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-489"><a href="#cb95-489" aria-hidden="true" tabindex="-1"></a>F_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_1980_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>())) <span class="sc">|&gt;</span></span>
<span id="cb95-490"><a href="#cb95-490" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-491"><a href="#cb95-491" aria-hidden="true" tabindex="-1"></a>S_1980<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_1980_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">trtid10=</span><span class="fu">col_character</span>())) <span class="sc">|&gt;</span> </span>
<span id="cb95-492"><a href="#cb95-492" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">TRTID10 =</span> trtid10) <span class="sc">|&gt;</span></span>
<span id="cb95-493"><a href="#cb95-493" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-494"><a href="#cb95-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-495"><a href="#cb95-495" aria-hidden="true" tabindex="-1"></a>F_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_1990_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>())) <span class="sc">|&gt;</span></span>
<span id="cb95-496"><a href="#cb95-496" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-497"><a href="#cb95-497" aria-hidden="true" tabindex="-1"></a>S_1990<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_1990_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>())) <span class="sc">|&gt;</span></span>
<span id="cb95-498"><a href="#cb95-498" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-499"><a href="#cb95-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-500"><a href="#cb95-500" aria-hidden="true" tabindex="-1"></a>F_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_2000_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>())) <span class="sc">|&gt;</span></span>
<span id="cb95-501"><a href="#cb95-501" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-502"><a href="#cb95-502" aria-hidden="true" tabindex="-1"></a>S_2000<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_2000_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">TRTID10=</span><span class="fu">col_character</span>())) <span class="sc">|&gt;</span></span>
<span id="cb95-503"><a href="#cb95-503" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-504"><a href="#cb95-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-505"><a href="#cb95-505" aria-hidden="true" tabindex="-1"></a>F_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/LTDB_Std_2010_fullcount.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid=</span><span class="fu">col_character</span>())) <span class="sc">|&gt;</span></span>
<span id="cb95-506"><a href="#cb95-506" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">TRTID10 =</span> tractid) <span class="sc">|&gt;</span></span>
<span id="cb95-507"><a href="#cb95-507" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-508"><a href="#cb95-508" aria-hidden="true" tabindex="-1"></a>S_2010<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data_raw/ltdb_std_2010_sample.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">tractid=</span><span class="fu">col_character</span>())) <span class="sc">|&gt;</span></span>
<span id="cb95-509"><a href="#cb95-509" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rename</span>(<span class="at">TRTID10 =</span> tractid) <span class="sc">|&gt;</span></span>
<span id="cb95-510"><a href="#cb95-510" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTID10 =</span> <span class="fu">str_pad</span>(TRTID10, <span class="at">width =</span> <span class="dv">11</span>, <span class="at">side=</span><span class="st">"left"</span>, <span class="at">pad=</span> <span class="st">"0"</span>))</span>
<span id="cb95-511"><a href="#cb95-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-512"><a href="#cb95-512" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-513"><a href="#cb95-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-514"><a href="#cb95-514" aria-hidden="true" tabindex="-1"></a>And from here we can re-create the inc<span class="sc">\_\[</span>year<span class="sc">\]</span> datasets:</span>
<span id="cb95-515"><a href="#cb95-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-518"><a href="#cb95-518" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-519"><a href="#cb95-519" aria-hidden="true" tabindex="-1"></a>inc_70<span class="ot">&lt;-</span>S_1970 <span class="sc">|&gt;</span>  </span>
<span id="cb95-520"><a href="#cb95-520" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRTID10, INCPC70)</span>
<span id="cb95-521"><a href="#cb95-521" aria-hidden="true" tabindex="-1"></a>inc_80<span class="ot">&lt;-</span>S_1980 <span class="sc">|&gt;</span>  </span>
<span id="cb95-522"><a href="#cb95-522" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRTID10, <span class="at">INCPC80 =</span> incpc80)</span>
<span id="cb95-523"><a href="#cb95-523" aria-hidden="true" tabindex="-1"></a>inc_90<span class="ot">&lt;-</span>S_1990 <span class="sc">|&gt;</span>  </span>
<span id="cb95-524"><a href="#cb95-524" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRTID10, INCPC90)</span>
<span id="cb95-525"><a href="#cb95-525" aria-hidden="true" tabindex="-1"></a>inc_00<span class="ot">&lt;-</span>S_2000 <span class="sc">|&gt;</span>  </span>
<span id="cb95-526"><a href="#cb95-526" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRTID10, INCPC00)</span>
<span id="cb95-527"><a href="#cb95-527" aria-hidden="true" tabindex="-1"></a>inc_10<span class="ot">&lt;-</span>S_2010 <span class="sc">|&gt;</span>  </span>
<span id="cb95-528"><a href="#cb95-528" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRTID10, <span class="at">INCPC12 =</span> incpc12)</span>
<span id="cb95-529"><a href="#cb95-529" aria-hidden="true" tabindex="-1"></a>inc_20 <span class="ot">&lt;-</span> S_2020 <span class="sc">|&gt;</span> </span>
<span id="cb95-530"><a href="#cb95-530" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRTID10, <span class="at">STATE =</span> statea, <span class="at">COUNTY =</span> countya, <span class="at">TRACT =</span> tracta, <span class="at">INCPC19 =</span> incpc19)</span>
<span id="cb95-531"><a href="#cb95-531" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-532"><a href="#cb95-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-533"><a href="#cb95-533" aria-hidden="true" tabindex="-1"></a><span class="fu">### Join Together</span></span>
<span id="cb95-534"><a href="#cb95-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-535"><a href="#cb95-535" aria-hidden="true" tabindex="-1"></a>Finally we have our data in a form where we can join our income cross-sections together. Using left joins, join together your six income data cross-sections into a new dataset called income.</span>
<span id="cb95-536"><a href="#cb95-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-539"><a href="#cb95-539" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-540"><a href="#cb95-540" aria-hidden="true" tabindex="-1"></a>income<span class="ot">&lt;-</span><span class="fu">left_join</span>(inc_20, inc_10, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span>
<span id="cb95-541"><a href="#cb95-541" aria-hidden="true" tabindex="-1"></a>income<span class="ot">&lt;-</span><span class="fu">left_join</span>(income, inc_00, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span>
<span id="cb95-542"><a href="#cb95-542" aria-hidden="true" tabindex="-1"></a>income<span class="ot">&lt;-</span><span class="fu">left_join</span>(income, inc_90, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span>
<span id="cb95-543"><a href="#cb95-543" aria-hidden="true" tabindex="-1"></a>income<span class="ot">&lt;-</span><span class="fu">left_join</span>(income, inc_80, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span>
<span id="cb95-544"><a href="#cb95-544" aria-hidden="true" tabindex="-1"></a>income<span class="ot">&lt;-</span><span class="fu">left_join</span>(income, inc_70, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span>
<span id="cb95-545"><a href="#cb95-545" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-546"><a href="#cb95-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-547"><a href="#cb95-547" aria-hidden="true" tabindex="-1"></a>Re-organize the income per capita fields so they are in the order 1970, 1980, 1990, 2000, 2010, 2010.</span>
<span id="cb95-548"><a href="#cb95-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-551"><a href="#cb95-551" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-552"><a href="#cb95-552" aria-hidden="true" tabindex="-1"></a>income<span class="ot">&lt;-</span>income  <span class="sc">|&gt;</span>  </span>
<span id="cb95-553"><a href="#cb95-553" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRTID10, STATE, COUNTY, TRACT, INCPC70, INCPC80, INCPC90, INCPC00, INCPC12, INCPC19)</span>
<span id="cb95-554"><a href="#cb95-554" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-555"><a href="#cb95-555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-556"><a href="#cb95-556" aria-hidden="true" tabindex="-1"></a><span class="fu">### Adjust for Inflation</span></span>
<span id="cb95-557"><a href="#cb95-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-558"><a href="#cb95-558" aria-hidden="true" tabindex="-1"></a>We have one more step to accomplish before we can move forward with analysis. Each of our income observations is reported out in the monetary value associated with the time period in which it was collected. Due to inflation, money has a different value over time - \$5 in 1970 could buy you a lot more than it can in 2020. Using the <span class="co">[</span><span class="ot">CPI Inflation Calculator</span><span class="co">](https://www.bls.gov/data/inflation_calculator.htm)</span>, we can calculate that the value of 5 dollars in 1970 would have the equivalent value of 39 dollars and 57 cents in 2023 dollars.</span>
<span id="cb95-559"><a href="#cb95-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-560"><a href="#cb95-560" aria-hidden="true" tabindex="-1"></a>By standardizing all of the dollar values to their equivalent value in a common year, it is much easier to compare changes in income over time as they are in the same dollar equivalent unit.</span>
<span id="cb95-561"><a href="#cb95-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-562"><a href="#cb95-562" aria-hidden="true" tabindex="-1"></a>The CPI Inflation Calculator can help us here. If we find out how much \$1 in our data collection year is worth in a common current year, we can figure out what we'd have to multiply our observations by to convert them to current year dollars.</span>
<span id="cb95-563"><a href="#cb95-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-564"><a href="#cb95-564" aria-hidden="true" tabindex="-1"></a>We will eventually add some additional data and demographic characteristics from the 2015-2019 ACS. Looking in the 2015-2019 ACS per capital income table <span class="co">[</span><span class="ot">B19301: Per Capita Income in the Past 12 Months</span><span class="co">](https://data.census.gov/cedsci/table?q=B19301%3A%20PER%20CAPITA%20INCOME%20IN%20THE%20PAST%2012%20MONTHS%20%28IN%202019%20INFLATION-ADJUSTED%20DOLLARS%29&amp;tid=ACSDT1Y2019.B19301&amp;hidePreview=true)</span> we see that these data are reported in inflation-adjusted 2019 dollars.</span>
<span id="cb95-565"><a href="#cb95-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-566"><a href="#cb95-566" aria-hidden="true" tabindex="-1"></a>Since 2019 will be our most recent point of reference, let's adjust our dollar values from 1970 - 2010 to 2019 dollars. Using the CPI Inflation Calculator, find the value of 1 dollar in January of each of the decennial years in January 2019.</span>
<span id="cb95-567"><a href="#cb95-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-568"><a href="#cb95-568" aria-hidden="true" tabindex="-1"></a>| Year        | Value |</span>
<span id="cb95-569"><a href="#cb95-569" aria-hidden="true" tabindex="-1"></a>|-------------|-------|</span>
<span id="cb95-570"><a href="#cb95-570" aria-hidden="true" tabindex="-1"></a>| 1970        | 6.66  |</span>
<span id="cb95-571"><a href="#cb95-571" aria-hidden="true" tabindex="-1"></a>| 1980        | 3.24  |</span>
<span id="cb95-572"><a href="#cb95-572" aria-hidden="true" tabindex="-1"></a>| 1990        | 1.98  |</span>
<span id="cb95-573"><a href="#cb95-573" aria-hidden="true" tabindex="-1"></a>| 2000        | 1.49  |</span>
<span id="cb95-574"><a href="#cb95-574" aria-hidden="true" tabindex="-1"></a>| 2010 (2012) | 1.11  |</span>
<span id="cb95-575"><a href="#cb95-575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-576"><a href="#cb95-576" aria-hidden="true" tabindex="-1"></a>Now multiply each of the income per capita columns by their inflation adjustment factor to get them into 2019 dollars (assume 1970, 1980, 1990, and 2000 data are from January of that year, and our 2010 data which comes from the ACS is actually in 2012 dollars).</span>
<span id="cb95-577"><a href="#cb95-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-580"><a href="#cb95-580" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-581"><a href="#cb95-581" aria-hidden="true" tabindex="-1"></a>income<span class="ot">&lt;-</span>income <span class="sc">|&gt;</span> </span>
<span id="cb95-582"><a href="#cb95-582" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb95-583"><a href="#cb95-583" aria-hidden="true" tabindex="-1"></a>  <span class="at">INCPC70 =</span> INCPC70<span class="sc">*</span><span class="fl">6.66</span>,</span>
<span id="cb95-584"><a href="#cb95-584" aria-hidden="true" tabindex="-1"></a>  <span class="at">INCPC80 =</span> INCPC80<span class="sc">*</span><span class="fl">3.24</span>,</span>
<span id="cb95-585"><a href="#cb95-585" aria-hidden="true" tabindex="-1"></a>  <span class="at">INCPC90 =</span> INCPC90<span class="sc">*</span><span class="fl">1.98</span>,</span>
<span id="cb95-586"><a href="#cb95-586" aria-hidden="true" tabindex="-1"></a>  <span class="at">INCPC00 =</span> INCPC00<span class="sc">*</span><span class="fl">1.49</span>,</span>
<span id="cb95-587"><a href="#cb95-587" aria-hidden="true" tabindex="-1"></a>  <span class="at">INCPC12 =</span> INCPC12<span class="sc">*</span><span class="fl">1.11</span></span>
<span id="cb95-588"><a href="#cb95-588" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb95-589"><a href="#cb95-589" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-590"><a href="#cb95-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-591"><a href="#cb95-591" aria-hidden="true" tabindex="-1"></a>We now have a relatively clean income dataset that we could use to analyze any tract, city, or region within the United States.</span>
<span id="cb95-592"><a href="#cb95-592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-593"><a href="#cb95-593" aria-hidden="true" tabindex="-1"></a><span class="fu">## Select Regional Data</span></span>
<span id="cb95-594"><a href="#cb95-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-595"><a href="#cb95-595" aria-hidden="true" tabindex="-1"></a>As we have for our last few analyses, we're going to examine neighborhood change for New York City. As in the past, we'll start by pulling out data for the counties that represent boroughs of New York City. Our LTDB data contains a combined State, County, Tract FIPS code - how could we pull out the state and county FIPS codes we would need to identify counties?</span>
<span id="cb95-596"><a href="#cb95-596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-597"><a href="#cb95-597" aria-hidden="true" tabindex="-1"></a>We have casually been introduced to stringr's <span class="in">`substr()`</span> function in the past, that allows us to pull out substrings based upon the character positions. In this case, we want to pull out the first five characters from the TRTID10 field, which contains the combined state and county FIPS code. Use <span class="in">`substr()`</span> inside a mutate()<span class="sc">\`</span> to create a new column called COFIPS in our combined income dataset that contains the first five characters from TRTID10.</span>
<span id="cb95-598"><a href="#cb95-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-601"><a href="#cb95-601" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-602"><a href="#cb95-602" aria-hidden="true" tabindex="-1"></a>income<span class="ot">&lt;-</span>income <span class="sc">|&gt;</span> </span>
<span id="cb95-603"><a href="#cb95-603" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">COFIPS =</span> <span class="fu">substr</span>(TRTID10, <span class="dv">0</span>, <span class="dv">5</span>))</span>
<span id="cb95-604"><a href="#cb95-604" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-605"><a href="#cb95-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-606"><a href="#cb95-606" aria-hidden="true" tabindex="-1"></a>As a reminder, here's the names and FIPS codes for NYC Boroughs:</span>
<span id="cb95-607"><a href="#cb95-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-608"><a href="#cb95-608" aria-hidden="true" tabindex="-1"></a>| FIPS Code | County Name     | Borough Name  |</span>
<span id="cb95-609"><a href="#cb95-609" aria-hidden="true" tabindex="-1"></a>|-----------|-----------------|---------------|</span>
<span id="cb95-610"><a href="#cb95-610" aria-hidden="true" tabindex="-1"></a>| 36047     | Kings County    | Brooklyn      |</span>
<span id="cb95-611"><a href="#cb95-611" aria-hidden="true" tabindex="-1"></a>| 36005     | Bronx County    | Bronx         |</span>
<span id="cb95-612"><a href="#cb95-612" aria-hidden="true" tabindex="-1"></a>| 36081     | Queens County   | Queens        |</span>
<span id="cb95-613"><a href="#cb95-613" aria-hidden="true" tabindex="-1"></a>| 36085     | Richmond County | Staten Island |</span>
<span id="cb95-614"><a href="#cb95-614" aria-hidden="true" tabindex="-1"></a>| 36061     | New York County | Manhattan     |</span>
<span id="cb95-615"><a href="#cb95-615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-616"><a href="#cb95-616" aria-hidden="true" tabindex="-1"></a>Let's create a new income dataset called <span class="sc">\_</span>income that contains income observations for New York City's Boroughs (in your <span class="in">`filter()`</span> statement consider using <span class="in">`%in%`</span> with a list of combined state-county FIPS codes):</span>
<span id="cb95-617"><a href="#cb95-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-620"><a href="#cb95-620" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-621"><a href="#cb95-621" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="ot">&lt;-</span> income <span class="sc">|&gt;</span> </span>
<span id="cb95-622"><a href="#cb95-622" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(COFIPS <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"36047"</span>, <span class="st">"36005"</span>, <span class="st">"36081"</span>, <span class="st">"36085"</span>, <span class="st">"36061"</span>))</span>
<span id="cb95-623"><a href="#cb95-623" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-624"><a href="#cb95-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-625"><a href="#cb95-625" aria-hidden="true" tabindex="-1"></a>Now's a good time to check descriptive statistics for our income data. Let's use <span class="in">`summary()`</span> on the chi_income object:</span>
<span id="cb95-626"><a href="#cb95-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-629"><a href="#cb95-629" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-630"><a href="#cb95-630" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(nyc_income)</span>
<span id="cb95-631"><a href="#cb95-631" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-632"><a href="#cb95-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-633"><a href="#cb95-633" aria-hidden="true" tabindex="-1"></a>We have 2,167 observations for New York City.</span>
<span id="cb95-634"><a href="#cb95-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-635"><a href="#cb95-635" aria-hidden="true" tabindex="-1"></a><span class="fu"># Tract-Region Income Comparisons</span></span>
<span id="cb95-636"><a href="#cb95-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-637"><a href="#cb95-637" aria-hidden="true" tabindex="-1"></a>Based upon the Voorhees Center's analysis, our next step is to calculate the difference between the income in each tract and the "Metro Area Weighted Average Income". Metro Area Average Income makes sense - this is the average of the income per capita for all census tracts in the metro area. *Weighted Average Income*, income requires just a bit more thought. If we were to find the *Average Income* for all tracts in the metro area, we would be assuming they all have the same population. Calculating the *Weighted Average Income* weights the contribution of each tract's income observation by the population in the census tract, so that tracts with more people will get more weight in the calculation of the average.</span>
<span id="cb95-638"><a href="#cb95-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-639"><a href="#cb95-639" aria-hidden="true" tabindex="-1"></a>This means that we need to grab population data for each of our observation years, so that we can then combine the population data and our income data to produced weighted average income.</span>
<span id="cb95-640"><a href="#cb95-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-641"><a href="#cb95-641" aria-hidden="true" tabindex="-1"></a>Let's pull the population numbers from our full count data. Create a dataset called pop that joins the tract population from the POP<span class="sc">\_\[</span>year<span class="sc">\]</span> column for each year into one dataset:</span>
<span id="cb95-642"><a href="#cb95-642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-645"><a href="#cb95-645" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-646"><a href="#cb95-646" aria-hidden="true" tabindex="-1"></a>pop_70<span class="ot">&lt;-</span> F_1970 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, POP70)</span>
<span id="cb95-647"><a href="#cb95-647" aria-hidden="true" tabindex="-1"></a>pop_80<span class="ot">&lt;-</span> F_1980 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, POP80)</span>
<span id="cb95-648"><a href="#cb95-648" aria-hidden="true" tabindex="-1"></a>pop_90<span class="ot">&lt;-</span> F_1990 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, POP90)</span>
<span id="cb95-649"><a href="#cb95-649" aria-hidden="true" tabindex="-1"></a>pop_00<span class="ot">&lt;-</span> F_2000 <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, POP00)</span>
<span id="cb95-650"><a href="#cb95-650" aria-hidden="true" tabindex="-1"></a>pop_10<span class="ot">&lt;-</span> F_2010 <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="at">TRTID10 =</span> tractid, <span class="at">POP10=</span>pop10) <span class="co"># note the renaming of variables.</span></span>
<span id="cb95-651"><a href="#cb95-651" aria-hidden="true" tabindex="-1"></a>pop_20<span class="ot">&lt;-</span> F_2020 <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="at">TRTID10 =</span> TRTID2010, <span class="at">POP20=</span>pop20) <span class="co"># note the renaming of variables.</span></span>
<span id="cb95-652"><a href="#cb95-652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-653"><a href="#cb95-653" aria-hidden="true" tabindex="-1"></a>pop<span class="ot">&lt;-</span><span class="fu">left_join</span>(pop_20, pop_10, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span>
<span id="cb95-654"><a href="#cb95-654" aria-hidden="true" tabindex="-1"></a>pop<span class="ot">&lt;-</span><span class="fu">left_join</span>(pop, pop_00, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span>
<span id="cb95-655"><a href="#cb95-655" aria-hidden="true" tabindex="-1"></a>pop<span class="ot">&lt;-</span><span class="fu">left_join</span>(pop, pop_90, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span>
<span id="cb95-656"><a href="#cb95-656" aria-hidden="true" tabindex="-1"></a>pop<span class="ot">&lt;-</span><span class="fu">left_join</span>(pop, pop_80, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span>
<span id="cb95-657"><a href="#cb95-657" aria-hidden="true" tabindex="-1"></a>pop<span class="ot">&lt;-</span><span class="fu">left_join</span>(pop, pop_70, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span>
<span id="cb95-658"><a href="#cb95-658" aria-hidden="true" tabindex="-1"></a>pop <span class="ot">&lt;-</span> pop <span class="sc">|&gt;</span> <span class="fu">select</span>(TRTID10, POP70, POP80, POP90, POP00, POP10, POP20)</span>
<span id="cb95-659"><a href="#cb95-659" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-660"><a href="#cb95-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-661"><a href="#cb95-661" aria-hidden="true" tabindex="-1"></a>Now that you have combined population data, join it to your NYC income data:</span>
<span id="cb95-662"><a href="#cb95-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-665"><a href="#cb95-665" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-666"><a href="#cb95-666" aria-hidden="true" tabindex="-1"></a>nyc_income<span class="ot">&lt;-</span><span class="fu">left_join</span>(nyc_income, pop, <span class="at">by=</span><span class="st">"TRTID10"</span>)</span>
<span id="cb95-667"><a href="#cb95-667" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-668"><a href="#cb95-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-669"><a href="#cb95-669" aria-hidden="true" tabindex="-1"></a>Now we can calculate the weighted average - we create a new column for the weighted average for each year. We supply the income per capita information and then the weights (in this case, the population count). We also specify the removal of NA values.</span>
<span id="cb95-670"><a href="#cb95-670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-673"><a href="#cb95-673" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-674"><a href="#cb95-674" aria-hidden="true" tabindex="-1"></a>nyc_income<span class="ot">&lt;-</span>nyc_income <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb95-675"><a href="#cb95-675" aria-hidden="true" tabindex="-1"></a>  <span class="at">winc_70 =</span> <span class="fu">weighted.mean</span>(INCPC70, POP70, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-676"><a href="#cb95-676" aria-hidden="true" tabindex="-1"></a>  <span class="at">winc_80 =</span> <span class="fu">weighted.mean</span>(INCPC80, POP80, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-677"><a href="#cb95-677" aria-hidden="true" tabindex="-1"></a>  <span class="at">winc_90 =</span> <span class="fu">weighted.mean</span>(INCPC90, POP90, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-678"><a href="#cb95-678" aria-hidden="true" tabindex="-1"></a>  <span class="at">winc_00 =</span> <span class="fu">weighted.mean</span>(INCPC00, POP00, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-679"><a href="#cb95-679" aria-hidden="true" tabindex="-1"></a>  <span class="at">winc_10 =</span> <span class="fu">weighted.mean</span>(INCPC12, POP10, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-680"><a href="#cb95-680" aria-hidden="true" tabindex="-1"></a>  <span class="at">winc_20 =</span> <span class="fu">weighted.mean</span>(INCPC19, POP20, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb95-681"><a href="#cb95-681" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb95-682"><a href="#cb95-682" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-683"><a href="#cb95-683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-684"><a href="#cb95-684" aria-hidden="true" tabindex="-1"></a>Now we can calculate the difference between each tract's income and the regional average income per capita. Place these differences in income into new columns dincome<span class="sc">\_\[</span>year<span class="sc">\]</span>:</span>
<span id="cb95-685"><a href="#cb95-685" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-688"><a href="#cb95-688" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-689"><a href="#cb95-689" aria-hidden="true" tabindex="-1"></a>nyc_income<span class="ot">&lt;-</span>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb95-690"><a href="#cb95-690" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb95-691"><a href="#cb95-691" aria-hidden="true" tabindex="-1"></a>  <span class="at">dincome_70 =</span> INCPC70 <span class="sc">-</span> winc_70,</span>
<span id="cb95-692"><a href="#cb95-692" aria-hidden="true" tabindex="-1"></a>  <span class="at">dincome_80 =</span> INCPC80 <span class="sc">-</span> winc_80,</span>
<span id="cb95-693"><a href="#cb95-693" aria-hidden="true" tabindex="-1"></a>  <span class="at">dincome_90 =</span> INCPC90 <span class="sc">-</span> winc_90,</span>
<span id="cb95-694"><a href="#cb95-694" aria-hidden="true" tabindex="-1"></a>  <span class="at">dincome_00 =</span> INCPC00 <span class="sc">-</span> winc_00,</span>
<span id="cb95-695"><a href="#cb95-695" aria-hidden="true" tabindex="-1"></a>  <span class="at">dincome_10 =</span> INCPC12 <span class="sc">-</span> winc_10,</span>
<span id="cb95-696"><a href="#cb95-696" aria-hidden="true" tabindex="-1"></a>  <span class="at">dincome_20 =</span> INCPC19 <span class="sc">-</span> winc_20</span>
<span id="cb95-697"><a href="#cb95-697" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb95-698"><a href="#cb95-698" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-699"><a href="#cb95-699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-700"><a href="#cb95-700" aria-hidden="true" tabindex="-1"></a>And finally, we can calculate the percentage difference.</span>
<span id="cb95-701"><a href="#cb95-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-704"><a href="#cb95-704" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-705"><a href="#cb95-705" aria-hidden="true" tabindex="-1"></a>nyc_income<span class="ot">&lt;-</span>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb95-706"><a href="#cb95-706" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb95-707"><a href="#cb95-707" aria-hidden="true" tabindex="-1"></a>  <span class="at">pincome_70 =</span> dincome_70<span class="sc">/</span>winc_70,</span>
<span id="cb95-708"><a href="#cb95-708" aria-hidden="true" tabindex="-1"></a>  <span class="at">pincome_80 =</span> dincome_80<span class="sc">/</span>winc_80,</span>
<span id="cb95-709"><a href="#cb95-709" aria-hidden="true" tabindex="-1"></a>  <span class="at">pincome_90 =</span> dincome_90<span class="sc">/</span>winc_90,</span>
<span id="cb95-710"><a href="#cb95-710" aria-hidden="true" tabindex="-1"></a>  <span class="at">pincome_00 =</span> dincome_00<span class="sc">/</span>winc_00,</span>
<span id="cb95-711"><a href="#cb95-711" aria-hidden="true" tabindex="-1"></a>  <span class="at">pincome_10 =</span> dincome_10<span class="sc">/</span>winc_10,</span>
<span id="cb95-712"><a href="#cb95-712" aria-hidden="true" tabindex="-1"></a>  <span class="at">pincome_20 =</span> dincome_20<span class="sc">/</span>winc_20</span>
<span id="cb95-713"><a href="#cb95-713" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb95-714"><a href="#cb95-714" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-715"><a href="#cb95-715" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-716"><a href="#cb95-716" aria-hidden="true" tabindex="-1"></a>Recall that the Voorhees Center's study classifies tracts based upon the percentage change:</span>
<span id="cb95-717"><a href="#cb95-717" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-718"><a href="#cb95-718" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Very High Income:** Greater than 40% above the regional average</span>
<span id="cb95-719"><a href="#cb95-719" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**High Income:** 20% - 40% above the regional average</span>
<span id="cb95-720"><a href="#cb95-720" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Middle Income:** 20% below to 20% above the regional average</span>
<span id="cb95-721"><a href="#cb95-721" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Low Income:** 20% below to 40% below the regional average</span>
<span id="cb95-722"><a href="#cb95-722" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Very Low Income:** Greater than 40% below the regional average</span>
<span id="cb95-723"><a href="#cb95-723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-724"><a href="#cb95-724" aria-hidden="true" tabindex="-1"></a>We can then reshape our "wide" data into "long" data pulling out our percent change estimates:</span>
<span id="cb95-725"><a href="#cb95-725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-728"><a href="#cb95-728" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-729"><a href="#cb95-729" aria-hidden="true" tabindex="-1"></a>nyc_income_long<span class="ot">&lt;-</span>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb95-730"><a href="#cb95-730" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(pincome_70<span class="sc">:</span>pincome_20) <span class="sc">|&gt;</span> </span>
<span id="cb95-731"><a href="#cb95-731" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRTID10, COUNTY, name, value)</span>
<span id="cb95-732"><a href="#cb95-732" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-733"><a href="#cb95-733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-734"><a href="#cb95-734" aria-hidden="true" tabindex="-1"></a>Rename the name and value columns</span>
<span id="cb95-735"><a href="#cb95-735" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-738"><a href="#cb95-738" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-739"><a href="#cb95-739" aria-hidden="true" tabindex="-1"></a>nyc_income_long<span class="ot">&lt;-</span>nyc_income_long <span class="sc">|&gt;</span> </span>
<span id="cb95-740"><a href="#cb95-740" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(TRTID10, COUNTY, <span class="at">Year =</span> name, <span class="at">pincome =</span> value)</span>
<span id="cb95-741"><a href="#cb95-741" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-742"><a href="#cb95-742" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-743"><a href="#cb95-743" aria-hidden="true" tabindex="-1"></a>Re-label the years</span>
<span id="cb95-744"><a href="#cb95-744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-747"><a href="#cb95-747" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-748"><a href="#cb95-748" aria-hidden="true" tabindex="-1"></a>nyc_income_long<span class="ot">&lt;-</span>nyc_income_long <span class="sc">|&gt;</span> </span>
<span id="cb95-749"><a href="#cb95-749" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">case_when</span>(</span>
<span id="cb95-750"><a href="#cb95-750" aria-hidden="true" tabindex="-1"></a>  Year <span class="sc">==</span> <span class="st">"pincome_70"</span> <span class="sc">~</span> <span class="st">"1970"</span>,</span>
<span id="cb95-751"><a href="#cb95-751" aria-hidden="true" tabindex="-1"></a>  Year <span class="sc">==</span> <span class="st">"pincome_80"</span> <span class="sc">~</span> <span class="st">"1980"</span>,</span>
<span id="cb95-752"><a href="#cb95-752" aria-hidden="true" tabindex="-1"></a>  Year <span class="sc">==</span> <span class="st">"pincome_90"</span> <span class="sc">~</span> <span class="st">"1990"</span>,</span>
<span id="cb95-753"><a href="#cb95-753" aria-hidden="true" tabindex="-1"></a>  Year <span class="sc">==</span> <span class="st">"pincome_00"</span> <span class="sc">~</span> <span class="st">"2000"</span>,</span>
<span id="cb95-754"><a href="#cb95-754" aria-hidden="true" tabindex="-1"></a>  Year <span class="sc">==</span> <span class="st">"pincome_10"</span> <span class="sc">~</span> <span class="st">"2010"</span>,</span>
<span id="cb95-755"><a href="#cb95-755" aria-hidden="true" tabindex="-1"></a>  Year <span class="sc">==</span> <span class="st">"pincome_20"</span> <span class="sc">~</span> <span class="st">"2020"</span>))</span>
<span id="cb95-756"><a href="#cb95-756" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-757"><a href="#cb95-757" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-758"><a href="#cb95-758" aria-hidden="true" tabindex="-1"></a>And use <span class="in">`case_when()`</span> to label the percentage change values using the labels in the Voorhees Center report:</span>
<span id="cb95-759"><a href="#cb95-759" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-762"><a href="#cb95-762" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-763"><a href="#cb95-763" aria-hidden="true" tabindex="-1"></a>nyc_income_long<span class="ot">&lt;-</span>nyc_income_long <span class="sc">|&gt;</span> </span>
<span id="cb95-764"><a href="#cb95-764" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pincome_cat =</span> <span class="fu">case_when</span>(</span>
<span id="cb95-765"><a href="#cb95-765" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome, <span class="sc">-</span><span class="dv">100</span>, <span class="sc">-</span>.<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"Very Low Income"</span>,</span>
<span id="cb95-766"><a href="#cb95-766" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome, <span class="sc">-</span>.<span class="dv">4</span>, <span class="sc">-</span>.<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Low Income"</span>,</span>
<span id="cb95-767"><a href="#cb95-767" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome, <span class="sc">-</span>.<span class="dv">2</span>, .<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Middle Income"</span>,</span>
<span id="cb95-768"><a href="#cb95-768" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome, .<span class="dv">2</span>, .<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"High Income"</span>,</span>
<span id="cb95-769"><a href="#cb95-769" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome, .<span class="dv">4</span>, <span class="dv">100</span>) <span class="sc">~</span> <span class="st">"Very High Income"</span></span>
<span id="cb95-770"><a href="#cb95-770" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb95-771"><a href="#cb95-771" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-772"><a href="#cb95-772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-773"><a href="#cb95-773" aria-hidden="true" tabindex="-1"></a>We're using <span class="in">`case_when()`</span> to find the values in the pre-specified ranges, and then assigning them labels. <span class="in">`between()`</span> conducts a logical test to see whether values fall within a range specified. In the case of "Very Low Income" and "Very High Income" we use really large values to specify the outer bounds that should capture all the values above of below 40 percent.</span>
<span id="cb95-774"><a href="#cb95-774" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-775"><a href="#cb95-775" aria-hidden="true" tabindex="-1"></a>Let's go ahead and count by each year the distribution of values in each category:</span>
<span id="cb95-776"><a href="#cb95-776" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-779"><a href="#cb95-779" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-780"><a href="#cb95-780" aria-hidden="true" tabindex="-1"></a>nyc_income_long <span class="sc">|&gt;</span> </span>
<span id="cb95-781"><a href="#cb95-781" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year, pincome_cat) <span class="sc">|&gt;</span> </span>
<span id="cb95-782"><a href="#cb95-782" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb95-783"><a href="#cb95-783" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Year, <span class="at">values_from =</span> count) <span class="sc">|&gt;</span> </span>
<span id="cb95-784"><a href="#cb95-784" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb95-785"><a href="#cb95-785" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-786"><a href="#cb95-786" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-787"><a href="#cb95-787" aria-hidden="true" tabindex="-1"></a>We used <span class="in">`pivot_wider()`</span> here to make each year into a column and specify that values were coming from the count of census tracts (it will assume that any remaining columns are our identity columns, in this case, the income category).</span>
<span id="cb95-788"><a href="#cb95-788" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-789"><a href="#cb95-789" aria-hidden="true" tabindex="-1"></a>Can you see anything immediately from this table? If you look at middle income tracts, we see a decline in the number. We see more tracts transitioning to the extremes - very high income or very low income.</span>
<span id="cb95-790"><a href="#cb95-790" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-791"><a href="#cb95-791" aria-hidden="true" tabindex="-1"></a>This is already getting interesting. This also corresponds with one of the main findings highlighted by the Voorhees Center:</span>
<span id="cb95-792"><a href="#cb95-792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-793"><a href="#cb95-793" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; As illustrated by our research, between the nearly fifty-year time period, poverty and wealth has substantially increased while middle-income earning populations have largely declined.</span></span>
<span id="cb95-794"><a href="#cb95-794" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-795"><a href="#cb95-795" aria-hidden="true" tabindex="-1"></a>Before we move forward, we can take care of one more technical thing and remove the raw data we worked with using <span class="in">`rm()`</span>.</span>
<span id="cb95-796"><a href="#cb95-796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-799"><a href="#cb95-799" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-800"><a href="#cb95-800" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(F_1970, F_1980, F_1990, F_2000, F_2010, F_2020, S_1970, S_1980, S_1990, S_2000, S_2010, S_2020, inc_70, inc_80, inc_90, inc_00, inc_10, inc_20, pop_70, pop_80, pop_90, pop_00, pop_10, pop_20, income, pop)</span>
<span id="cb95-801"><a href="#cb95-801" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-802"><a href="#cb95-802" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-803"><a href="#cb95-803" aria-hidden="true" tabindex="-1"></a><span class="fu"># Completing Our Time Series</span></span>
<span id="cb95-804"><a href="#cb95-804" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-805"><a href="#cb95-805" aria-hidden="true" tabindex="-1"></a>We currently have data from 1970, 1980, 1990, 2000, 2010 (2012 ACS), and 2020 (2019 ACS). Let's also create indicators comparable to what is in the Who Can Live in Chicago? Report: Race, Age, Disability, Housing, and Employment.</span>
<span id="cb95-806"><a href="#cb95-806" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-807"><a href="#cb95-807" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Race:** Race and Ethnicity (Percent White, Black, Asian, Other, Latinx)</span>
<span id="cb95-808"><a href="#cb95-808" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Age:** Age structure</span>
<span id="cb95-809"><a href="#cb95-809" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Disability:** Population with a disability</span>
<span id="cb95-810"><a href="#cb95-810" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Housing:** Housing tenure (own vs. rent), Housing cost burden (% households paying <span class="sc">\&gt;</span> 30% income towards rent)</span>
<span id="cb95-811"><a href="#cb95-811" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Employment:** Unemployment, Labor Force Participation, Occupation</span>
<span id="cb95-812"><a href="#cb95-812" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-813"><a href="#cb95-813" aria-hidden="true" tabindex="-1"></a>| Census Table                                                                                                                                                                                                                                             | Description               | Indicators to Construct                                   |</span>
<span id="cb95-814"><a href="#cb95-814" aria-hidden="true" tabindex="-1"></a>|-------------------|-------------------|----------------------------------|</span>
<span id="cb95-815"><a href="#cb95-815" aria-hidden="true" tabindex="-1"></a>| <span class="co">[</span><span class="ot">B03002</span><span class="co">](https://data.census.gov/cedsci/table?q=ethnicity&amp;y=2019&amp;d=ACS%205-Year%20Estimates%20Detailed%20Tables&amp;tid=ACSDT5Y2019.B03002)</span>                                                                                                                  | Race and Ethnicity        | \% White, % Black, % Asian, % Other, % Latinx (all races) |</span>
<span id="cb95-816"><a href="#cb95-816" aria-hidden="true" tabindex="-1"></a>| <span class="co">[</span><span class="ot">B01001</span><span class="co">](https://data.census.gov/cedsci/table?q=B01001&amp;y=2019&amp;d=ACS%205-Year%20Estimates%20Detailed%20Tables&amp;tid=ACSDT5Y2019.B01001)</span>                                                                                                                     | Age Structure             | Age 0-19, Age 20-34, Age 35-64, Age 65 up                 |</span>
<span id="cb95-817"><a href="#cb95-817" aria-hidden="true" tabindex="-1"></a>| <span class="co">[</span><span class="ot">B18101</span><span class="co">](https://data.census.gov/cedsci/table?q=age&amp;y=2019&amp;d=ACS%205-Year%20Estimates%20Detailed%20Tables&amp;tid=ACSDT5Y2019.B01001https://data.census.gov/cedsci/table?q=age&amp;y=2019&amp;d=ACS%205-Year%20Estimates%20Detailed%20Tables&amp;tid=ACSDT5Y2019.B01001)</span> | Disability Status         | \% Disabled                                               |</span>
<span id="cb95-818"><a href="#cb95-818" aria-hidden="true" tabindex="-1"></a>| <span class="co">[</span><span class="ot">B25003</span><span class="co">](https://data.census.gov/cedsci/table?q=Owner%2FRenter%20%28Tenure%29&amp;y=2019&amp;d=ACS%205-Year%20Estimates%20Detailed%20Tables&amp;tid=ACSDT5Y2019.B25003&amp;hidePreview=false)</span>                                                                            | Housing Tenure            | \% Renter, % Owner                                        |</span>
<span id="cb95-819"><a href="#cb95-819" aria-hidden="true" tabindex="-1"></a>| <span class="co">[</span><span class="ot">B25106</span><span class="co">](https://data.census.gov/cedsci/table?q=housing%20cost&amp;y=2019&amp;d=ACS%205-Year%20Estimates%20Detailed%20Tables&amp;tid=ACSDT5Y2019.B25106&amp;hidePreview=false)</span>                                                                                           | Housing Cost Burden       | \% Housing Cost Burdened (owners and renters)             |</span>
<span id="cb95-820"><a href="#cb95-820" aria-hidden="true" tabindex="-1"></a>| <span class="co">[</span><span class="ot">B23025</span><span class="co">](https://data.census.gov/cedsci/table?q=labor%20force&amp;y=2019&amp;d=ACS%205-Year%20Estimates%20Detailed%20Tables&amp;tid=ACSDT5Y2019.B23025&amp;hidePreview=false)</span>                                                                                            | Unemployment              | \% Unemployed                                             |</span>
<span id="cb95-821"><a href="#cb95-821" aria-hidden="true" tabindex="-1"></a>| <span class="co">[</span><span class="ot">B23025</span><span class="co">](https://data.census.gov/cedsci/table?q=labor%20force&amp;y=2019&amp;d=ACS%205-Year%20Estimates%20Detailed%20Tables&amp;tid=ACSDT5Y2019.B23025&amp;hidePreview=false)</span>                                                                                            | Labor Force Participation | \% In the Labor Force                                     |</span>
<span id="cb95-822"><a href="#cb95-822" aria-hidden="true" tabindex="-1"></a>| <span class="co">[</span><span class="ot">C24050</span><span class="co">](https://data.census.gov/cedsci/table?q=employment%20by%20industry&amp;y=2019&amp;d=ACS%205-Year%20Estimates%20Detailed%20Tables&amp;tid=ACSDT5Y2019.C24050&amp;hidePreview=false)</span>                                                                               | Employment by Industry    |                                                           |</span>
<span id="cb95-823"><a href="#cb95-823" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-824"><a href="#cb95-824" aria-hidden="true" tabindex="-1"></a><span class="fu">### Race and Ethnicity</span></span>
<span id="cb95-825"><a href="#cb95-825" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-826"><a href="#cb95-826" aria-hidden="true" tabindex="-1"></a>While you're at it, be sure to download population data so you can calculate weighted regional averages.</span>
<span id="cb95-827"><a href="#cb95-827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-830"><a href="#cb95-830" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-831"><a href="#cb95-831" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb95-832"><a href="#cb95-832" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb95-833"><a href="#cb95-833" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb95-834"><a href="#cb95-834" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-835"><a href="#cb95-835" aria-hidden="true" tabindex="-1"></a>acs_race<span class="ot">&lt;-</span><span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">"tract"</span>, <span class="at">state =</span> <span class="st">"NY"</span>, <span class="at">variables =</span> <span class="fu">c</span>(<span class="st">"B03002_001"</span>, <span class="st">"B03002_003"</span>, <span class="st">"B03002_004"</span>, <span class="st">"B03002_006"</span>, <span class="st">"B03002_012"</span>), <span class="at">year =</span> <span class="dv">2019</span>, <span class="at">survey =</span> <span class="st">"acs5"</span>, <span class="at">output =</span> <span class="st">"wide"</span>)  <span class="sc">|&gt;</span> </span>
<span id="cb95-836"><a href="#cb95-836" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb95-837"><a href="#cb95-837" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_White =</span> B03002_003E<span class="sc">/</span>B03002_001E,</span>
<span id="cb95-838"><a href="#cb95-838" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_Black =</span> B03002_004E<span class="sc">/</span>B03002_001E,</span>
<span id="cb95-839"><a href="#cb95-839" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_Asian =</span> B03002_006E<span class="sc">/</span>B03002_001E,</span>
<span id="cb95-840"><a href="#cb95-840" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_Latinx =</span> B03002_012E<span class="sc">/</span>B03002_001E,</span>
<span id="cb95-841"><a href="#cb95-841" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_Other =</span> (B03002_001E <span class="sc">-</span> B03002_003E <span class="sc">-</span> B03002_004E <span class="sc">-</span> B03002_006E <span class="sc">-</span> B03002_012E)<span class="sc">/</span>B03002_001E</span>
<span id="cb95-842"><a href="#cb95-842" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> <span class="fu">select</span>(GEOID, <span class="at">POP19 =</span> B03002_001E, P_White, P_Black, P_Asian, P_Latinx, P_Other)</span>
<span id="cb95-843"><a href="#cb95-843" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-844"><a href="#cb95-844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-845"><a href="#cb95-845" aria-hidden="true" tabindex="-1"></a><span class="fu">### Age Structure</span></span>
<span id="cb95-846"><a href="#cb95-846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-849"><a href="#cb95-849" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-850"><a href="#cb95-850" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb95-851"><a href="#cb95-851" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb95-852"><a href="#cb95-852" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb95-853"><a href="#cb95-853" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-854"><a href="#cb95-854" aria-hidden="true" tabindex="-1"></a>acs_age<span class="ot">&lt;-</span><span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">"tract"</span>, <span class="at">state =</span> <span class="st">"NY"</span>, <span class="at">table =</span> <span class="fu">c</span>(<span class="st">"B01001"</span>), <span class="at">year =</span> <span class="dv">2019</span>, <span class="at">survey =</span> <span class="st">"acs5"</span>, <span class="at">output =</span> <span class="st">"wide"</span>) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb95-855"><a href="#cb95-855" aria-hidden="true" tabindex="-1"></a>  <span class="at">Age_00_19 =</span> B01001_003E<span class="sc">+</span>B01001_004E<span class="sc">+</span>B01001_005E<span class="sc">+</span>B01001_006E<span class="sc">+</span>B01001_007E <span class="sc">+</span> B01001_027E<span class="sc">+</span>B01001_028E<span class="sc">+</span>B01001_029E<span class="sc">+</span>B01001_030E<span class="sc">+</span>B01001_031E,</span>
<span id="cb95-856"><a href="#cb95-856" aria-hidden="true" tabindex="-1"></a>  <span class="at">Age_20_34 =</span> B01001_008E<span class="sc">+</span>B01001_009E<span class="sc">+</span>B01001_010E<span class="sc">+</span>B01001_011E<span class="sc">+</span>B01001_012E<span class="sc">+</span>B01001_032E <span class="sc">+</span>B01001_033E <span class="sc">+</span> B01001_034E <span class="sc">+</span> B01001_035E<span class="sc">+</span> B01001_036E,</span>
<span id="cb95-857"><a href="#cb95-857" aria-hidden="true" tabindex="-1"></a>  <span class="at">Age_35_64 =</span> B01001_013E <span class="sc">+</span>B01001_014E <span class="sc">+</span> B01001_015E <span class="sc">+</span> B01001_016E <span class="sc">+</span> B01001_017E <span class="sc">+</span> B01001_018E <span class="sc">+</span> B01001_019E <span class="sc">+</span> B01001_037E <span class="sc">+</span> B01001_038E <span class="sc">+</span> B01001_039E <span class="sc">+</span> B01001_040E<span class="sc">+</span>B01001_041E<span class="sc">+</span>B01001_042E<span class="sc">+</span>B01001_043E,</span>
<span id="cb95-858"><a href="#cb95-858" aria-hidden="true" tabindex="-1"></a>  <span class="at">Age_65up =</span> B01001_020E <span class="sc">+</span> B01001_021E <span class="sc">+</span> B01001_022E <span class="sc">+</span> B01001_023E <span class="sc">+</span> B01001_024E <span class="sc">+</span>B01001_025E <span class="sc">+</span> B01001_044E <span class="sc">+</span> B01001_045E <span class="sc">+</span> B01001_046E <span class="sc">+</span> B01001_047E <span class="sc">+</span> B01001_048E <span class="sc">+</span>B01001_049E</span>
<span id="cb95-859"><a href="#cb95-859" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> <span class="fu">select</span>(GEOID, Age_00_19, Age_20_34, Age_35_64, Age_65up)</span>
<span id="cb95-860"><a href="#cb95-860" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-861"><a href="#cb95-861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-862"><a href="#cb95-862" aria-hidden="true" tabindex="-1"></a><span class="fu">### Disability Status</span></span>
<span id="cb95-863"><a href="#cb95-863" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-866"><a href="#cb95-866" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-867"><a href="#cb95-867" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb95-868"><a href="#cb95-868" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb95-869"><a href="#cb95-869" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb95-870"><a href="#cb95-870" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-871"><a href="#cb95-871" aria-hidden="true" tabindex="-1"></a>acs_disability<span class="ot">&lt;-</span><span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">"tract"</span>, <span class="at">state =</span> <span class="st">"NY"</span>, <span class="at">table =</span> <span class="fu">c</span>(<span class="st">"B18101"</span>), <span class="at">year =</span> <span class="dv">2019</span>, <span class="at">survey =</span> <span class="st">"acs5"</span>, <span class="at">output =</span> <span class="st">"wide"</span>)  <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb95-872"><a href="#cb95-872" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_Disabled =</span> (B18101_004E <span class="sc">+</span> B18101_007E <span class="sc">+</span> B18101_010E<span class="sc">+</span>B18101_013E<span class="sc">+</span>B18101_016E<span class="sc">+</span>B18101_019E<span class="sc">+</span>B18101_023E<span class="sc">+</span>B18101_026E<span class="sc">+</span>B18101_029E<span class="sc">+</span>B18101_032E<span class="sc">+</span>B18101_035E<span class="sc">+</span>B18101_038E)<span class="sc">/</span>B18101_001E</span>
<span id="cb95-873"><a href="#cb95-873" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> <span class="fu">select</span>(GEOID, P_Disabled)</span>
<span id="cb95-874"><a href="#cb95-874" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-875"><a href="#cb95-875" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-876"><a href="#cb95-876" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-877"><a href="#cb95-877" aria-hidden="true" tabindex="-1"></a><span class="fu">### Housing Tenure</span></span>
<span id="cb95-878"><a href="#cb95-878" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-881"><a href="#cb95-881" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-882"><a href="#cb95-882" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb95-883"><a href="#cb95-883" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb95-884"><a href="#cb95-884" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb95-885"><a href="#cb95-885" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-886"><a href="#cb95-886" aria-hidden="true" tabindex="-1"></a>acs_tenure<span class="ot">&lt;-</span><span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">"tract"</span>, <span class="at">state =</span> <span class="st">"NY"</span>, <span class="at">table =</span> <span class="fu">c</span>(<span class="st">"B25003"</span>), <span class="at">year =</span> <span class="dv">2019</span>, <span class="at">survey =</span> <span class="st">"acs5"</span>, <span class="at">output =</span> <span class="st">"wide"</span>)  <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb95-887"><a href="#cb95-887" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_Own =</span>B25003_002E<span class="sc">/</span>B25003_001E,</span>
<span id="cb95-888"><a href="#cb95-888" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_Rent =</span> B25003_003E<span class="sc">/</span>B25003_001E) <span class="sc">|&gt;</span> <span class="fu">select</span>(GEOID, P_Own, P_Rent)</span>
<span id="cb95-889"><a href="#cb95-889" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-890"><a href="#cb95-890" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-891"><a href="#cb95-891" aria-hidden="true" tabindex="-1"></a><span class="fu">### Housing Cost Burden</span></span>
<span id="cb95-892"><a href="#cb95-892" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-895"><a href="#cb95-895" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-896"><a href="#cb95-896" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb95-897"><a href="#cb95-897" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb95-898"><a href="#cb95-898" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb95-899"><a href="#cb95-899" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-900"><a href="#cb95-900" aria-hidden="true" tabindex="-1"></a>acs_cost<span class="ot">&lt;-</span><span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">"tract"</span>, <span class="at">state =</span> <span class="st">"NY"</span>, <span class="at">table =</span> <span class="fu">c</span>(<span class="st">"B25106"</span>), <span class="at">year =</span> <span class="dv">2019</span>, <span class="at">survey =</span> <span class="st">"acs5"</span>, <span class="at">output =</span> <span class="st">"wide"</span>)  <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb95-901"><a href="#cb95-901" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_CostBurden =</span> (B25106_006E <span class="sc">+</span> B25106_010E <span class="sc">+</span>B25106_014E <span class="sc">+</span> B25106_018E <span class="sc">+</span> B25106_022E <span class="sc">+</span> B25106_028E <span class="sc">+</span> B25106_032E <span class="sc">+</span> B25106_036E <span class="sc">+</span> B25106_040E<span class="sc">+</span>B25106_044E)<span class="sc">/</span>B25106_001E</span>
<span id="cb95-902"><a href="#cb95-902" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> <span class="fu">select</span>(GEOID, P_CostBurden)</span>
<span id="cb95-903"><a href="#cb95-903" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-904"><a href="#cb95-904" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-905"><a href="#cb95-905" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-906"><a href="#cb95-906" aria-hidden="true" tabindex="-1"></a><span class="fu">### Labor Force Participation / Unemployment</span></span>
<span id="cb95-907"><a href="#cb95-907" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-910"><a href="#cb95-910" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-911"><a href="#cb95-911" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb95-912"><a href="#cb95-912" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb95-913"><a href="#cb95-913" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb95-914"><a href="#cb95-914" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-915"><a href="#cb95-915" aria-hidden="true" tabindex="-1"></a>acs_labor<span class="ot">&lt;-</span><span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">"tract"</span>, <span class="at">state =</span> <span class="st">"NY"</span>, <span class="at">table =</span> <span class="fu">c</span>(<span class="st">"B23025"</span>), <span class="at">year =</span> <span class="dv">2019</span>, <span class="at">survey =</span> <span class="st">"acs5"</span>, <span class="at">output =</span> <span class="st">"wide"</span>)  <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb95-916"><a href="#cb95-916" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_Unemp =</span> B23025_005E<span class="sc">/</span>B23025_002E,</span>
<span id="cb95-917"><a href="#cb95-917" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_LabForce =</span> B23025_002E<span class="sc">/</span>B23025_001E</span>
<span id="cb95-918"><a href="#cb95-918" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> <span class="fu">select</span>(GEOID, P_Unemp, P_LabForce)</span>
<span id="cb95-919"><a href="#cb95-919" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-920"><a href="#cb95-920" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-921"><a href="#cb95-921" aria-hidden="true" tabindex="-1"></a><span class="fu">### Employment by Industry</span></span>
<span id="cb95-922"><a href="#cb95-922" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-925"><a href="#cb95-925" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-926"><a href="#cb95-926" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb95-927"><a href="#cb95-927" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: false</span></span>
<span id="cb95-928"><a href="#cb95-928" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb95-929"><a href="#cb95-929" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-930"><a href="#cb95-930" aria-hidden="true" tabindex="-1"></a>acs_employment<span class="ot">&lt;-</span><span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">"tract"</span>, <span class="at">state =</span> <span class="st">"NY"</span>, <span class="at">table =</span> <span class="fu">c</span>(<span class="st">"C24050"</span>), <span class="at">year =</span> <span class="dv">2019</span>, <span class="at">survey =</span> <span class="st">"acs5"</span>, <span class="at">output =</span> <span class="st">"wide"</span>)  <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">P_Emp_Ag =</span> C24050_002E<span class="sc">/</span>C24050_001E,</span>
<span id="cb95-931"><a href="#cb95-931" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Const =</span> C24050_003E<span class="sc">/</span>C24050_001E,</span>
<span id="cb95-932"><a href="#cb95-932" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Manuf =</span> C24050_004E<span class="sc">/</span>C24050_001E,</span>
<span id="cb95-933"><a href="#cb95-933" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Wholesale =</span> C24050_005E<span class="sc">/</span>C24050_001E,</span>
<span id="cb95-934"><a href="#cb95-934" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Retail =</span> C24050_006E<span class="sc">/</span>C24050_001E,</span>
<span id="cb95-935"><a href="#cb95-935" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Transportation =</span> C24050_007E <span class="sc">/</span> C24050_001E,</span>
<span id="cb95-936"><a href="#cb95-936" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Information =</span> C24050_008E <span class="sc">/</span> C24050_001E,</span>
<span id="cb95-937"><a href="#cb95-937" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_FIRE =</span> C24050_009E <span class="sc">/</span> C24050_001E,</span>
<span id="cb95-938"><a href="#cb95-938" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Management =</span> C24050_010E <span class="sc">/</span> C24050_001E,</span>
<span id="cb95-939"><a href="#cb95-939" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Education =</span> C24050_011E <span class="sc">/</span> C24050_001E,</span>
<span id="cb95-940"><a href="#cb95-940" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Arts =</span> C24050_012E <span class="sc">/</span> C24050_001E,</span>
<span id="cb95-941"><a href="#cb95-941" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Other =</span> C24050_013E <span class="sc">/</span> C24050_001E,</span>
<span id="cb95-942"><a href="#cb95-942" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_PA =</span> C24050_014E <span class="sc">/</span> C24050_001E</span>
<span id="cb95-943"><a href="#cb95-943" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> <span class="fu">select</span>(GEOID, P_Emp_Ag, P_Emp_Const, P_Emp_Manuf, P_Emp_Wholesale, P_Emp_Retail, P_Emp_Transportation, P_Emp_FIRE, P_Emp_Management, P_Emp_Education,P_Emp_Arts, P_Emp_Other, P_Emp_PA)</span>
<span id="cb95-944"><a href="#cb95-944" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-945"><a href="#cb95-945" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-946"><a href="#cb95-946" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-947"><a href="#cb95-947" aria-hidden="true" tabindex="-1"></a><span class="fu">### Join ACS Data</span></span>
<span id="cb95-948"><a href="#cb95-948" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-949"><a href="#cb95-949" aria-hidden="true" tabindex="-1"></a>Now that we've downloaded your 2019 5-year ACS data, let's join the downloaded tables together. We will ultimately join this to our other income data.</span>
<span id="cb95-950"><a href="#cb95-950" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-953"><a href="#cb95-953" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-954"><a href="#cb95-954" aria-hidden="true" tabindex="-1"></a>acs_19<span class="ot">&lt;-</span><span class="fu">left_join</span>(acs_age, acs_cost, <span class="at">by=</span><span class="st">"GEOID"</span>)</span>
<span id="cb95-955"><a href="#cb95-955" aria-hidden="true" tabindex="-1"></a>acs_19<span class="ot">&lt;-</span><span class="fu">left_join</span>(acs_19, acs_disability, <span class="at">by=</span><span class="st">"GEOID"</span>)</span>
<span id="cb95-956"><a href="#cb95-956" aria-hidden="true" tabindex="-1"></a>acs_19<span class="ot">&lt;-</span><span class="fu">left_join</span>(acs_19, acs_employment, <span class="at">by=</span><span class="st">"GEOID"</span>)</span>
<span id="cb95-957"><a href="#cb95-957" aria-hidden="true" tabindex="-1"></a>acs_19<span class="ot">&lt;-</span><span class="fu">left_join</span>(acs_19, acs_labor, <span class="at">by=</span><span class="st">"GEOID"</span>)</span>
<span id="cb95-958"><a href="#cb95-958" aria-hidden="true" tabindex="-1"></a>acs_19<span class="ot">&lt;-</span><span class="fu">left_join</span>(acs_19, acs_race, <span class="at">by=</span><span class="st">"GEOID"</span>)</span>
<span id="cb95-959"><a href="#cb95-959" aria-hidden="true" tabindex="-1"></a>acs_19<span class="ot">&lt;-</span><span class="fu">left_join</span>(acs_19, acs_tenure, <span class="at">by=</span><span class="st">"GEOID"</span>)</span>
<span id="cb95-960"><a href="#cb95-960" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-961"><a href="#cb95-961" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-964"><a href="#cb95-964" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-965"><a href="#cb95-965" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb95-966"><a href="#cb95-966" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(acs_age, acs_cost, acs_disability, acs_employment, acs_labor, acs_race, acs_tenure)</span>
<span id="cb95-967"><a href="#cb95-967" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-968"><a href="#cb95-968" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-969"><a href="#cb95-969" aria-hidden="true" tabindex="-1"></a><span class="fu">## Moving Forward with our Three Cities Analysis</span></span>
<span id="cb95-970"><a href="#cb95-970" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-971"><a href="#cb95-971" aria-hidden="true" tabindex="-1"></a><span class="fu">### Join ACS Data to our Income Data</span></span>
<span id="cb95-972"><a href="#cb95-972" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-973"><a href="#cb95-973" aria-hidden="true" tabindex="-1"></a>Let's next join our "new" ACS data to our prior income data. Let's join to our chi_income (as opposed to chi_income_long data):</span>
<span id="cb95-974"><a href="#cb95-974" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-977"><a href="#cb95-977" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-978"><a href="#cb95-978" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="ot">&lt;-</span> <span class="fu">left_join</span>(nyc_income, acs_19, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"TRTID10"</span> <span class="ot">=</span> <span class="st">"GEOID"</span>))</span>
<span id="cb95-979"><a href="#cb95-979" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-980"><a href="#cb95-980" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-981"><a href="#cb95-981" aria-hidden="true" tabindex="-1"></a><span class="fu">### Re-Create Income Categories in Wide-Format data</span></span>
<span id="cb95-982"><a href="#cb95-982" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-983"><a href="#cb95-983" aria-hidden="true" tabindex="-1"></a>Previously, we created income category labels in our long-format version of the nyc_income data. This time, let's do the same thing in the wide format data.</span>
<span id="cb95-984"><a href="#cb95-984" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-987"><a href="#cb95-987" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-988"><a href="#cb95-988" aria-hidden="true" tabindex="-1"></a>nyc_income<span class="ot">&lt;-</span>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb95-989"><a href="#cb95-989" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb95-990"><a href="#cb95-990" aria-hidden="true" tabindex="-1"></a>    <span class="at">pincome_70 =</span> <span class="fu">case_when</span>(</span>
<span id="cb95-991"><a href="#cb95-991" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_70, <span class="sc">-</span><span class="dv">100</span>, <span class="sc">-</span>.<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"Very Low Income"</span>,</span>
<span id="cb95-992"><a href="#cb95-992" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_70, <span class="sc">-</span>.<span class="dv">4</span>, <span class="sc">-</span>.<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Low Income"</span>,</span>
<span id="cb95-993"><a href="#cb95-993" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_70, <span class="sc">-</span>.<span class="dv">2</span>, .<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Middle Income"</span>,</span>
<span id="cb95-994"><a href="#cb95-994" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_70, .<span class="dv">2</span>, .<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"High Income"</span>,</span>
<span id="cb95-995"><a href="#cb95-995" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_70, .<span class="dv">4</span>, <span class="dv">100</span>) <span class="sc">~</span> <span class="st">"Very High Income"</span></span>
<span id="cb95-996"><a href="#cb95-996" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb95-997"><a href="#cb95-997" aria-hidden="true" tabindex="-1"></a>  <span class="at">pincome_80 =</span> <span class="fu">case_when</span>(</span>
<span id="cb95-998"><a href="#cb95-998" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_80, <span class="sc">-</span><span class="dv">100</span>, <span class="sc">-</span>.<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"Very Low Income"</span>,</span>
<span id="cb95-999"><a href="#cb95-999" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_80, <span class="sc">-</span>.<span class="dv">4</span>, <span class="sc">-</span>.<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Low Income"</span>,</span>
<span id="cb95-1000"><a href="#cb95-1000" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_80, <span class="sc">-</span>.<span class="dv">2</span>, .<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Middle Income"</span>,</span>
<span id="cb95-1001"><a href="#cb95-1001" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_80, .<span class="dv">2</span>, .<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"High Income"</span>,</span>
<span id="cb95-1002"><a href="#cb95-1002" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_80, .<span class="dv">4</span>, <span class="dv">100</span>) <span class="sc">~</span> <span class="st">"Very High Income"</span></span>
<span id="cb95-1003"><a href="#cb95-1003" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb95-1004"><a href="#cb95-1004" aria-hidden="true" tabindex="-1"></a>    <span class="at">pincome_90 =</span> <span class="fu">case_when</span>(</span>
<span id="cb95-1005"><a href="#cb95-1005" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_90, <span class="sc">-</span><span class="dv">100</span>, <span class="sc">-</span>.<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"Very Low Income"</span>,</span>
<span id="cb95-1006"><a href="#cb95-1006" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_90, <span class="sc">-</span>.<span class="dv">4</span>, <span class="sc">-</span>.<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Low Income"</span>,</span>
<span id="cb95-1007"><a href="#cb95-1007" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_90, <span class="sc">-</span>.<span class="dv">2</span>, .<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Middle Income"</span>,</span>
<span id="cb95-1008"><a href="#cb95-1008" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_90, .<span class="dv">2</span>, .<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"High Income"</span>,</span>
<span id="cb95-1009"><a href="#cb95-1009" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_90, .<span class="dv">4</span>, <span class="dv">100</span>) <span class="sc">~</span> <span class="st">"Very High Income"</span></span>
<span id="cb95-1010"><a href="#cb95-1010" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb95-1011"><a href="#cb95-1011" aria-hidden="true" tabindex="-1"></a>    <span class="at">pincome_00 =</span> <span class="fu">case_when</span>(</span>
<span id="cb95-1012"><a href="#cb95-1012" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_00, <span class="sc">-</span><span class="dv">100</span>, <span class="sc">-</span>.<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"Very Low Income"</span>,</span>
<span id="cb95-1013"><a href="#cb95-1013" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_00, <span class="sc">-</span>.<span class="dv">4</span>, <span class="sc">-</span>.<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Low Income"</span>,</span>
<span id="cb95-1014"><a href="#cb95-1014" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_00, <span class="sc">-</span>.<span class="dv">2</span>, .<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Middle Income"</span>,</span>
<span id="cb95-1015"><a href="#cb95-1015" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_00, .<span class="dv">2</span>, .<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"High Income"</span>,</span>
<span id="cb95-1016"><a href="#cb95-1016" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_00, .<span class="dv">4</span>, <span class="dv">100</span>) <span class="sc">~</span> <span class="st">"Very High Income"</span></span>
<span id="cb95-1017"><a href="#cb95-1017" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb95-1018"><a href="#cb95-1018" aria-hidden="true" tabindex="-1"></a>    <span class="at">pincome_10 =</span> <span class="fu">case_when</span>(</span>
<span id="cb95-1019"><a href="#cb95-1019" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_10, <span class="sc">-</span><span class="dv">100</span>, <span class="sc">-</span>.<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"Very Low Income"</span>,</span>
<span id="cb95-1020"><a href="#cb95-1020" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_10, <span class="sc">-</span>.<span class="dv">4</span>, <span class="sc">-</span>.<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Low Income"</span>,</span>
<span id="cb95-1021"><a href="#cb95-1021" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_10, <span class="sc">-</span>.<span class="dv">2</span>, .<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Middle Income"</span>,</span>
<span id="cb95-1022"><a href="#cb95-1022" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_10, .<span class="dv">2</span>, .<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"High Income"</span>,</span>
<span id="cb95-1023"><a href="#cb95-1023" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_10, .<span class="dv">4</span>, <span class="dv">100</span>) <span class="sc">~</span> <span class="st">"Very High Income"</span></span>
<span id="cb95-1024"><a href="#cb95-1024" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb95-1025"><a href="#cb95-1025" aria-hidden="true" tabindex="-1"></a>    <span class="at">pincome_20 =</span> <span class="fu">case_when</span>(</span>
<span id="cb95-1026"><a href="#cb95-1026" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_20, <span class="sc">-</span><span class="dv">100</span>, <span class="sc">-</span>.<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"Very Low Income"</span>,</span>
<span id="cb95-1027"><a href="#cb95-1027" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_20, <span class="sc">-</span>.<span class="dv">4</span>, <span class="sc">-</span>.<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Low Income"</span>,</span>
<span id="cb95-1028"><a href="#cb95-1028" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_20, <span class="sc">-</span>.<span class="dv">2</span>, .<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Middle Income"</span>,</span>
<span id="cb95-1029"><a href="#cb95-1029" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_20, .<span class="dv">2</span>, .<span class="dv">4</span>) <span class="sc">~</span> <span class="st">"High Income"</span>,</span>
<span id="cb95-1030"><a href="#cb95-1030" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pincome_20, .<span class="dv">4</span>, <span class="dv">100</span>) <span class="sc">~</span> <span class="st">"Very High Income"</span></span>
<span id="cb95-1031"><a href="#cb95-1031" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb95-1032"><a href="#cb95-1032" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb95-1033"><a href="#cb95-1033" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-1034"><a href="#cb95-1034" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1035"><a href="#cb95-1035" aria-hidden="true" tabindex="-1"></a><span class="fu">### Calculate Three Cities Categories</span></span>
<span id="cb95-1036"><a href="#cb95-1036" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1037"><a href="#cb95-1037" aria-hidden="true" tabindex="-1"></a>If you look on the "Three Cities" tab on the Voorhees website, you'll note that they separate tracts based upon the change in income between 1970 and the most recent time period (they use 2016 but we'll use 2019). Let's go ahead and calculate that change as well as the categorization of each census tract:</span>
<span id="cb95-1038"><a href="#cb95-1038" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1041"><a href="#cb95-1041" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-1042"><a href="#cb95-1042" aria-hidden="true" tabindex="-1"></a>nyc_income<span class="ot">&lt;-</span>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb95-1043"><a href="#cb95-1043" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pchange_70.19 =</span> (INCPC19 <span class="sc">-</span> INCPC70)<span class="sc">/</span>INCPC70)</span>
<span id="cb95-1044"><a href="#cb95-1044" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-1045"><a href="#cb95-1045" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1046"><a href="#cb95-1046" aria-hidden="true" tabindex="-1"></a>And once we calculate this, we can assign each tract to which "City" it belongs to based upon the change in income between 1970 and 2019:</span>
<span id="cb95-1047"><a href="#cb95-1047" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1050"><a href="#cb95-1050" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-1051"><a href="#cb95-1051" aria-hidden="true" tabindex="-1"></a>nyc_income<span class="ot">&lt;-</span>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb95-1052"><a href="#cb95-1052" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">change_cat_70.19 =</span> <span class="fu">case_when</span>(</span>
<span id="cb95-1053"><a href="#cb95-1053" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pchange_70<span class="fl">.19</span>, .<span class="dv">2</span>, <span class="dv">100</span>) <span class="sc">~</span> <span class="st">"City 1 - Growing"</span>,</span>
<span id="cb95-1054"><a href="#cb95-1054" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pchange_70<span class="fl">.19</span>, <span class="sc">-</span>.<span class="dv">2</span>, .<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"City 2 - Middle"</span>,</span>
<span id="cb95-1055"><a href="#cb95-1055" aria-hidden="true" tabindex="-1"></a>    <span class="fu">between</span>(pchange_70<span class="fl">.19</span>,  <span class="sc">-</span><span class="dv">100</span>, <span class="sc">-</span>.<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"City 3 - Shrinking"</span>,</span>
<span id="cb95-1056"><a href="#cb95-1056" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(pchange_70<span class="fl">.19</span>) <span class="sc">==</span> <span class="st">"TRUE"</span> <span class="sc">~</span> <span class="st">"Uncategorized"</span>,</span>
<span id="cb95-1057"><a href="#cb95-1057" aria-hidden="true" tabindex="-1"></a>    pchange_70<span class="fl">.19</span> <span class="sc">==</span> <span class="cn">Inf</span> <span class="sc">~</span> <span class="st">"Uncategorized"</span>)</span>
<span id="cb95-1058"><a href="#cb95-1058" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb95-1059"><a href="#cb95-1059" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-1060"><a href="#cb95-1060" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1061"><a href="#cb95-1061" aria-hidden="true" tabindex="-1"></a>We have a small proportion of tracts which are ultimately not characterized because they are missing data for either 1970 or 2020. We can label these as uncategorized so that we can compare them and understand how they may be different from tracts whoch area assigned to a change type.</span>
<span id="cb95-1062"><a href="#cb95-1062" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1063"><a href="#cb95-1063" aria-hidden="true" tabindex="-1"></a>With this done, we can now develop some descriptives to help us understand differences between our three cities.</span>
<span id="cb95-1064"><a href="#cb95-1064" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1065"><a href="#cb95-1065" aria-hidden="true" tabindex="-1"></a><span class="fu">## Describing Out Three Cities</span></span>
<span id="cb95-1066"><a href="#cb95-1066" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1067"><a href="#cb95-1067" aria-hidden="true" tabindex="-1"></a>Following the descriptions provided on the Voorhees Center's <span class="co">[</span><span class="ot">three cities study site</span><span class="co">](https://voorheescenter.uic.edu/chicago_communities/)</span>, let's systematically describe New York's neighborhoods based upon change in income.</span>
<span id="cb95-1068"><a href="#cb95-1068" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1069"><a href="#cb95-1069" aria-hidden="true" tabindex="-1"></a><span class="fu">### How Many Tracts? How Many People?</span></span>
<span id="cb95-1070"><a href="#cb95-1070" aria-hidden="true" tabindex="-1"></a>Looking at the first tab in the Voorhees report, we need to describe how many tracts and how many people fall within each city.</span>
<span id="cb95-1071"><a href="#cb95-1071" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1072"><a href="#cb95-1072" aria-hidden="true" tabindex="-1"></a><span class="al">![](08_neighborhood_change/images/03_NVC_Three_Cities.png)</span></span>
<span id="cb95-1073"><a href="#cb95-1073" aria-hidden="true" tabindex="-1"></a>Start by counting how many tracts there are in each city and how many people lived in each city in 2019. Use <span class="in">`group_by()`</span> and <span class="in">`summarise()`</span> to accomplish this.</span>
<span id="cb95-1074"><a href="#cb95-1074" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1077"><a href="#cb95-1077" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-1078"><a href="#cb95-1078" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb95-1079"><a href="#cb95-1079" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(change_cat_70<span class="fl">.19</span>) <span class="sc">|&gt;</span> </span>
<span id="cb95-1080"><a href="#cb95-1080" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Tracts =</span> <span class="fu">n</span>(), <span class="at">Population =</span> <span class="fu">sum</span>(POP19, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb95-1081"><a href="#cb95-1081" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb95-1082"><a href="#cb95-1082" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="dv">3</span>, <span class="at">decimals =</span> <span class="dv">0</span>)</span>
<span id="cb95-1083"><a href="#cb95-1083" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-1084"><a href="#cb95-1084" aria-hidden="true" tabindex="-1"></a>We can see the split in 2019 population between growing, middle and shrinking places. We have 65 tracts which are unclassified with a population of around 42,565.</span>
<span id="cb95-1085"><a href="#cb95-1085" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1086"><a href="#cb95-1086" aria-hidden="true" tabindex="-1"></a><span class="fu">### Race</span></span>
<span id="cb95-1087"><a href="#cb95-1087" aria-hidden="true" tabindex="-1"></a>The next pane in the Voorhees analysis summarizes each city based upon it's racial composition:</span>
<span id="cb95-1088"><a href="#cb95-1088" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1089"><a href="#cb95-1089" aria-hidden="true" tabindex="-1"></a><span class="al">![](08_neighborhood_change/images/05_Race.png)</span></span>
<span id="cb95-1090"><a href="#cb95-1090" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1091"><a href="#cb95-1091" aria-hidden="true" tabindex="-1"></a>Let's develop a table that does the same:</span>
<span id="cb95-1092"><a href="#cb95-1092" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1095"><a href="#cb95-1095" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-1096"><a href="#cb95-1096" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb95-1097"><a href="#cb95-1097" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(change_cat_70<span class="fl">.19</span>) <span class="sc">|&gt;</span> </span>
<span id="cb95-1098"><a href="#cb95-1098" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb95-1099"><a href="#cb95-1099" aria-hidden="true" tabindex="-1"></a><span class="at">Tracts =</span> <span class="fu">n</span>(), </span>
<span id="cb95-1100"><a href="#cb95-1100" aria-hidden="true" tabindex="-1"></a><span class="at">PWhite =</span> <span class="fu">mean</span>(P_White, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1101"><a href="#cb95-1101" aria-hidden="true" tabindex="-1"></a><span class="at">PBlack =</span> <span class="fu">mean</span>(P_Black, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1102"><a href="#cb95-1102" aria-hidden="true" tabindex="-1"></a><span class="at">PAsian =</span> <span class="fu">mean</span>(P_Asian, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1103"><a href="#cb95-1103" aria-hidden="true" tabindex="-1"></a><span class="at">PLatinx =</span> <span class="fu">mean</span>(P_Latinx, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1104"><a href="#cb95-1104" aria-hidden="true" tabindex="-1"></a><span class="at">POther =</span> <span class="fu">mean</span>(P_Other, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb95-1105"><a href="#cb95-1105" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb95-1106"><a href="#cb95-1106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb95-1107"><a href="#cb95-1107" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>, <span class="at">decimals =</span> <span class="dv">1</span>)</span>
<span id="cb95-1108"><a href="#cb95-1108" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-1109"><a href="#cb95-1109" aria-hidden="true" tabindex="-1"></a>We might also want to revisit our based LTDB data so that we can describe change in racial composition for each city over time.</span>
<span id="cb95-1110"><a href="#cb95-1110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1111"><a href="#cb95-1111" aria-hidden="true" tabindex="-1"></a><span class="fu">### Age</span></span>
<span id="cb95-1112"><a href="#cb95-1112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1113"><a href="#cb95-1113" aria-hidden="true" tabindex="-1"></a>We will next summarize each of the three cities by their age composition. Consider calculating percentages in addition to reporting the population counts.</span>
<span id="cb95-1114"><a href="#cb95-1114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1115"><a href="#cb95-1115" aria-hidden="true" tabindex="-1"></a><span class="al">![](08_neighborhood_change/images/06_Age.png)</span></span>
<span id="cb95-1116"><a href="#cb95-1116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1119"><a href="#cb95-1119" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-1120"><a href="#cb95-1120" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb95-1121"><a href="#cb95-1121" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(change_cat_70<span class="fl">.19</span>) <span class="sc">|&gt;</span> </span>
<span id="cb95-1122"><a href="#cb95-1122" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb95-1123"><a href="#cb95-1123" aria-hidden="true" tabindex="-1"></a><span class="at">Tracts =</span> <span class="fu">n</span>(), </span>
<span id="cb95-1124"><a href="#cb95-1124" aria-hidden="true" tabindex="-1"></a><span class="at">PopTot =</span> <span class="fu">sum</span>(POP19, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1125"><a href="#cb95-1125" aria-hidden="true" tabindex="-1"></a><span class="at">Age_00_19 =</span> <span class="fu">sum</span>(Age_00_19, <span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">/</span><span class="fu">sum</span>(POP19, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1126"><a href="#cb95-1126" aria-hidden="true" tabindex="-1"></a><span class="at">Age_20_34 =</span> <span class="fu">sum</span>(Age_20_34, <span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">/</span><span class="fu">sum</span>(POP19, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1127"><a href="#cb95-1127" aria-hidden="true" tabindex="-1"></a><span class="at">Age_35_64 =</span> <span class="fu">sum</span>(Age_35_64, <span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">/</span><span class="fu">sum</span>(POP19, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1128"><a href="#cb95-1128" aria-hidden="true" tabindex="-1"></a><span class="at">Age_65up =</span> <span class="fu">sum</span>(Age_65up, <span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">/</span><span class="fu">sum</span>(POP19, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb95-1129"><a href="#cb95-1129" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb95-1130"><a href="#cb95-1130" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb95-1131"><a href="#cb95-1131" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb95-1132"><a href="#cb95-1132" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">7</span>, <span class="at">decimals =</span> <span class="dv">1</span>)</span>
<span id="cb95-1133"><a href="#cb95-1133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1134"><a href="#cb95-1134" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-1135"><a href="#cb95-1135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1136"><a href="#cb95-1136" aria-hidden="true" tabindex="-1"></a><span class="fu">### Disability</span></span>
<span id="cb95-1137"><a href="#cb95-1137" aria-hidden="true" tabindex="-1"></a>Next up, we'll examine disability, primarily be calculating the average share of each city that is disabled.</span>
<span id="cb95-1138"><a href="#cb95-1138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1139"><a href="#cb95-1139" aria-hidden="true" tabindex="-1"></a><span class="al">![](08_neighborhood_change/images/07_Disability.png)</span></span>
<span id="cb95-1140"><a href="#cb95-1140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1143"><a href="#cb95-1143" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-1144"><a href="#cb95-1144" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb95-1145"><a href="#cb95-1145" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(change_cat_70<span class="fl">.19</span>) <span class="sc">|&gt;</span> </span>
<span id="cb95-1146"><a href="#cb95-1146" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb95-1147"><a href="#cb95-1147" aria-hidden="true" tabindex="-1"></a><span class="at">Tracts =</span> <span class="fu">n</span>(), </span>
<span id="cb95-1148"><a href="#cb95-1148" aria-hidden="true" tabindex="-1"></a><span class="at">P_Disabled =</span> <span class="fu">mean</span>(P_Disabled, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb95-1149"><a href="#cb95-1149" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb95-1150"><a href="#cb95-1150" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb95-1151"><a href="#cb95-1151" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(<span class="dv">3</span>, <span class="at">decimals =</span> <span class="dv">1</span>)</span>
<span id="cb95-1152"><a href="#cb95-1152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1153"><a href="#cb95-1153" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-1154"><a href="#cb95-1154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1155"><a href="#cb95-1155" aria-hidden="true" tabindex="-1"></a><span class="fu">### Housing</span></span>
<span id="cb95-1156"><a href="#cb95-1156" aria-hidden="true" tabindex="-1"></a>Next up, we'll look at housing tenure (the balance between owners and renters), as well as cost burden (the share of households paying more than 30 percent of their income towards housing costs.</span>
<span id="cb95-1157"><a href="#cb95-1157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1158"><a href="#cb95-1158" aria-hidden="true" tabindex="-1"></a><span class="al">![](08_neighborhood_change/images/08_Housing.png)</span></span>
<span id="cb95-1159"><a href="#cb95-1159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1162"><a href="#cb95-1162" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-1163"><a href="#cb95-1163" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb95-1164"><a href="#cb95-1164" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(change_cat_70<span class="fl">.19</span>) <span class="sc">|&gt;</span> </span>
<span id="cb95-1165"><a href="#cb95-1165" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb95-1166"><a href="#cb95-1166" aria-hidden="true" tabindex="-1"></a><span class="at">Tracts =</span> <span class="fu">n</span>(), </span>
<span id="cb95-1167"><a href="#cb95-1167" aria-hidden="true" tabindex="-1"></a><span class="at">P_Own =</span> <span class="fu">mean</span>(P_Own, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1168"><a href="#cb95-1168" aria-hidden="true" tabindex="-1"></a><span class="at">P_Rent =</span> <span class="fu">mean</span>(P_Rent, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1169"><a href="#cb95-1169" aria-hidden="true" tabindex="-1"></a><span class="at">P_CostBurden =</span> <span class="fu">mean</span>(P_CostBurden, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb95-1170"><a href="#cb95-1170" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb95-1171"><a href="#cb95-1171" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb95-1172"><a href="#cb95-1172" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">decimals =</span> <span class="dv">1</span>)</span>
<span id="cb95-1173"><a href="#cb95-1173" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-1174"><a href="#cb95-1174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1175"><a href="#cb95-1175" aria-hidden="true" tabindex="-1"></a><span class="fu">### Employment</span></span>
<span id="cb95-1176"><a href="#cb95-1176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1177"><a href="#cb95-1177" aria-hidden="true" tabindex="-1"></a>Let's finally calculate labor force participation and unemployment by city.</span>
<span id="cb95-1178"><a href="#cb95-1178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1179"><a href="#cb95-1179" aria-hidden="true" tabindex="-1"></a><span class="al">![](08_neighborhood_change/images/09_Labor.png)</span></span>
<span id="cb95-1180"><a href="#cb95-1180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1183"><a href="#cb95-1183" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-1184"><a href="#cb95-1184" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb95-1185"><a href="#cb95-1185" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(change_cat_70<span class="fl">.19</span>) <span class="sc">|&gt;</span> </span>
<span id="cb95-1186"><a href="#cb95-1186" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb95-1187"><a href="#cb95-1187" aria-hidden="true" tabindex="-1"></a><span class="at">Tracts =</span> <span class="fu">n</span>(), </span>
<span id="cb95-1188"><a href="#cb95-1188" aria-hidden="true" tabindex="-1"></a><span class="at">P_Unemp =</span> <span class="fu">mean</span>(P_Unemp, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1189"><a href="#cb95-1189" aria-hidden="true" tabindex="-1"></a><span class="at">P_LabForce =</span> <span class="fu">mean</span>(P_LabForce, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb95-1190"><a href="#cb95-1190" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb95-1191"><a href="#cb95-1191" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb95-1192"><a href="#cb95-1192" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">decimals =</span> <span class="dv">1</span>)</span>
<span id="cb95-1193"><a href="#cb95-1193" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-1194"><a href="#cb95-1194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1195"><a href="#cb95-1195" aria-hidden="true" tabindex="-1"></a>Also calculate average employment by industry for the three cities.</span>
<span id="cb95-1196"><a href="#cb95-1196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1199"><a href="#cb95-1199" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb95-1200"><a href="#cb95-1200" aria-hidden="true" tabindex="-1"></a>nyc_income <span class="sc">|&gt;</span> </span>
<span id="cb95-1201"><a href="#cb95-1201" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(change_cat_70<span class="fl">.19</span>) <span class="sc">|&gt;</span> </span>
<span id="cb95-1202"><a href="#cb95-1202" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb95-1203"><a href="#cb95-1203" aria-hidden="true" tabindex="-1"></a><span class="at">Tracts =</span> <span class="fu">n</span>(), </span>
<span id="cb95-1204"><a href="#cb95-1204" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Ag =</span> <span class="fu">mean</span>(P_Emp_Ag, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1205"><a href="#cb95-1205" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Const =</span> <span class="fu">mean</span>(P_Emp_Const, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1206"><a href="#cb95-1206" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Manuf =</span> <span class="fu">mean</span>(P_Emp_Manuf, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1207"><a href="#cb95-1207" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Wholesale =</span> <span class="fu">mean</span>(P_Emp_Wholesale, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1208"><a href="#cb95-1208" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Retail =</span> <span class="fu">mean</span>(P_Emp_Retail, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1209"><a href="#cb95-1209" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Transportation =</span> <span class="fu">mean</span>(P_Emp_Transportation, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1210"><a href="#cb95-1210" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_FIRE =</span> <span class="fu">mean</span>(P_Emp_FIRE, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1211"><a href="#cb95-1211" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Management =</span> <span class="fu">mean</span>(P_Emp_Management, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1212"><a href="#cb95-1212" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Education =</span> <span class="fu">mean</span>(P_Emp_Education, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1213"><a href="#cb95-1213" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Arts =</span> <span class="fu">mean</span>(P_Emp_Arts, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1214"><a href="#cb95-1214" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_Other =</span> <span class="fu">mean</span>(P_Emp_Other, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb95-1215"><a href="#cb95-1215" aria-hidden="true" tabindex="-1"></a><span class="at">P_Emp_PA =</span> <span class="fu">mean</span>(P_Emp_PA, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb95-1216"><a href="#cb95-1216" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb95-1217"><a href="#cb95-1217" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb95-1218"><a href="#cb95-1218" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">14</span>, <span class="at">decimals =</span> <span class="dv">1</span>)</span>
<span id="cb95-1219"><a href="#cb95-1219" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb95-1220"><a href="#cb95-1220" aria-hidden="true" tabindex="-1"></a><span class="fu">## Describing our Three Cities</span></span>
<span id="cb95-1221"><a href="#cb95-1221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1222"><a href="#cb95-1222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1223"><a href="#cb95-1223" aria-hidden="true" tabindex="-1"></a><span class="fu"># Lab Summary</span></span>
<span id="cb95-1224"><a href="#cb95-1224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1225"><a href="#cb95-1225" aria-hidden="true" tabindex="-1"></a>In this lab, you started working with harmonized census data in order to describe trajectories of neighborhood change. You spent lots of time cleaning your data and preparing it for further analysis. You joined to the historical census data current ACS data, and then compared the current demographic attributes of those places based upon their historical trajectories of income change.</span>
<span id="cb95-1226"><a href="#cb95-1226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1227"><a href="#cb95-1227" aria-hidden="true" tabindex="-1"></a>In this lab, you've had the opportunitiy to work (more) independently, relying upon your past skills and R skillset. The focus in this lab has been on data cleaning and manipulation. </span>
<span id="cb95-1228"><a href="#cb95-1228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1229"><a href="#cb95-1229" aria-hidden="true" tabindex="-1"></a>Your next steps might be to spend more time visualizing and analyzing the resulting data. Based upon what we've done here, here are some thoughts on some ways to extend this lab.</span>
<span id="cb95-1230"><a href="#cb95-1230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1231"><a href="#cb95-1231" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Join the "long" income data to census geographies and visualize the time series.</span>
<span id="cb95-1232"><a href="#cb95-1232" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Map out census tracts based upon their belonging to the three cities, both the entire region, and for each county.</span>
<span id="cb95-1233"><a href="#cb95-1233" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Use the five income labels to describe trajectories of change for each census tract. Consider categorizing census tracts based upon their long run trajectories.</span>
<span id="cb95-1234"><a href="#cb95-1234" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Examine the demographics of census tracts in each decade (we could have pulled that from the LTDB sample data). How have demographic attributes changed of places in each income category?</span>
<span id="cb95-1235"><a href="#cb95-1235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1236"><a href="#cb95-1236" aria-hidden="true" tabindex="-1"></a><span class="fu">## Lab Evaluation</span></span>
<span id="cb95-1237"><a href="#cb95-1237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1238"><a href="#cb95-1238" aria-hidden="true" tabindex="-1"></a>In evaluating your lab submission, we'll be paying attention to the following:</span>
<span id="cb95-1239"><a href="#cb95-1239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1240"><a href="#cb95-1240" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Proper import, cleaning, and formatting of LTDB data, paying particular attention to building reproducible data pipelines that you could use for any geographic location.</span>
<span id="cb95-1241"><a href="#cb95-1241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1242"><a href="#cb95-1242" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Thoughtful reflection on data process and outputs.</span>
<span id="cb95-1243"><a href="#cb95-1243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1244"><a href="#cb95-1244" aria-hidden="true" tabindex="-1"></a>As you get into the lab, please feel welcome to ask us questions, and please share where you're struggling with us and with others in the class.</span>
<span id="cb95-1245"><a href="#cb95-1245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-1246"><a href="#cb95-1246" aria-hidden="true" tabindex="-1"></a><span class="fu">## References</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Content <i class="fa-regular fa-copyright" aria-label="copyright"></i> Andrew J. Greenlee</div>   
    <div class="nav-footer-right">Made with <i class="fa-brands fa-r-project" aria-label="r-project"></i> and <a href="https://quarto.org/">Quarto</a> <br> Website Code on <a href="https://github.com/agreen4/UP570_S23_Website">Github <i class="fa-brands fa-github" aria-label="github"></i></a></div>
  </div>
</footer>



</body></html>