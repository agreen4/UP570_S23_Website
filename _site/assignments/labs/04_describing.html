<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Neighborhood Analysis - Describing Places</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Neighborhood Analysis</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../syllabus/index.html">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../schedule/index.html">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../assignments/index.html">
 <span class="menu-text">Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../howto/index.html">
 <span class="menu-text">How To</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resources/index.html">
 <span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://up570s23.slack.com/"><i class="bi bi-slack" role="img" aria-label="Slack">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#goals" id="toc-goals" class="nav-link" data-scroll-target="#goals">Goals</a></li>
  <li><a href="#core-concepts" id="toc-core-concepts" class="nav-link" data-scroll-target="#core-concepts">Core Concepts</a></li>
  <li><a href="#github-lab-repository" id="toc-github-lab-repository" class="nav-link" data-scroll-target="#github-lab-repository">Github Lab Repository</a></li>
  <li><a href="#principles-of-tidy-data" id="toc-principles-of-tidy-data" class="nav-link" data-scroll-target="#principles-of-tidy-data">Principles of Tidy Data</a>
  <ul>
  <li><a href="#load-example-data" id="toc-load-example-data" class="nav-link" data-scroll-target="#load-example-data">Load Example Data</a></li>
  <li><a href="#loading-required-packages" id="toc-loading-required-packages" class="nav-link" data-scroll-target="#loading-required-packages">Loading Required Packages</a></li>
  <li><a href="#describing-data" id="toc-describing-data" class="nav-link" data-scroll-target="#describing-data">Describing Data</a></li>
  </ul></li>
  <li><a href="#query-and-describe-the-data" id="toc-query-and-describe-the-data" class="nav-link" data-scroll-target="#query-and-describe-the-data">Query and Describe the Data</a></li>
  <li><a href="#recoding-values" id="toc-recoding-values" class="nav-link" data-scroll-target="#recoding-values">Recoding Values</a>
  <ul>
  <li><a href="#strategy-1---conditional-statement" id="toc-strategy-1---conditional-statement" class="nav-link" data-scroll-target="#strategy-1---conditional-statement">Strategy 1 - Conditional Statement</a></li>
  <li><a href="#strategy-2-use-a-specialized-command" id="toc-strategy-2-use-a-specialized-command" class="nav-link" data-scroll-target="#strategy-2-use-a-specialized-command">Strategy 2: Use a Specialized Command</a></li>
  <li><a href="#strategy-3-recode-and-change-format" id="toc-strategy-3-recode-and-change-format" class="nav-link" data-scroll-target="#strategy-3-recode-and-change-format">Strategy 3: Recode and Change Format</a></li>
  </ul></li>
  <li><a href="#summarizing-data" id="toc-summarizing-data" class="nav-link" data-scroll-target="#summarizing-data">Summarizing Data</a></li>
  <li><a href="#filtering-data" id="toc-filtering-data" class="nav-link" data-scroll-target="#filtering-data">Filtering Data</a></li>
  <li><a href="#pivoting-data" id="toc-pivoting-data" class="nav-link" data-scroll-target="#pivoting-data">Pivoting Data</a></li>
  <li><a href="#joining-tables" id="toc-joining-tables" class="nav-link" data-scroll-target="#joining-tables">Joining Tables</a>
  <ul>
  <li><a href="#joins-overview" id="toc-joins-overview" class="nav-link" data-scroll-target="#joins-overview">Joins Overview</a></li>
  <li><a href="#join-types" id="toc-join-types" class="nav-link" data-scroll-target="#join-types">Join Types</a></li>
  <li><a href="#example" id="toc-example" class="nav-link" data-scroll-target="#example">Example</a></li>
  <li><a href="#joining-together-ozs-and-place-datasets" id="toc-joining-together-ozs-and-place-datasets" class="nav-link" data-scroll-target="#joining-together-ozs-and-place-datasets">Joining Together OZs and Place datasets</a></li>
  </ul></li>
  <li><a href="#making-nice-tables" id="toc-making-nice-tables" class="nav-link" data-scroll-target="#making-nice-tables">Making Nice Tables</a>
  <ul>
  <li><a href="#table-components-in-gt" id="toc-table-components-in-gt" class="nav-link" data-scroll-target="#table-components-in-gt">Table Components in GT</a></li>
  <li><a href="#making-a-first-gt-table" id="toc-making-a-first-gt-table" class="nav-link" data-scroll-target="#making-a-first-gt-table">Making a First GT Table</a></li>
  <li><a href="#formatting-columns" id="toc-formatting-columns" class="nav-link" data-scroll-target="#formatting-columns">Formatting Columns</a></li>
  <li><a href="#saving-a-table" id="toc-saving-a-table" class="nav-link" data-scroll-target="#saving-a-table">Saving a Table</a></li>
  </ul></li>
  <li><a href="#lab-evaluation" id="toc-lab-evaluation" class="nav-link" data-scroll-target="#lab-evaluation">Lab Evaluation</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Describing Places</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i></button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>In this lab, we’ll learn some techniques for creating publication-quality summary tables while working to tell policy-relevant stories about places.</p>
<p>In addition to thinking about the basics of how we describe places, we will perform a basic policy analysis of the location of federal Opportunity Zones. This analysis will help illustrate how we can strategically build layers of stories. We’ll add some basic information about all census tracts so that we can describe the differences between ineligible, eligible but not designated, and eligible and designated census tracts.</p>
</section>
<section id="goals" class="level2">
<h2 class="anchored" data-anchor-id="goals">Goals</h2>
<ul>
<li>Set up your computer so that RStudio can communicate with your Github account.</li>
</ul>
</section>
<section id="core-concepts" class="level2">
<h2 class="anchored" data-anchor-id="core-concepts">Core Concepts</h2>
<p>This lab asks you to practice some basic data manipulation and management skills using the dplyr package.</p>
<ul>
<li>Introduce several commonly used demographic indicators from the census</li>
<li>Introduce how to join datasets together based upon a common field</li>
<li>Introduce how to recode and classify data based upon one or more characteristics</li>
</ul>
<p>Let’s get going…</p>
</section>
<section id="github-lab-repository" class="level2">
<h2 class="anchored" data-anchor-id="github-lab-repository">Github Lab Repository</h2>
<p>If you have not already done so, follow <a href="https://classroom.github.com/a/f9phgn1X">this link</a> to accept the lab Github Classroom assignment repository.</p>
</section>
<section id="principles-of-tidy-data" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="principles-of-tidy-data">Principles of Tidy Data</h2>
<p>In the book <a href="https://r4ds.had.co.nz/tidy-data.html"><em>R for Data Science</em></a>, Hadley Wickam describes three principles for tidy data:</p>
<ol type="1">
<li>Each variable must have its own column</li>
<li>Each observation must have its own row</li>
<li>Each value must have its own cell</li>
</ol>
<p><img src="https://d33wubrfki0l68.cloudfront.net/6f1ddb544fc5c69a2478e444ab8112fb0eea23f8/91adc/images/tidy-1.png" class="img-fluid"> Much of the data we work with in the context of basic planning and policy analysis applications already conforms to this format (or is easily transformed into this format). This makes packages like <code>tidyverse</code> particularly useful for the common types of data manipulation that we perform.</p>
<p>While we’ll occasionally use base r coding over the course of the semester, for the most part, we’ll rely upon the <code>tidyverse</code> suite to help us. Let’s explore some basic command syntax.</p>
<section id="load-example-data" class="level3">
<h3 class="anchored" data-anchor-id="load-example-data">Load Example Data</h3>
<p>We’re going to work with a dataset that describes those census tracts that were designated as <a href="https://www.irs.gov/credits-deductions/businesses/opportunity-zones">Opportunity Zones</a> as part of the federal <a href="https://www.congress.gov/bill/115th-congress/house-bill/1">Tax Cuts and Jobs Act</a>. These incentives are designed to spur investment in low-income and undercapitalized cities, by providing investors with tax incentives to invest capital in these locations.</p>
<p>The specific dataset which we’ll work with was developed by the Urban Institute, and adds to basic identification of designated census tracts some additional analysis of the characteristics of those places.</p>
</section>
<section id="loading-required-packages" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="loading-required-packages">Loading Required Packages</h3>
<p>We’re already learned how to use <code>install.packages()</code> and <code>library()</code> to (respectively) install and load packages that extend R and RStudio’s functionality. As a reminder, <code>install.packages()</code> downloads the package from a central server and installs it on your computer. You only have to install a package once. Using <code>library()</code> loads that package for use in your current RStudio session. If you plan to use that package in a given analysis, you’ll need to load it. To stay organized, you should load packages at the beginning of your script or markdown document.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p>Note that to install the package, you need to treat the package name as a character vector <code>"tidyverse"</code>, but when you load it in your R session, it does not need to be treated as a character vector <code>tidyverse</code> because it is an object that R recognizes after it is installed.</p>
</div></div><p>We are going to load the following packages:</p>
<ul>
<li><code>tidyverse</code> contains tools which we’ll use to subset, filter, group, and summarize our data</li>
<li><code>readxl</code> contains tools which will help us to read Excel files into R</li>
<li><code>gt</code> contains tools for making nicely formatted tables.</li>
</ul>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The <code>read_xlsx()</code> command from the <code>readxl</code> package will read Microsoft Excel files into data tables. Let’s start by loading the Urban Institute Opportunity Zone dataset:</p>
<p>Let’s read the Excel data and place it in an object called “ozs”:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>ozs <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"04_describing/data/urbaninstitute_tractlevelozanalysis_update1242018.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>You can either do a Google search for <a href="https://readxl.tidyverse.org">Readxl</a> to find documentation, or you can use R’s built in documentation by typing <code>?readxl</code></p>
<p>As the documentation states, <code>readxl</code> imports excel files. Looking at the documentation, the <code>read_excel()</code> command will read a single excel sheet, or we can optionally select a sheet by name or number from an excel workbook with multiple sheets. In this case, the Urban Institute data is in a workbook with a single sheet, so we just need to tell R where the file is to load.</p>
</section>
<section id="describing-data" class="level3">
<h3 class="anchored" data-anchor-id="describing-data">Describing Data</h3>
<p>One of the first steps that we should do when we load an unfamiliar dataset is to get to know it using some basic description commands.</p>
<p>Let’s use the <code>str()</code> command to analyze the dataset’s structure:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ozs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [42,176 × 27] (S3: tbl_df/tbl/data.frame)
 $ geoid                : chr [1:42176] "01001020200" "01001020300" "01001020700" "01001020802" ...
 $ state                : chr [1:42176] "Alabama" "Alabama" "Alabama" "Alabama" ...
 $ Designated           : num [1:42176] NA NA 1 NA NA NA NA 1 NA 1 ...
 $ county               : chr [1:42176] "Autauga County" "Autauga County" "Autauga County" "Autauga County" ...
 $ Type                 : chr [1:42176] "Low-Income Community" "Non-LIC Contiguous" "Low-Income Community" "Non-LIC Contiguous" ...
 $ dec_score            : num [1:42176] 4 6 9 10 5 6 6 9 10 9 ...
 $ SE_Flag              : num [1:42176] NA NA NA NA NA NA NA NA NA NA ...
 $ Population           : num [1:42176] 2196 3136 3047 10743 2899 ...
 $ medhhincome2014_tract: num [1:42176] 41107 51250 45234 61242 49567 ...
 $ PovertyRate          : num [1:42176] 0.24 0.107 0.19 0.153 0.151 ...
 $ unemprate            : num [1:42176] 0.0775 0.051 0.1407 0.0459 0.0289 ...
 $ medvalue             : num [1:42176] 95300 113800 93500 160400 102900 ...
 $ medrent              : num [1:42176] 743 817 695 1018 546 ...
 $ pctown               : num [1:42176] 0.628 0.703 0.711 0.823 0.83 ...
 $ severerentburden     : num [1:42176] 0.3269 0.3223 0.3887 0.1994 0.0994 ...
 $ vacancyrate          : num [1:42176] 0.0584 0.1399 0.0619 0.0609 0.2182 ...
 $ pctwhitealone        : num [1:42176] 0.439 0.671 0.833 0.814 0.726 ...
 $ pctblackalone        : num [1:42176] 0.5187 0.205 0.0922 0.1572 0.2456 ...
 $ pctHispanic          : num [1:42176] 0.01275 0.0727 0.0338 0.01368 0.00448 ...
 $ pctAAPIalone         : num [1:42176] 0.01093 0.01052 0 0.00959 0 ...
 $ pctunder18           : num [1:42176] 0.218 0.224 0.249 0.27 0.245 ...
 $ pctover64            : num [1:42176] 0.124 0.175 0.149 0.122 0.156 ...
 $ HSorlower            : num [1:42176] 0.581 0.464 0.544 0.45 0.621 ...
 $ BAorhigher           : num [1:42176] 0.162 0.219 0.113 0.229 0.136 ...
 $ Metro                : num [1:42176] 1 1 1 1 1 1 1 1 1 1 ...
 $ Micro                : num [1:42176] NA NA NA NA NA NA NA NA NA NA ...
 $ NoCBSAType           : num [1:42176] NA NA NA NA NA NA NA NA NA NA ...</code></pre>
</div>
</div>
<p>We get a list where each row is a variable in the dataset. We also learn more about the format of the variable (e.g.&nbsp;character, numeric), the number of observations, and we see examples of the first few observations.</p>
<p>Let’s next use <code>summary()</code> to get a statistical summary of each variable:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ozs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>    geoid              state             Designated       county         
 Length:42176       Length:42176       Min.   :1       Length:42176      
 Class :character   Class :character   1st Qu.:1       Class :character  
 Mode  :character   Mode  :character   Median :1       Mode  :character  
                                       Mean   :1                         
                                       3rd Qu.:1                         
                                       Max.   :1                         
                                       NA's   :33414                     
     Type             dec_score         SE_Flag        Population   
 Length:42176       Min.   : 1.000   Min.   :1       Min.   :    0  
 Class :character   1st Qu.: 3.000   1st Qu.:1       1st Qu.: 2752  
 Mode  :character   Median : 5.000   Median :1       Median : 3897  
                    Mean   : 5.495   Mean   :1       Mean   : 4147  
                    3rd Qu.: 8.000   3rd Qu.:1       3rd Qu.: 5224  
                    Max.   :10.000   Max.   :1       Max.   :40616  
                    NA's   :1253     NA's   :41111   NA's   :112    
 medhhincome2014_tract  PovertyRate       unemprate          medvalue      
 Min.   :  2499        Min.   :0.0000   Min.   :0.00000   Min.   :   9999  
 1st Qu.: 32014        1st Qu.:0.1380   1st Qu.:0.05900   1st Qu.:  85700  
 Median : 41094        Median :0.2055   Median :0.08734   Median : 122400  
 Mean   : 42153        Mean   :0.2331   Mean   :0.10063   Mean   : 165663  
 3rd Qu.: 50833        3rd Qu.:0.2996   3rd Qu.:0.12600   3rd Qu.: 191300  
 Max.   :181406        Max.   :1.0000   Max.   :1.00000   Max.   :2000001  
 NA's   :249           NA's   :141      NA's   :141       NA's   :1106     
    medrent           pctown       severerentburden  vacancyrate     
 Min.   :  99.0   Min.   :0.0000   Min.   :0.0000   Min.   :0.00000  
 1st Qu.: 655.0   1st Qu.:0.3833   1st Qu.:0.1662   1st Qu.:0.07115  
 Median : 800.0   Median :0.5728   Median :0.2403   Median :0.11658  
 Mean   : 860.9   Mean   :0.5436   Mean   :0.2476   Mean   :0.14120  
 3rd Qu.:1010.0   3rd Qu.:0.7316   3rd Qu.:0.3206   3rd Qu.:0.18011  
 Max.   :3501.0   Max.   :1.0000   Max.   :1.0000   Max.   :1.00000  
 NA's   :395      NA's   :1033     NA's   :189      NA's   :167      
 pctwhitealone    pctblackalone      pctHispanic       pctAAPIalone    
 Min.   :0.0000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
 1st Qu.:0.2040   1st Qu.:0.01072   1st Qu.:0.02602   1st Qu.:0.00000  
 Median :0.5614   Median :0.06656   Median :0.09304   Median :0.00883  
 Mean   :0.5211   Mean   :0.18652   Mean   :0.22060   Mean   :0.03806  
 3rd Qu.:0.8294   3rd Qu.:0.25000   3rd Qu.:0.32014   3rd Qu.:0.03533  
 Max.   :1.0000   Max.   :1.00000   Max.   :1.00000   Max.   :0.91144  
 NA's   :131      NA's   :131       NA's   :131       NA's   :131      
   pctunder18       pctover64         HSorlower        BAorhigher    
 Min.   :0.0000   Min.   :0.00000   Min.   :0.0000   Min.   :0.0000  
 1st Qu.:0.1908   1st Qu.:0.09436   1st Qu.:0.4150   1st Qu.:0.1120  
 Median :0.2300   Median :0.13604   Median :0.5182   Median :0.1679  
 Mean   :0.2295   Mean   :0.14340   Mean   :0.5067   Mean   :0.2034  
 3rd Qu.:0.2719   3rd Qu.:0.18057   3rd Qu.:0.6113   3rd Qu.:0.2536  
 Max.   :0.6468   Max.   :1.00000   Max.   :1.0000   Max.   :1.0000  
 NA's   :131      NA's   :131       NA's   :132      NA's   :132     
     Metro          Micro         NoCBSAType   
 Min.   :1      Min.   :1       Min.   :1      
 1st Qu.:1      1st Qu.:1       1st Qu.:1      
 Median :1      Median :1       Median :1      
 Mean   :1      Mean   :1       Mean   :1      
 3rd Qu.:1      3rd Qu.:1       3rd Qu.:1      
 Max.   :1      Max.   :1       Max.   :1      
 NA's   :9111   NA's   :37448   NA's   :37793  </code></pre>
</div>
</div>
<p>This gives us a statistical summary including distribution and central tendency statistics, as well as information on the number of values that are <code>NA</code>.</p>
<p>A few things to note after your preliminary inspection:</p>
<ul>
<li>These data are at the census tract level and include geographic identifiers including <strong>geoid</strong>, the combined, state-county-tract FIPS code, <strong>state</strong> the state name, and <strong>county</strong> the county name.</li>
<li>These data include a field named <strong>Designated</strong> which is 1 when an eligible tract was designated as an opportunity zone, and <code>NA</code> where the tract was not designated.</li>
<li>The dataset also includes some other tract-level demographic measures, as well as additional geographic flags (variables that take the value 0 or 1).</li>
</ul>
</section>
</section>
<section id="query-and-describe-the-data" class="level2">
<h2 class="anchored" data-anchor-id="query-and-describe-the-data">Query and Describe the Data</h2>
<p>The dataset we’re looking at is for the entire United States. We can easily summarize characteristics of the entire dataset.</p>
</section>
<section id="recoding-values" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="recoding-values">Recoding Values</h2>
<p>One of the characteristics tracked in the Urban Institute data is the median household income for each designated census tract. We might question whether there’s a difference in the median household income for designated and not-designated but eligible census tracts. This may help us understand something about whether the most needy tracts were selected from those that are eligible.</p>
<p>How would we do this? Conceptually…</p>
<ul>
<li>We need to split our data into designated and not designated census tracts, and then calculate the average of the median income separately for these tracts.</li>
<li>Before we do this, let’s take care of one bit of housekeeping. The Urban Institute has coded the designated variable as either taking a value of 1 when designated or <code>NA</code> when not. Let’s <em>recode</em> those NA values to equal 0 instead.</li>
<li>To recode, we need to select those values from the Designated column in the ozs data frame where the value is <code>NA</code> and overwrite them with a new value of 0.</li>
</ul>
<p>There’s lots of ways we could do this:</p>
<section id="strategy-1---conditional-statement" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="strategy-1---conditional-statement">Strategy 1 - Conditional Statement</h3>
<p>We could use a conditional statement <code>ifelse()</code> to specify that if a value is NA in the Designated column we change it to 0.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Designated =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(Designated), <span class="dv">0</span>, Designated))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 42,176 × 27
   geoid      state Desig…¹ county Type  dec_s…² SE_Flag Popul…³ medhh…⁴ Pover…⁵
   &lt;chr&gt;      &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 010010202… Alab…       0 Autau… Low-…       4      NA    2196   41107  0.240 
 2 010010203… Alab…       0 Autau… Non-…       6      NA    3136   51250  0.107 
 3 010010207… Alab…       1 Autau… Low-…       9      NA    3047   45234  0.190 
 4 010010208… Alab…       0 Autau… Non-…      10      NA   10743   61242  0.153 
 5 010010210… Alab…       0 Autau… Non-…       5      NA    2899   49567  0.151 
 6 010010211… Alab…       0 Autau… Low-…       6      NA    3247   40801  0.194 
 7 010030101… Alab…       0 Baldw… Non-…       6      NA    4013   45667  0.140 
 8 010030102… Alab…       1 Baldw… Low-…       9      NA    3067   33333  0.272 
 9 010030103… Alab…       0 Baldw… Non-…      10      NA    8079   47443  0.0684
10 010030104… Alab…       1 Baldw… Non-…       9      NA    4578   46696  0.148 
# … with 42,166 more rows, 17 more variables: unemprate &lt;dbl&gt;, medvalue &lt;dbl&gt;,
#   medrent &lt;dbl&gt;, pctown &lt;dbl&gt;, severerentburden &lt;dbl&gt;, vacancyrate &lt;dbl&gt;,
#   pctwhitealone &lt;dbl&gt;, pctblackalone &lt;dbl&gt;, pctHispanic &lt;dbl&gt;,
#   pctAAPIalone &lt;dbl&gt;, pctunder18 &lt;dbl&gt;, pctover64 &lt;dbl&gt;, HSorlower &lt;dbl&gt;,
#   BAorhigher &lt;dbl&gt;, Metro &lt;dbl&gt;, Micro &lt;dbl&gt;, NoCBSAType &lt;dbl&gt;, and
#   abbreviated variable names ¹​Designated, ²​dec_score, ³​Population,
#   ⁴​medhhincome2014_tract, ⁵​PovertyRate</code></pre>
</div>
</div>
<p>In <code>dplyr</code> syntax, what we said here was <em>with reference to the ozs dataset</em> <code>ozs |&gt;</code> let’s alter the dataset <code>mutate()</code>. Let’s alter the column named Designated <code>mutate(Designated = )</code>. Let’s alter the column named Designated conditionally <code>mutate(Designated = ifelse())</code>. If the value of Designated is equal to <code>NA</code>, replace it with 0, otherwise keep the value present in the Designated observation <code>mutate(Designated = ifelse(is.na(Designated), 0, Designated))</code>.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p>Looking at this <code>ifelse()</code> statement, you might have been tempted to write something like <code>Designated ==</code>NA`<code>which will not work.</code>is.na()<code>is the proper logical test to return whether a value is or is not</code>NA`.</p>
</div></div></section>
<section id="strategy-2-use-a-specialized-command" class="level3">
<h3 class="anchored" data-anchor-id="strategy-2-use-a-specialized-command">Strategy 2: Use a Specialized Command</h3>
<p>We could use a specialized command such as <code>replace_na()</code> from the <code>tidyr</code> package to replace our <code>NA</code> values:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Designated =</span> <span class="fu">replace_na</span>(Designated, <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 42,176 × 27
   geoid      state Desig…¹ county Type  dec_s…² SE_Flag Popul…³ medhh…⁴ Pover…⁵
   &lt;chr&gt;      &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 010010202… Alab…       0 Autau… Low-…       4      NA    2196   41107  0.240 
 2 010010203… Alab…       0 Autau… Non-…       6      NA    3136   51250  0.107 
 3 010010207… Alab…       1 Autau… Low-…       9      NA    3047   45234  0.190 
 4 010010208… Alab…       0 Autau… Non-…      10      NA   10743   61242  0.153 
 5 010010210… Alab…       0 Autau… Non-…       5      NA    2899   49567  0.151 
 6 010010211… Alab…       0 Autau… Low-…       6      NA    3247   40801  0.194 
 7 010030101… Alab…       0 Baldw… Non-…       6      NA    4013   45667  0.140 
 8 010030102… Alab…       1 Baldw… Low-…       9      NA    3067   33333  0.272 
 9 010030103… Alab…       0 Baldw… Non-…      10      NA    8079   47443  0.0684
10 010030104… Alab…       1 Baldw… Non-…       9      NA    4578   46696  0.148 
# … with 42,166 more rows, 17 more variables: unemprate &lt;dbl&gt;, medvalue &lt;dbl&gt;,
#   medrent &lt;dbl&gt;, pctown &lt;dbl&gt;, severerentburden &lt;dbl&gt;, vacancyrate &lt;dbl&gt;,
#   pctwhitealone &lt;dbl&gt;, pctblackalone &lt;dbl&gt;, pctHispanic &lt;dbl&gt;,
#   pctAAPIalone &lt;dbl&gt;, pctunder18 &lt;dbl&gt;, pctover64 &lt;dbl&gt;, HSorlower &lt;dbl&gt;,
#   BAorhigher &lt;dbl&gt;, Metro &lt;dbl&gt;, Micro &lt;dbl&gt;, NoCBSAType &lt;dbl&gt;, and
#   abbreviated variable names ¹​Designated, ²​dec_score, ³​Population,
#   ⁴​medhhincome2014_tract, ⁵​PovertyRate</code></pre>
</div>
</div>
<p>Note that in <code>replace_na()</code> we are specifying the column we want to replace the NA value in as well as the value we want to replace NA with.</p>
</section>
<section id="strategy-3-recode-and-change-format" class="level3">
<h3 class="anchored" data-anchor-id="strategy-3-recode-and-change-format">Strategy 3: Recode and Change Format</h3>
<p>Depending upon what we wanted to do with our Designated labels, we could simultaneously deal with recoding our NA values and relabeling the values for legibility. <code>case_when()</code> is useful for these more complex operations:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Designated =</span> <span class="fu">case_when</span>(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    Designated <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span><span class="st">"Designated"</span>,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(Designated) <span class="sc">~</span><span class="st">"Not Designated"</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 42,176 × 27
   geoid      state Desig…¹ county Type  dec_s…² SE_Flag Popul…³ medhh…⁴ Pover…⁵
   &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 010010202… Alab… Not De… Autau… Low-…       4      NA    2196   41107  0.240 
 2 010010203… Alab… Not De… Autau… Non-…       6      NA    3136   51250  0.107 
 3 010010207… Alab… Design… Autau… Low-…       9      NA    3047   45234  0.190 
 4 010010208… Alab… Not De… Autau… Non-…      10      NA   10743   61242  0.153 
 5 010010210… Alab… Not De… Autau… Non-…       5      NA    2899   49567  0.151 
 6 010010211… Alab… Not De… Autau… Low-…       6      NA    3247   40801  0.194 
 7 010030101… Alab… Not De… Baldw… Non-…       6      NA    4013   45667  0.140 
 8 010030102… Alab… Design… Baldw… Low-…       9      NA    3067   33333  0.272 
 9 010030103… Alab… Not De… Baldw… Non-…      10      NA    8079   47443  0.0684
10 010030104… Alab… Design… Baldw… Non-…       9      NA    4578   46696  0.148 
# … with 42,166 more rows, 17 more variables: unemprate &lt;dbl&gt;, medvalue &lt;dbl&gt;,
#   medrent &lt;dbl&gt;, pctown &lt;dbl&gt;, severerentburden &lt;dbl&gt;, vacancyrate &lt;dbl&gt;,
#   pctwhitealone &lt;dbl&gt;, pctblackalone &lt;dbl&gt;, pctHispanic &lt;dbl&gt;,
#   pctAAPIalone &lt;dbl&gt;, pctunder18 &lt;dbl&gt;, pctover64 &lt;dbl&gt;, HSorlower &lt;dbl&gt;,
#   BAorhigher &lt;dbl&gt;, Metro &lt;dbl&gt;, Micro &lt;dbl&gt;, NoCBSAType &lt;dbl&gt;, and
#   abbreviated variable names ¹​Designated, ²​dec_score, ³​Population,
#   ⁴​medhhincome2014_tract, ⁵​PovertyRate</code></pre>
</div>
</div>
<p>What’s going on here? <code>case_when()</code> allows us to conditionally recode values. We specify the condition and then what to do when that condition is met. For instance, we specify the condition <code>Designated == 1</code> and then say when this condition is met, we want you to change that observation to Designated <code>~"Designated"</code>. We then say what to do if the value is <code>NA</code> - label it as “Not Designated”.</p>
<p>For the sake of legibility, let’s use the third strategy on our dataset:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>ozs <span class="ot">&lt;-</span> ozs <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Designated =</span> <span class="fu">case_when</span>(</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    Designated <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span><span class="st">"Designated"</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(Designated) <span class="sc">~</span><span class="st">"Not Designated"</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>And here’s what our Designated column now looks like:</p>
<div class="cell">
<div class="cell-output-display">

<div id="paovuqhdek" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#paovuqhdek) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#paovuqhdek) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#paovuqhdek) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#paovuqhdek) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#paovuqhdek) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#paovuqhdek) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#paovuqhdek) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#paovuqhdek) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#paovuqhdek) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#paovuqhdek) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#paovuqhdek) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#paovuqhdek) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#paovuqhdek) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#paovuqhdek) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#paovuqhdek) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#paovuqhdek) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#paovuqhdek) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#paovuqhdek) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#paovuqhdek) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#paovuqhdek) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#paovuqhdek) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#paovuqhdek) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#paovuqhdek) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#paovuqhdek) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#paovuqhdek) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#paovuqhdek) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#paovuqhdek) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#paovuqhdek) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#paovuqhdek) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#paovuqhdek) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#paovuqhdek) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#paovuqhdek) .gt_left {
  text-align: left;
}

:where(#paovuqhdek) .gt_center {
  text-align: center;
}

:where(#paovuqhdek) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#paovuqhdek) .gt_font_normal {
  font-weight: normal;
}

:where(#paovuqhdek) .gt_font_bold {
  font-weight: bold;
}

:where(#paovuqhdek) .gt_font_italic {
  font-style: italic;
}

:where(#paovuqhdek) .gt_super {
  font-size: 65%;
}

:where(#paovuqhdek) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#paovuqhdek) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#paovuqhdek) .gt_indent_1 {
  text-indent: 5px;
}

:where(#paovuqhdek) .gt_indent_2 {
  text-indent: 10px;
}

:where(#paovuqhdek) .gt_indent_3 {
  text-indent: 15px;
}

:where(#paovuqhdek) .gt_indent_4 {
  text-indent: 20px;
}

:where(#paovuqhdek) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">geoid</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">state</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">county</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">Designated</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_right">01001020200</td>
<td class="gt_row gt_left">Alabama</td>
<td class="gt_row gt_left">Autauga County</td>
<td class="gt_row gt_left">Not Designated</td></tr>
    <tr><td class="gt_row gt_right">01001020300</td>
<td class="gt_row gt_left">Alabama</td>
<td class="gt_row gt_left">Autauga County</td>
<td class="gt_row gt_left">Not Designated</td></tr>
    <tr><td class="gt_row gt_right">01001020700</td>
<td class="gt_row gt_left">Alabama</td>
<td class="gt_row gt_left">Autauga County</td>
<td class="gt_row gt_left">Designated</td></tr>
    <tr><td class="gt_row gt_right">01001020802</td>
<td class="gt_row gt_left">Alabama</td>
<td class="gt_row gt_left">Autauga County</td>
<td class="gt_row gt_left">Not Designated</td></tr>
    <tr><td class="gt_row gt_right">01001021000</td>
<td class="gt_row gt_left">Alabama</td>
<td class="gt_row gt_left">Autauga County</td>
<td class="gt_row gt_left">Not Designated</td></tr>
    <tr><td class="gt_row gt_right">01001021100</td>
<td class="gt_row gt_left">Alabama</td>
<td class="gt_row gt_left">Autauga County</td>
<td class="gt_row gt_left">Not Designated</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
</section>
</section>
<section id="summarizing-data" class="level2">
<h2 class="anchored" data-anchor-id="summarizing-data">Summarizing Data</h2>
<p>Now that we’ve recoded our designated column, let’s do some description of the characteristics of designated and not designated places.</p>
<p>Let’s use a combination of <code>group_by()</code> and <code>summarise()</code> to produce a summary table showing the mean value for designated and not designated census tracts.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Designated) <span class="sc">|&gt;</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  Designated     Income
  &lt;chr&gt;           &lt;dbl&gt;
1 Designated         NA
2 Not Designated     NA</code></pre>
</div>
</div>
<p>We getting a table back, but why did we get <code>NA</code> insted of numbers here? If you’ve ever used the average <code>mean()</code> command in R, you probably understand what’s going on here. As a safety measure, when you average values, R will return NA if any value in that series is <code>NA</code>. If you’re not expecting any <code>NA</code> values, this is good, becuase you’ll quickly discover that there are unexpected <code>NA</code> values in your dataset. We might expect a few census tracts with missing income values coded as <code>NA</code>, so we will want to indicate <code>na.rm = TRUE</code> here so that R removes those NAs when calculating the mean.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Designated) <span class="sc">|&gt;</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  Designated     Income
  &lt;chr&gt;           &lt;dbl&gt;
1 Designated     33345.
2 Not Designated 44446.</code></pre>
</div>
</div>
<p>Much better. We can see that that <em>on average</em>, the median household income for eligible designated census tracts is lower than that for eligible not designated census tracts. Since the Opportunity Zone legislation is designed to target distressed neighborhoods, this is a good sign that program targeting is focused on neighborhoods with greater need.</p>
<p>We might want to add some additional information to our summary table. One useful piece of information would be the number of census tracts that are designated or not designated.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Designated) <span class="sc">|&gt;</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Tracts =</span> <span class="fu">n</span>(),</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  Designated     Tracts Income
  &lt;chr&gt;           &lt;int&gt;  &lt;dbl&gt;
1 Designated       8762 33345.
2 Not Designated  33414 44446.</code></pre>
</div>
</div>
<p>Within a <code>summarise()</code> statement, <code>n()</code> gives us a count of observations (rows) for each grouping. In this case, there are 8,762 census tracts designated as opportunity zones, and an additional 33,414 that were eligible based upon program criteria but not designated.</p>
<p>We could easily add other summaries to our summary table for this dataset, or further modify.</p>
</section>
<section id="filtering-data" class="level2">
<h2 class="anchored" data-anchor-id="filtering-data">Filtering Data</h2>
<p>Now that we have some sense for how we might produce basic summaries of our data, how can we query out (filter) observations by row? How, for instance, would you modify the above code to produce the same table for <em>counties</em> in <em>Illinois</em>?</p>
<p>We can use a <code>filter()</code> statement to easily accomplish this. <code>filter()</code> allows us to specify one (or more) criteria for which we want to select rows from a larger dataset.</p>
<p>Let’s take a step back and filter our base dataset to focus on observations in Illinois.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"Illinois"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,659 × 27
   geoid      state Desig…¹ county Type  dec_s…² SE_Flag Popul…³ medhh…⁴ Pover…⁵
   &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 170010002… Illi… Not De… Adams… Non-…       7      NA    1937   41538  0.167 
 2 170010002… Illi… Not De… Adams… Low-…       1      NA    2563   40018  0.171 
 3 170010004… Illi… Not De… Adams… Low-…       1      NA    3403   28819  0.316 
 4 170010005… Illi… Not De… Adams… Low-…       1      NA    2298   32313  0.252 
 5 170010007… Illi… Not De… Adams… Low-…       1      NA    1259   17850  0.369 
 6 170010008… Illi… Design… Adams… Low-…       1      NA    2700   26012  0.344 
 7 170010009… Illi… Not De… Adams… Low-…       5      NA    2671   40475  0.282 
 8 170010101… Illi… Not De… Adams… Non-…       2      NA    4323   50156  0.0800
 9 170010102… Illi… Not De… Adams… Low-…       2      NA    3436   46350  0.107 
10 170010103… Illi… Not De… Adams… Non-…       8      NA    6038   59009  0.0617
# … with 1,649 more rows, 17 more variables: unemprate &lt;dbl&gt;, medvalue &lt;dbl&gt;,
#   medrent &lt;dbl&gt;, pctown &lt;dbl&gt;, severerentburden &lt;dbl&gt;, vacancyrate &lt;dbl&gt;,
#   pctwhitealone &lt;dbl&gt;, pctblackalone &lt;dbl&gt;, pctHispanic &lt;dbl&gt;,
#   pctAAPIalone &lt;dbl&gt;, pctunder18 &lt;dbl&gt;, pctover64 &lt;dbl&gt;, HSorlower &lt;dbl&gt;,
#   BAorhigher &lt;dbl&gt;, Metro &lt;dbl&gt;, Micro &lt;dbl&gt;, NoCBSAType &lt;dbl&gt;, and
#   abbreviated variable names ¹​Designated, ²​dec_score, ³​Population,
#   ⁴​medhhincome2014_tract, ⁵​PovertyRate</code></pre>
</div>
</div>
<p>Recall that the ozs dataset has 42,176 observations (rows). We filtered the data using the criteria that the value of state is equal to “Illinois”, resulting in 1,659 observations (eligible census tracts in Illinois).</p>
<p>From here, we can re-use our prior code to produce a summary table that is focused on Illinois.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"Illinois"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Designated) <span class="sc">|&gt;</span> </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Tracts =</span> <span class="fu">n</span>(),</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  Designated     Tracts Income
  &lt;chr&gt;           &lt;int&gt;  &lt;dbl&gt;
1 Designated        327 30504.
2 Not Designated   1332 45281.</code></pre>
</div>
</div>
<p>Ok - but how do we summarise by county? We just need to add that as an additional grouping criteria in our <code>group_by()</code> statement:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"Illinois"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county, Designated) <span class="sc">|&gt;</span> </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Tracts =</span> <span class="fu">n</span>(),</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 181 × 4
# Groups:   county [95]
   county           Designated     Tracts Income
   &lt;chr&gt;            &lt;chr&gt;           &lt;int&gt;  &lt;dbl&gt;
 1 Adams County     Designated          1 26012 
 2 Adams County     Not Designated      9 39614.
 3 Alexander County Designated          1 21500 
 4 Alexander County Not Designated      3 32809 
 5 Bond County      Designated          1 49590 
 6 Bond County      Not Designated      1 52310 
 7 Boone County     Designated          1 40599 
 8 Boone County     Not Designated      2 45742 
 9 Bureau County    Designated          1 48083 
10 Bureau County    Not Designated      3 60339.
# … with 171 more rows</code></pre>
</div>
</div>
<p>We are basically saying, group by both county and designated and then summarize for each.</p>
<p>With a few lines of code, we can produce very powerful and specific kinds of summaries for our data.</p>
</section>
<section id="pivoting-data" class="level2">
<h2 class="anchored" data-anchor-id="pivoting-data">Pivoting Data</h2>
<p>Our summary is getting more nuanced. We’ve used <code>group_by()</code> and <code>summarise()</code> to sumamrise data based upon certain characteristics. We’ve summarized in such a way where for our Illinois counties, we have two observations for each county - one that summarises values for designated tracts in that county, and one that summarises values for not designated tracts.</p>
<p>It might be useful for us to reshape our summary table so that there is one row for each county, with each row containing the summary value for both designated and not designated tracts.</p>
<p>The two commands <code>pivot_wider()</code> and <code>pivot_longer()</code> are useful for reshaping our data. <code>pivot_wider()</code> essentially adds columns to a dataset by transitioning content from rows to columns. <code>pivot_longer()</code> does the opposite - it makes a dataset longer by transitioning columns to rows.</p>
<p>In our case, let’s use <code>pivot_wider()</code> to transition our Designated and Not Designated rows into columns.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"Illinois"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county, Designated) <span class="sc">|&gt;</span> </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Tracts =</span> <span class="fu">n</span>(),</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Designated, <span class="at">values_from =</span> Income)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 172 × 4
# Groups:   county [95]
   county           Tracts Designated `Not Designated`
   &lt;chr&gt;             &lt;int&gt;      &lt;dbl&gt;            &lt;dbl&gt;
 1 Adams County          1      26012              NA 
 2 Adams County          9         NA           39614.
 3 Alexander County      1      21500              NA 
 4 Alexander County      3         NA           32809 
 5 Bond County           1      49590           52310 
 6 Boone County          1      40599              NA 
 7 Boone County          2         NA           45742 
 8 Bureau County         1      48083              NA 
 9 Bureau County         3         NA           60339.
10 Calhoun County        2         NA           55290 
# … with 162 more rows</code></pre>
</div>
</div>
<p>We start with our previous summary and pass two arguments to <code>pivot_wider()</code>.</p>
<p>We use <code>names_from</code> to specify the column in our dataset contining row values that we <em>want</em> to become new columns. In this case we’d expect that our Desginated column would result in the creation of two new columns - one where values are Designated and one where values are Not Designated.</p>
<p>We use <code>values_from</code> to specify the column containing the values we want in our new columns, in this case, the average of tract income.</p>
<p>One problem though - our tract count column is still present and these values are not reshaped. To simplify things, let’s just get rid of this count so we can see what things look like:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"Illinois"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county, Designated) <span class="sc">|&gt;</span> </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Designated, <span class="at">values_from =</span> Income)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 95 × 3
# Groups:   county [95]
   county           Designated `Not Designated`
   &lt;chr&gt;                 &lt;dbl&gt;            &lt;dbl&gt;
 1 Adams County         26012            39614.
 2 Alexander County     21500            32809 
 3 Bond County          49590            52310 
 4 Boone County         40599            45742 
 5 Bureau County        48083            60339.
 6 Calhoun County          NA            55290 
 7 Carroll County       35184            58942 
 8 Cass County          37679            46840.
 9 Champaign County     13989.           45604.
10 Christian County     36164            45945.
# … with 85 more rows</code></pre>
</div>
</div>
<p>Looking good! To make things a bit more informative, let’s also show the difference in income between designated and not designated tracts:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"Illinois"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county, Designated) <span class="sc">|&gt;</span> </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Designated, <span class="at">values_from =</span> Income) <span class="sc">|&gt;</span> </span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Difference =</span> Designated <span class="sc">-</span> <span class="st">`</span><span class="at">Not Designated</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 95 × 4
# Groups:   county [95]
   county           Designated `Not Designated` Difference
   &lt;chr&gt;                 &lt;dbl&gt;            &lt;dbl&gt;      &lt;dbl&gt;
 1 Adams County         26012            39614.    -13602.
 2 Alexander County     21500            32809     -11309 
 3 Bond County          49590            52310      -2720 
 4 Boone County         40599            45742      -5143 
 5 Bureau County        48083            60339.    -12256.
 6 Calhoun County          NA            55290         NA 
 7 Carroll County       35184            58942     -23758 
 8 Cass County          37679            46840.     -9162.
 9 Champaign County     13989.           45604.    -31615.
10 Christian County     36164            45945.     -9781.
# … with 85 more rows</code></pre>
</div>
</div>
<p>One note here - in the last <code>mutate()</code> statement, you see that Not Designated has backticks around it. This is because there’s a space between “Not” and “Designated” which will be treated as separate variable names. The backticks allow this to be referenced as a column. We could change the name to something like Not_Designated, but backticks will allow us to appropriately reference it as well.</p>
</section>
<section id="joining-tables" class="level2">
<h2 class="anchored" data-anchor-id="joining-tables">Joining Tables</h2>
<p>Linking together the place data to the ozs data might would give us some additional context regarding opportunity zones. Remember that the opportunity zones data itemizes those census tracts that were <em>eligible</em> for designation with the Designated column denoting which eligible census tracts actually became opportunity zones. If we link together information for census tracts which were not eligible for designation, we could learn something about the differences between undesignated, eligible not designated, and eligible designated census tracts.</p>
<p>In order to link together these two datasets, we need to learn about and apply <em>relational joins</em> to bring these two datasets together.</p>
<section id="joins-overview" class="level3">
<h3 class="anchored" data-anchor-id="joins-overview">Joins Overview</h3>
<p>Joins are methods to merge two datasets based on common attributes. It’s rare that one single dataset contains all of the information you wish to tell a story about, so it’s important to understand how joins work.</p>
<p>A Venn diagram of join types.</p>
<p><img src="04_describing/images/joins_venn.png" class="img-fluid"> The <code>tidyverse</code> package which we’ve installed and loaded in the past can perform seven different types of relational joins. We’ll discuss six of them briefly, but focus on four key types. Joins require us to have two tables with some type of common identifier column present in both that we can match records based on.</p>
</section>
<section id="join-types" class="level3">
<h3 class="anchored" data-anchor-id="join-types">Join Types</h3>
<p>Let’s assume we have two data frames named <code>x</code> and <code>y</code>, and we’re trying to match a column called <code>key</code> in both datasets.</p>
<ul>
<li><p><code>left_join()</code>: A left join returns every row in <code>x</code> and all the columns from <code>x</code> and <code>y</code>. If a value in the <code>key</code> column in <code>x</code> doesn’t exist in <code>y</code>, the row will contain <code>NA</code> values for all the <code>y</code> columns. If there are multiple <code>key</code> matches, all the possible combinations will be returned.</p></li>
<li><p><code>right_join()</code>: This is similar to a left join, but returns every row in <code>y</code> instead.</p></li>
<li><p><code>inner_join()</code>: An inner join returns all the rows in <code>x</code> where there is an <code>key</code> match in <code>y</code>, and all the columns in <code>x</code> and <code>y</code>.</p></li>
<li><p><code>full_join()</code>: A full join returns all rows and all columns from <code>x</code> and <code>y</code>. If there isn’t a match in the <code>x</code> <code>key</code> column, all <code>x</code> columns will return <code>NA</code>. (The same is true for <code>y</code>.)</p></li>
<li><p><code>semi_join()</code>: A semi-join returns the rows in <code>x</code> where there is an <code>key</code> match in <code>y</code>. It is different than an inner join in that it only returns the columns in <code>x</code> and doesn’t duplicate rows if there are multiple matches in <code>y</code>.</p></li>
<li><p><code>anti_join()</code>: An anti-join returns the rows in <code>x</code> where there is not a matching <code>key</code> in <code>y</code>. It only returns the columns in <code>x</code>.</p></li>
</ul>
<p>You’ll notice that only the first four joins—left, right, inner, and full—merge two datasets. Those are going to be the most valuable ones to learn. Here are a couple of additional illustrations to illustrate how joins work.</p>
<p><img src="04_describing/images/Join_Types_2.png" class="img-fluid" alt="Join example 1"> <img src="04_describing/images/Join_Types_3.jpeg" class="img-fluid" alt="Join example 2"> The basic general syntax for the joins is the same:</p>
<p><code>*_join(x, y, by = "key name")</code></p>
<p><code>x</code> and <code>y</code> are self-explanatory. The <code>by</code> attribute is used to name the key, or the variable that the two datasets have in common. If you’re lucky, they’ll have the same name. If you’re unlucky, you’ll have to type a bit more: <code>by = c("name1" = "name2")</code>, assuming “name1” is the name of the key column in <code>x</code> and “name2” is the name of the key column in <code>y</code>.</p>
</section>
<section id="example" class="level3">
<h3 class="anchored" data-anchor-id="example">Example</h3>
<p>Let’s assume we have two data frames: <code>fruit_1</code> that contains some characteristics about fruit, and <code>fruit_2</code> that has some others. Here’s how they’re defined:</p>
<p>Note that the code above is just another syntax for creating tables as we did in the past.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(fruit_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  fruit  color 
  &lt;chr&gt;  &lt;chr&gt; 
1 apple  red   
2 orange orange
3 banana yellow
4 lime   green </code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(fruit_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  fruit  shape price
  &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;
1 orange round  0.4 
2 banana long   0.3 
3 lime   oval   0.25
4 durian spiky  8   </code></pre>
</div>
</div>
<p>What would be the result of a left join, right join, and inner join of <code>fruit_1</code> and <code>fruit 2</code>?</p>
<p>Note the following:</p>
<ul>
<li><p>The <strong>left join</strong> includes all records from fruit_1, but excludes those measures from fruit_2 where there isn’t a match in the fruit column (durian). Note that even though there’s not shape and price information for apples in fruit_2, the rows are still included, but with NA where the data would be were it present.</p></li>
<li><p>The <strong>right join</strong> includes all records from fruit_2 but excludes those columns from fruit_1 where there isn’t a match in the fruit column. In this case, we’re missing color information for durian fruit.</p></li>
<li><p>The <strong>inner join</strong> includes only those records from fruit_1 and fruit_2 where there were matches in both datasets.</p></li>
</ul>
<p>The powerful thing about these joins is that they allow us to bring together data with different shapes and we can control which elements of the data are joined. Joins will become far more intuitive as you use them more.</p>
</section>
<section id="joining-together-ozs-and-place-datasets" class="level3">
<h3 class="anchored" data-anchor-id="joining-together-ozs-and-place-datasets">Joining Together OZs and Place datasets</h3>
<p>Now that we have a sense for how joins work, let’s combine our oz and place into one larger table.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>place <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"04_describing/data/place_name.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 73057 Columns: 5
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (5): STATEFP, COUNTYFP, TRACTCE, GEOID, place_name

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>place</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 73,057 × 5
   STATEFP COUNTYFP TRACTCE GEOID       place_name
   &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt;     
 1 01      001      020100  01001020100 Prattville
 2 01      001      020200  01001020200 Prattville
 3 01      001      020300  01001020300 Prattville
 4 01      001      020400  01001020400 Prattville
 5 01      001      020500  01001020500 Prattville
 6 01      001      020600  01001020600 Prattville
 7 01      001      020700  01001020700 Prattville
 8 01      001      020801  01001020801 &lt;NA&gt;      
 9 01      001      020802  01001020802 &lt;NA&gt;      
10 01      001      020900  01001020900 &lt;NA&gt;      
# … with 73,047 more rows</code></pre>
</div>
</div>
<p>If you take a look at both tables, you’ll note that they have a field in common called geoid. This represents a unique code that is assigned to each census tract geography. Technically, this is a FIPS (<a href="https://www.nist.gov/standardsgov/compliance-faqs-federal-information-processing-standards-fips">Federal Information Processing Standards</a>) code. FIPS codes for tracts are hierarchical - the first two digits are unique to each state, the next three digits correspond to each county, and the remaining six digits are unique to each census tract in that county.</p>
<p>Because each tract is labelled with corresponding FIPS codes, we can join the two datasets together based upon this common field. This will become a fairly common action for you that you will repeat over the course of this class.</p>
<p>Next, we should think carefully about what kind of join we want. We know we have ozs data for a subset of census tracts in the U.S. and we have the place data for a more expansive set of tracts. If we want to preserve the more extensive data (including those rows that do not match up with oz- eligible tracts), what type of join should we use and how would we construct it?</p>
<p>Just to make sure we get this correct, I’m going to provide you with the way to complete your first join on real data. We have one more issue to deal with here to successfully join our data together. Recall that join takes three arguments - two table objects to join together and at least one common field to complete the join based on. These columns are both labelled geoid, but one is capitalized and one is not. We’ll need to tell our join function that these two columns with different names (different in that one is capitalized and one is not) should be joined to each other. We use the modified <code>by=c("GEOID" = "geoid")</code> to denote that GEOID in the place data should be joined to geoid in the ozs data. If the names were the same (say, both were GEOID), we could simply say <code>by="GEOID"</code> and this would work.</p>
<p>Okay, with that out of the way, let’s join our data together:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>dataset<span class="ot">&lt;-</span><span class="fu">left_join</span>(place, ozs, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"GEOID"</span> <span class="ot">=</span> <span class="st">"geoid"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Into a new object called dataset, we joined all rows from place and those records from ozs that matched. Records from place without a match in ozs will have NA where there could be data.</p>
<p>Take a look at the data:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(dataset)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Start by looking at the number of rows in the data - 73,057 - the same number as in the place data - we have brought in all rows from the place data and have joined to in matching rows in the ozs data. It would be useful for us to start off by knowing how many rows fall into each of our three categories - ineligible for designated, eligible and undesignated, and eligible and designated. At this point, the <code>NA</code> values in the Designated column reflect ineligible, the 0’s in that column reflect eligible but not designated, and the 1’s represent eligible and designated.</p>
<p>Use your new knowledge of dplyr’s <code>group_by()</code> and <code>summarise()</code> to create a summary table based upon the three values that we expect the Designated column to take. You’ve learned that you could define what type of summary you’d like to produce in your <code>summarise()</code> statement. Let’s use <code>n()</code> which counts the number of rows that meet each category specified in group_by():</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Designated) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  Designated     `n()`
  &lt;chr&gt;          &lt;int&gt;
1 Designated      7825
2 Not Designated 33391
3 &lt;NA&gt;           31841</code></pre>
</div>
</div>
<p>You should see that we have 31,841 rows (census tracts) that were ineligible for designation, an additional 33,391 that were eligible but not designated, and 7,825 that were eligible and designated. Excellent!</p>
<p>What might you want to do next to be able to properly label the three categories that now exist for designated?</p>
</section>
</section>
<section id="making-nice-tables" class="level2">
<h2 class="anchored" data-anchor-id="making-nice-tables">Making Nice Tables</h2>
<p>As many of you have remarked in class, outputting “nice” tables is not R’s default. There are several packages that can help to clean up tables and make them presentable. Let’s learn how to use one such package, the <code>gt</code> package. Similar to how GGPlot describes a <em>grammar of graphics</em> for visualizations, gt similarly provides methods to shape elements of a table.</p>
<section id="table-components-in-gt" class="level3">
<h3 class="anchored" data-anchor-id="table-components-in-gt">Table Components in GT</h3>
<p>In GT, there are numerous table components which you can format as you wish:</p>
<p><img src="https://gt.rstudio.com/reference/figures/gt_parts_of_a_table.svg" class="img-fluid"></p>
<p>gt’s <a href="https://gt.rstudio.com">documentation</a> can help you become more familiar with these different components.</p>
</section>
<section id="making-a-first-gt-table" class="level3">
<h3 class="anchored" data-anchor-id="making-a-first-gt-table">Making a First GT Table</h3>
<p>Let’s start off by taking the Illinois data we were previously working on and styling the table using gt:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"Illinois"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county, Designated) <span class="sc">|&gt;</span> </span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Designated, <span class="at">values_from =</span> Income) <span class="sc">|&gt;</span> </span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Difference =</span> Designated <span class="sc">-</span> <span class="st">`</span><span class="at">Not Designated</span><span class="st">`</span>) <span class="sc">|&gt;</span> </span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="hducfbytlf" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#hducfbytlf) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#hducfbytlf) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#hducfbytlf) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#hducfbytlf) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#hducfbytlf) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#hducfbytlf) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#hducfbytlf) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#hducfbytlf) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#hducfbytlf) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#hducfbytlf) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#hducfbytlf) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#hducfbytlf) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#hducfbytlf) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#hducfbytlf) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#hducfbytlf) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#hducfbytlf) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#hducfbytlf) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#hducfbytlf) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#hducfbytlf) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#hducfbytlf) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#hducfbytlf) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#hducfbytlf) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#hducfbytlf) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#hducfbytlf) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#hducfbytlf) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#hducfbytlf) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#hducfbytlf) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#hducfbytlf) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#hducfbytlf) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#hducfbytlf) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#hducfbytlf) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#hducfbytlf) .gt_left {
  text-align: left;
}

:where(#hducfbytlf) .gt_center {
  text-align: center;
}

:where(#hducfbytlf) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#hducfbytlf) .gt_font_normal {
  font-weight: normal;
}

:where(#hducfbytlf) .gt_font_bold {
  font-weight: bold;
}

:where(#hducfbytlf) .gt_font_italic {
  font-style: italic;
}

:where(#hducfbytlf) .gt_super {
  font-size: 65%;
}

:where(#hducfbytlf) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#hducfbytlf) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#hducfbytlf) .gt_indent_1 {
  text-indent: 5px;
}

:where(#hducfbytlf) .gt_indent_2 {
  text-indent: 10px;
}

:where(#hducfbytlf) .gt_indent_3 {
  text-indent: 15px;
}

:where(#hducfbytlf) .gt_indent_4 {
  text-indent: 20px;
}

:where(#hducfbytlf) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Designated</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Not Designated</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Difference</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Adams County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">26012.00</td>
<td class="gt_row gt_right">39614.22</td>
<td class="gt_row gt_right">-13602.2222</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Alexander County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">21500.00</td>
<td class="gt_row gt_right">32809.00</td>
<td class="gt_row gt_right">-11309.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Bond County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">49590.00</td>
<td class="gt_row gt_right">52310.00</td>
<td class="gt_row gt_right">-2720.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Boone County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">40599.00</td>
<td class="gt_row gt_right">45742.00</td>
<td class="gt_row gt_right">-5143.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Bureau County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">48083.00</td>
<td class="gt_row gt_right">60338.67</td>
<td class="gt_row gt_right">-12255.6667</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Calhoun County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">55290.00</td>
<td class="gt_row gt_right">NA</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Carroll County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">35184.00</td>
<td class="gt_row gt_right">58942.00</td>
<td class="gt_row gt_right">-23758.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Cass County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">37679.00</td>
<td class="gt_row gt_right">46840.50</td>
<td class="gt_row gt_right">-9161.5000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Champaign County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">13988.83</td>
<td class="gt_row gt_right">45603.57</td>
<td class="gt_row gt_right">-31614.7319</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Christian County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">36164.00</td>
<td class="gt_row gt_right">45945.43</td>
<td class="gt_row gt_right">-9781.4286</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Clark County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">44460.00</td>
<td class="gt_row gt_right">50004.67</td>
<td class="gt_row gt_right">-5544.6667</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Clay County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">39261.00</td>
<td class="gt_row gt_right">50853.00</td>
<td class="gt_row gt_right">-11592.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Clinton County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">38047.00</td>
<td class="gt_row gt_right">51269.00</td>
<td class="gt_row gt_right">-13222.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Coles County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">30682.00</td>
<td class="gt_row gt_right">37615.00</td>
<td class="gt_row gt_right">-6933.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Cook County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">29154.50</td>
<td class="gt_row gt_right">45208.69</td>
<td class="gt_row gt_right">-16054.1904</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Crawford County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">41071.00</td>
<td class="gt_row gt_right">47089.67</td>
<td class="gt_row gt_right">-6018.6667</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Cumberland County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">41761.00</td>
<td class="gt_row gt_right">43780.00</td>
<td class="gt_row gt_right">-2019.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">De Witt County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">44181.00</td>
<td class="gt_row gt_right">44048.00</td>
<td class="gt_row gt_right">133.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">DeKalb County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">18462.67</td>
<td class="gt_row gt_right">55294.50</td>
<td class="gt_row gt_right">-36831.8333</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Douglas County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">54444.00</td>
<td class="gt_row gt_right">51593.50</td>
<td class="gt_row gt_right">2850.5000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">DuPage County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">47140.00</td>
<td class="gt_row gt_right">60237.04</td>
<td class="gt_row gt_right">-13097.0435</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Edgar County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">39306.00</td>
<td class="gt_row gt_right">47314.00</td>
<td class="gt_row gt_right">-8008.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Edwards County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">39844.00</td>
<td class="gt_row gt_right">51919.00</td>
<td class="gt_row gt_right">-12075.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Effingham County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">34028.00</td>
<td class="gt_row gt_right">47879.67</td>
<td class="gt_row gt_right">-13851.6667</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Fayette County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">34375.00</td>
<td class="gt_row gt_right">44675.67</td>
<td class="gt_row gt_right">-10300.6667</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Franklin County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">36469.00</td>
<td class="gt_row gt_right">40014.18</td>
<td class="gt_row gt_right">-3545.1818</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Fulton County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">38279.00</td>
<td class="gt_row gt_right">45053.11</td>
<td class="gt_row gt_right">-6774.1111</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Gallatin County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">38750.00</td>
<td class="gt_row gt_right">45074.00</td>
<td class="gt_row gt_right">-6324.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Greene County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">35469.00</td>
<td class="gt_row gt_right">43493.25</td>
<td class="gt_row gt_right">-8024.2500</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Hamilton County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">54293.00</td>
<td class="gt_row gt_right">47627.50</td>
<td class="gt_row gt_right">6665.5000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Hancock County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">50924.00</td>
<td class="gt_row gt_right">49058.00</td>
<td class="gt_row gt_right">1866.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Hardin County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">34250.00</td>
<td class="gt_row gt_right">43860.00</td>
<td class="gt_row gt_right">-9610.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Henderson County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">49453.00</td>
<td class="gt_row gt_right">45447.50</td>
<td class="gt_row gt_right">4005.5000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Henry County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">31845.00</td>
<td class="gt_row gt_right">45385.20</td>
<td class="gt_row gt_right">-13540.2000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Iroquois County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">34167.00</td>
<td class="gt_row gt_right">47590.80</td>
<td class="gt_row gt_right">-13423.8000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Jackson County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">16960.00</td>
<td class="gt_row gt_right">34503.50</td>
<td class="gt_row gt_right">-17543.5000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Jasper County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">39909.00</td>
<td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">NA</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Jefferson County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">18411.00</td>
<td class="gt_row gt_right">45013.62</td>
<td class="gt_row gt_right">-26602.6250</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Jersey County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">54435.00</td>
<td class="gt_row gt_right">49565.25</td>
<td class="gt_row gt_right">4869.7500</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Jo Daviess County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">46731.00</td>
<td class="gt_row gt_right">49293.50</td>
<td class="gt_row gt_right">-2562.5000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Johnson County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">40578.00</td>
<td class="gt_row gt_right">38164.67</td>
<td class="gt_row gt_right">2413.3333</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Kane County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">47129.00</td>
<td class="gt_row gt_right">50278.10</td>
<td class="gt_row gt_right">-3149.1000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Kankakee County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">23971.50</td>
<td class="gt_row gt_right">48993.08</td>
<td class="gt_row gt_right">-25021.5769</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Knox County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">23011.00</td>
<td class="gt_row gt_right">36096.67</td>
<td class="gt_row gt_right">-13085.6667</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Lake County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">29174.60</td>
<td class="gt_row gt_right">48117.03</td>
<td class="gt_row gt_right">-18942.4303</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">LaSalle County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">38625.00</td>
<td class="gt_row gt_right">46211.08</td>
<td class="gt_row gt_right">-7586.0769</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Lawrence County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">37883.00</td>
<td class="gt_row gt_right">42074.33</td>
<td class="gt_row gt_right">-4191.3333</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Lee County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">43750.00</td>
<td class="gt_row gt_right">53669.33</td>
<td class="gt_row gt_right">-9919.3333</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Livingston County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">33250.00</td>
<td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">NA</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Logan County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">41824.00</td>
<td class="gt_row gt_right">54024.25</td>
<td class="gt_row gt_right">-12200.2500</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Macon County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">21405.20</td>
<td class="gt_row gt_right">40130.44</td>
<td class="gt_row gt_right">-18725.2375</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Macoupin County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">48000.00</td>
<td class="gt_row gt_right">53369.14</td>
<td class="gt_row gt_right">-5369.1429</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Madison County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">28699.80</td>
<td class="gt_row gt_right">49991.43</td>
<td class="gt_row gt_right">-21291.6286</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Marion County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">24932.00</td>
<td class="gt_row gt_right">39650.29</td>
<td class="gt_row gt_right">-14718.2857</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Marshall County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">49625.00</td>
<td class="gt_row gt_right">56748.00</td>
<td class="gt_row gt_right">-7123.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Mason County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">35179.00</td>
<td class="gt_row gt_right">46672.20</td>
<td class="gt_row gt_right">-11493.2000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Massac County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">32198.00</td>
<td class="gt_row gt_right">44130.00</td>
<td class="gt_row gt_right">-11932.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">McDonough County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">NaN</td>
<td class="gt_row gt_right">44538.33</td>
<td class="gt_row gt_right">NaN</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">McHenry County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">42972.00</td>
<td class="gt_row gt_right">49938.00</td>
<td class="gt_row gt_right">-6966.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">McLean County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">11053.00</td>
<td class="gt_row gt_right">43965.63</td>
<td class="gt_row gt_right">-32912.6316</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Mercer County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">46705.00</td>
<td class="gt_row gt_right">NA</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Montgomery County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">44438.00</td>
<td class="gt_row gt_right">43921.67</td>
<td class="gt_row gt_right">516.3333</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Morgan County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">34314.00</td>
<td class="gt_row gt_right">38475.33</td>
<td class="gt_row gt_right">-4161.3333</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Moultrie County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">40761.00</td>
<td class="gt_row gt_right">59008.00</td>
<td class="gt_row gt_right">-18247.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Ogle County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">43393.00</td>
<td class="gt_row gt_right">47580.00</td>
<td class="gt_row gt_right">-4187.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Peoria County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">20660.00</td>
<td class="gt_row gt_right">39899.95</td>
<td class="gt_row gt_right">-19239.9545</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Perry County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">31635.00</td>
<td class="gt_row gt_right">47934.00</td>
<td class="gt_row gt_right">-16299.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Piatt County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">50185.00</td>
<td class="gt_row gt_right">NA</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Pike County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">37837.00</td>
<td class="gt_row gt_right">41462.75</td>
<td class="gt_row gt_right">-3625.7500</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Pope County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">32396.00</td>
<td class="gt_row gt_right">44375.00</td>
<td class="gt_row gt_right">-11979.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Pulaski County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">28884.00</td>
<td class="gt_row gt_right">35643.00</td>
<td class="gt_row gt_right">-6759.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Randolph County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">36902.00</td>
<td class="gt_row gt_right">48542.14</td>
<td class="gt_row gt_right">-11640.1429</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Richland County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">24671.00</td>
<td class="gt_row gt_right">48985.75</td>
<td class="gt_row gt_right">-24314.7500</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Rock Island County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">31542.50</td>
<td class="gt_row gt_right">40817.41</td>
<td class="gt_row gt_right">-9274.9091</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Saline County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">32188.00</td>
<td class="gt_row gt_right">43553.62</td>
<td class="gt_row gt_right">-11365.6250</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Sangamon County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">22488.80</td>
<td class="gt_row gt_right">40009.96</td>
<td class="gt_row gt_right">-17521.1600</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Schuyler County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">52768.00</td>
<td class="gt_row gt_right">48594.00</td>
<td class="gt_row gt_right">4174.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Scott County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">47024.00</td>
<td class="gt_row gt_right">NA</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Shelby County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">37689.00</td>
<td class="gt_row gt_right">49664.25</td>
<td class="gt_row gt_right">-11975.2500</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">St. Clair County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">20159.71</td>
<td class="gt_row gt_right">32147.79</td>
<td class="gt_row gt_right">-11988.0774</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Stark County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">52614.00</td>
<td class="gt_row gt_right">NA</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Stephenson County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">26674.50</td>
<td class="gt_row gt_right">46470.00</td>
<td class="gt_row gt_right">-19795.5000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Tazewell County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">47367.00</td>
<td class="gt_row gt_right">47820.73</td>
<td class="gt_row gt_right">-453.7273</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Union County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">40506.00</td>
<td class="gt_row gt_right">48029.75</td>
<td class="gt_row gt_right">-7523.7500</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Vermilion County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">28462.33</td>
<td class="gt_row gt_right">39596.79</td>
<td class="gt_row gt_right">-11134.4524</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Wabash County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">54207.00</td>
<td class="gt_row gt_right">NA</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Warren County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">37185.00</td>
<td class="gt_row gt_right">48814.67</td>
<td class="gt_row gt_right">-11629.6667</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Washington County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">46406.00</td>
<td class="gt_row gt_right">57554.00</td>
<td class="gt_row gt_right">-11148.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Wayne County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">47645.00</td>
<td class="gt_row gt_right">45951.25</td>
<td class="gt_row gt_right">1693.7500</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">White County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">31250.00</td>
<td class="gt_row gt_right">48981.00</td>
<td class="gt_row gt_right">-17731.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Whiteside County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">45106.00</td>
<td class="gt_row gt_right">45458.10</td>
<td class="gt_row gt_right">-352.1000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Will County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">30419.00</td>
<td class="gt_row gt_right">50754.27</td>
<td class="gt_row gt_right">-20335.2667</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Williamson County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">38083.00</td>
<td class="gt_row gt_right">42193.00</td>
<td class="gt_row gt_right">-4110.0000</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Winnebago County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">20346.00</td>
<td class="gt_row gt_right">37655.07</td>
<td class="gt_row gt_right">-17309.0714</td></tr>
    <tr class="gt_group_heading_row">
      <td colspan="3" class="gt_group_heading">Woodford County</td>
    </tr>
    <tr class="gt_row_group_first"><td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">61875.00</td>
<td class="gt_row gt_right">NA</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>We simply added <code>gt()</code> as a final command after producing a summary table.</p>
</section>
<section id="formatting-columns" class="level3">
<h3 class="anchored" data-anchor-id="formatting-columns">Formatting Columns</h3>
<p>There’s a range of formatting options we can take advantage of to style our table. most formatting options begin with <code>fmt_</code> which makes it fairly easy to search for the format type you’re looking for. Let’s format the “Designated”, “Not Designated”, and “Difference” columns as currency with no decimal places. While we’re at it, let’s rename the “county” column so “county” is capitalized:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"Illinois"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county, Designated) <span class="sc">|&gt;</span> </span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Designated, <span class="at">values_from =</span> Income) <span class="sc">|&gt;</span> </span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Difference =</span> Designated <span class="sc">-</span> <span class="st">`</span><span class="at">Not Designated</span><span class="st">`</span>) <span class="sc">|&gt;</span> </span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_currency</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">county =</span> <span class="st">"County"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="bbbluruixb" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#bbbluruixb) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#bbbluruixb) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#bbbluruixb) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#bbbluruixb) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#bbbluruixb) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#bbbluruixb) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#bbbluruixb) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#bbbluruixb) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#bbbluruixb) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#bbbluruixb) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#bbbluruixb) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#bbbluruixb) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#bbbluruixb) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#bbbluruixb) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#bbbluruixb) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#bbbluruixb) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#bbbluruixb) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#bbbluruixb) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#bbbluruixb) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#bbbluruixb) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#bbbluruixb) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#bbbluruixb) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#bbbluruixb) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#bbbluruixb) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#bbbluruixb) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#bbbluruixb) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#bbbluruixb) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#bbbluruixb) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#bbbluruixb) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#bbbluruixb) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#bbbluruixb) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#bbbluruixb) .gt_left {
  text-align: left;
}

:where(#bbbluruixb) .gt_center {
  text-align: center;
}

:where(#bbbluruixb) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#bbbluruixb) .gt_font_normal {
  font-weight: normal;
}

:where(#bbbluruixb) .gt_font_bold {
  font-weight: bold;
}

:where(#bbbluruixb) .gt_font_italic {
  font-style: italic;
}

:where(#bbbluruixb) .gt_super {
  font-size: 65%;
}

:where(#bbbluruixb) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#bbbluruixb) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#bbbluruixb) .gt_indent_1 {
  text-indent: 5px;
}

:where(#bbbluruixb) .gt_indent_2 {
  text-indent: 10px;
}

:where(#bbbluruixb) .gt_indent_3 {
  text-indent: 15px;
}

:where(#bbbluruixb) .gt_indent_4 {
  text-indent: 20px;
}

:where(#bbbluruixb) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col">County</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Designated</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Not Designated</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col">Difference</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">Adams County</td>
<td class="gt_row gt_right">$26,012</td>
<td class="gt_row gt_right">$39,614</td>
<td class="gt_row gt_right">−$13,602</td></tr>
    <tr><td class="gt_row gt_left">Alexander County</td>
<td class="gt_row gt_right">$21,500</td>
<td class="gt_row gt_right">$32,809</td>
<td class="gt_row gt_right">−$11,309</td></tr>
    <tr><td class="gt_row gt_left">Bond County</td>
<td class="gt_row gt_right">$49,590</td>
<td class="gt_row gt_right">$52,310</td>
<td class="gt_row gt_right">−$2,720</td></tr>
    <tr><td class="gt_row gt_left">Boone County</td>
<td class="gt_row gt_right">$40,599</td>
<td class="gt_row gt_right">$45,742</td>
<td class="gt_row gt_right">−$5,143</td></tr>
    <tr><td class="gt_row gt_left">Bureau County</td>
<td class="gt_row gt_right">$48,083</td>
<td class="gt_row gt_right">$60,339</td>
<td class="gt_row gt_right">−$12,256</td></tr>
    <tr><td class="gt_row gt_left">Calhoun County</td>
<td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">$55,290</td>
<td class="gt_row gt_right">NA</td></tr>
    <tr><td class="gt_row gt_left">Carroll County</td>
<td class="gt_row gt_right">$35,184</td>
<td class="gt_row gt_right">$58,942</td>
<td class="gt_row gt_right">−$23,758</td></tr>
    <tr><td class="gt_row gt_left">Cass County</td>
<td class="gt_row gt_right">$37,679</td>
<td class="gt_row gt_right">$46,840</td>
<td class="gt_row gt_right">−$9,162</td></tr>
    <tr><td class="gt_row gt_left">Champaign County</td>
<td class="gt_row gt_right">$13,989</td>
<td class="gt_row gt_right">$45,604</td>
<td class="gt_row gt_right">−$31,615</td></tr>
    <tr><td class="gt_row gt_left">Christian County</td>
<td class="gt_row gt_right">$36,164</td>
<td class="gt_row gt_right">$45,945</td>
<td class="gt_row gt_right">−$9,781</td></tr>
    <tr><td class="gt_row gt_left">Clark County</td>
<td class="gt_row gt_right">$44,460</td>
<td class="gt_row gt_right">$50,005</td>
<td class="gt_row gt_right">−$5,545</td></tr>
    <tr><td class="gt_row gt_left">Clay County</td>
<td class="gt_row gt_right">$39,261</td>
<td class="gt_row gt_right">$50,853</td>
<td class="gt_row gt_right">−$11,592</td></tr>
    <tr><td class="gt_row gt_left">Clinton County</td>
<td class="gt_row gt_right">$38,047</td>
<td class="gt_row gt_right">$51,269</td>
<td class="gt_row gt_right">−$13,222</td></tr>
    <tr><td class="gt_row gt_left">Coles County</td>
<td class="gt_row gt_right">$30,682</td>
<td class="gt_row gt_right">$37,615</td>
<td class="gt_row gt_right">−$6,933</td></tr>
    <tr><td class="gt_row gt_left">Cook County</td>
<td class="gt_row gt_right">$29,155</td>
<td class="gt_row gt_right">$45,209</td>
<td class="gt_row gt_right">−$16,054</td></tr>
    <tr><td class="gt_row gt_left">Crawford County</td>
<td class="gt_row gt_right">$41,071</td>
<td class="gt_row gt_right">$47,090</td>
<td class="gt_row gt_right">−$6,019</td></tr>
    <tr><td class="gt_row gt_left">Cumberland County</td>
<td class="gt_row gt_right">$41,761</td>
<td class="gt_row gt_right">$43,780</td>
<td class="gt_row gt_right">−$2,019</td></tr>
    <tr><td class="gt_row gt_left">De Witt County</td>
<td class="gt_row gt_right">$44,181</td>
<td class="gt_row gt_right">$44,048</td>
<td class="gt_row gt_right">$133</td></tr>
    <tr><td class="gt_row gt_left">DeKalb County</td>
<td class="gt_row gt_right">$18,463</td>
<td class="gt_row gt_right">$55,294</td>
<td class="gt_row gt_right">−$36,832</td></tr>
    <tr><td class="gt_row gt_left">Douglas County</td>
<td class="gt_row gt_right">$54,444</td>
<td class="gt_row gt_right">$51,594</td>
<td class="gt_row gt_right">$2,850</td></tr>
    <tr><td class="gt_row gt_left">DuPage County</td>
<td class="gt_row gt_right">$47,140</td>
<td class="gt_row gt_right">$60,237</td>
<td class="gt_row gt_right">−$13,097</td></tr>
    <tr><td class="gt_row gt_left">Edgar County</td>
<td class="gt_row gt_right">$39,306</td>
<td class="gt_row gt_right">$47,314</td>
<td class="gt_row gt_right">−$8,008</td></tr>
    <tr><td class="gt_row gt_left">Edwards County</td>
<td class="gt_row gt_right">$39,844</td>
<td class="gt_row gt_right">$51,919</td>
<td class="gt_row gt_right">−$12,075</td></tr>
    <tr><td class="gt_row gt_left">Effingham County</td>
<td class="gt_row gt_right">$34,028</td>
<td class="gt_row gt_right">$47,880</td>
<td class="gt_row gt_right">−$13,852</td></tr>
    <tr><td class="gt_row gt_left">Fayette County</td>
<td class="gt_row gt_right">$34,375</td>
<td class="gt_row gt_right">$44,676</td>
<td class="gt_row gt_right">−$10,301</td></tr>
    <tr><td class="gt_row gt_left">Franklin County</td>
<td class="gt_row gt_right">$36,469</td>
<td class="gt_row gt_right">$40,014</td>
<td class="gt_row gt_right">−$3,545</td></tr>
    <tr><td class="gt_row gt_left">Fulton County</td>
<td class="gt_row gt_right">$38,279</td>
<td class="gt_row gt_right">$45,053</td>
<td class="gt_row gt_right">−$6,774</td></tr>
    <tr><td class="gt_row gt_left">Gallatin County</td>
<td class="gt_row gt_right">$38,750</td>
<td class="gt_row gt_right">$45,074</td>
<td class="gt_row gt_right">−$6,324</td></tr>
    <tr><td class="gt_row gt_left">Greene County</td>
<td class="gt_row gt_right">$35,469</td>
<td class="gt_row gt_right">$43,493</td>
<td class="gt_row gt_right">−$8,024</td></tr>
    <tr><td class="gt_row gt_left">Hamilton County</td>
<td class="gt_row gt_right">$54,293</td>
<td class="gt_row gt_right">$47,628</td>
<td class="gt_row gt_right">$6,666</td></tr>
    <tr><td class="gt_row gt_left">Hancock County</td>
<td class="gt_row gt_right">$50,924</td>
<td class="gt_row gt_right">$49,058</td>
<td class="gt_row gt_right">$1,866</td></tr>
    <tr><td class="gt_row gt_left">Hardin County</td>
<td class="gt_row gt_right">$34,250</td>
<td class="gt_row gt_right">$43,860</td>
<td class="gt_row gt_right">−$9,610</td></tr>
    <tr><td class="gt_row gt_left">Henderson County</td>
<td class="gt_row gt_right">$49,453</td>
<td class="gt_row gt_right">$45,448</td>
<td class="gt_row gt_right">$4,006</td></tr>
    <tr><td class="gt_row gt_left">Henry County</td>
<td class="gt_row gt_right">$31,845</td>
<td class="gt_row gt_right">$45,385</td>
<td class="gt_row gt_right">−$13,540</td></tr>
    <tr><td class="gt_row gt_left">Iroquois County</td>
<td class="gt_row gt_right">$34,167</td>
<td class="gt_row gt_right">$47,591</td>
<td class="gt_row gt_right">−$13,424</td></tr>
    <tr><td class="gt_row gt_left">Jackson County</td>
<td class="gt_row gt_right">$16,960</td>
<td class="gt_row gt_right">$34,504</td>
<td class="gt_row gt_right">−$17,544</td></tr>
    <tr><td class="gt_row gt_left">Jasper County</td>
<td class="gt_row gt_right">$39,909</td>
<td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">NA</td></tr>
    <tr><td class="gt_row gt_left">Jefferson County</td>
<td class="gt_row gt_right">$18,411</td>
<td class="gt_row gt_right">$45,014</td>
<td class="gt_row gt_right">−$26,603</td></tr>
    <tr><td class="gt_row gt_left">Jersey County</td>
<td class="gt_row gt_right">$54,435</td>
<td class="gt_row gt_right">$49,565</td>
<td class="gt_row gt_right">$4,870</td></tr>
    <tr><td class="gt_row gt_left">Jo Daviess County</td>
<td class="gt_row gt_right">$46,731</td>
<td class="gt_row gt_right">$49,294</td>
<td class="gt_row gt_right">−$2,562</td></tr>
    <tr><td class="gt_row gt_left">Johnson County</td>
<td class="gt_row gt_right">$40,578</td>
<td class="gt_row gt_right">$38,165</td>
<td class="gt_row gt_right">$2,413</td></tr>
    <tr><td class="gt_row gt_left">Kane County</td>
<td class="gt_row gt_right">$47,129</td>
<td class="gt_row gt_right">$50,278</td>
<td class="gt_row gt_right">−$3,149</td></tr>
    <tr><td class="gt_row gt_left">Kankakee County</td>
<td class="gt_row gt_right">$23,972</td>
<td class="gt_row gt_right">$48,993</td>
<td class="gt_row gt_right">−$25,022</td></tr>
    <tr><td class="gt_row gt_left">Knox County</td>
<td class="gt_row gt_right">$23,011</td>
<td class="gt_row gt_right">$36,097</td>
<td class="gt_row gt_right">−$13,086</td></tr>
    <tr><td class="gt_row gt_left">Lake County</td>
<td class="gt_row gt_right">$29,175</td>
<td class="gt_row gt_right">$48,117</td>
<td class="gt_row gt_right">−$18,942</td></tr>
    <tr><td class="gt_row gt_left">LaSalle County</td>
<td class="gt_row gt_right">$38,625</td>
<td class="gt_row gt_right">$46,211</td>
<td class="gt_row gt_right">−$7,586</td></tr>
    <tr><td class="gt_row gt_left">Lawrence County</td>
<td class="gt_row gt_right">$37,883</td>
<td class="gt_row gt_right">$42,074</td>
<td class="gt_row gt_right">−$4,191</td></tr>
    <tr><td class="gt_row gt_left">Lee County</td>
<td class="gt_row gt_right">$43,750</td>
<td class="gt_row gt_right">$53,669</td>
<td class="gt_row gt_right">−$9,919</td></tr>
    <tr><td class="gt_row gt_left">Livingston County</td>
<td class="gt_row gt_right">$33,250</td>
<td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">NA</td></tr>
    <tr><td class="gt_row gt_left">Logan County</td>
<td class="gt_row gt_right">$41,824</td>
<td class="gt_row gt_right">$54,024</td>
<td class="gt_row gt_right">−$12,200</td></tr>
    <tr><td class="gt_row gt_left">Macon County</td>
<td class="gt_row gt_right">$21,405</td>
<td class="gt_row gt_right">$40,130</td>
<td class="gt_row gt_right">−$18,725</td></tr>
    <tr><td class="gt_row gt_left">Macoupin County</td>
<td class="gt_row gt_right">$48,000</td>
<td class="gt_row gt_right">$53,369</td>
<td class="gt_row gt_right">−$5,369</td></tr>
    <tr><td class="gt_row gt_left">Madison County</td>
<td class="gt_row gt_right">$28,700</td>
<td class="gt_row gt_right">$49,991</td>
<td class="gt_row gt_right">−$21,292</td></tr>
    <tr><td class="gt_row gt_left">Marion County</td>
<td class="gt_row gt_right">$24,932</td>
<td class="gt_row gt_right">$39,650</td>
<td class="gt_row gt_right">−$14,718</td></tr>
    <tr><td class="gt_row gt_left">Marshall County</td>
<td class="gt_row gt_right">$49,625</td>
<td class="gt_row gt_right">$56,748</td>
<td class="gt_row gt_right">−$7,123</td></tr>
    <tr><td class="gt_row gt_left">Mason County</td>
<td class="gt_row gt_right">$35,179</td>
<td class="gt_row gt_right">$46,672</td>
<td class="gt_row gt_right">−$11,493</td></tr>
    <tr><td class="gt_row gt_left">Massac County</td>
<td class="gt_row gt_right">$32,198</td>
<td class="gt_row gt_right">$44,130</td>
<td class="gt_row gt_right">−$11,932</td></tr>
    <tr><td class="gt_row gt_left">McDonough County</td>
<td class="gt_row gt_right">NaN</td>
<td class="gt_row gt_right">$44,538</td>
<td class="gt_row gt_right">NaN</td></tr>
    <tr><td class="gt_row gt_left">McHenry County</td>
<td class="gt_row gt_right">$42,972</td>
<td class="gt_row gt_right">$49,938</td>
<td class="gt_row gt_right">−$6,966</td></tr>
    <tr><td class="gt_row gt_left">McLean County</td>
<td class="gt_row gt_right">$11,053</td>
<td class="gt_row gt_right">$43,966</td>
<td class="gt_row gt_right">−$32,913</td></tr>
    <tr><td class="gt_row gt_left">Mercer County</td>
<td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">$46,705</td>
<td class="gt_row gt_right">NA</td></tr>
    <tr><td class="gt_row gt_left">Montgomery County</td>
<td class="gt_row gt_right">$44,438</td>
<td class="gt_row gt_right">$43,922</td>
<td class="gt_row gt_right">$516</td></tr>
    <tr><td class="gt_row gt_left">Morgan County</td>
<td class="gt_row gt_right">$34,314</td>
<td class="gt_row gt_right">$38,475</td>
<td class="gt_row gt_right">−$4,161</td></tr>
    <tr><td class="gt_row gt_left">Moultrie County</td>
<td class="gt_row gt_right">$40,761</td>
<td class="gt_row gt_right">$59,008</td>
<td class="gt_row gt_right">−$18,247</td></tr>
    <tr><td class="gt_row gt_left">Ogle County</td>
<td class="gt_row gt_right">$43,393</td>
<td class="gt_row gt_right">$47,580</td>
<td class="gt_row gt_right">−$4,187</td></tr>
    <tr><td class="gt_row gt_left">Peoria County</td>
<td class="gt_row gt_right">$20,660</td>
<td class="gt_row gt_right">$39,900</td>
<td class="gt_row gt_right">−$19,240</td></tr>
    <tr><td class="gt_row gt_left">Perry County</td>
<td class="gt_row gt_right">$31,635</td>
<td class="gt_row gt_right">$47,934</td>
<td class="gt_row gt_right">−$16,299</td></tr>
    <tr><td class="gt_row gt_left">Piatt County</td>
<td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">$50,185</td>
<td class="gt_row gt_right">NA</td></tr>
    <tr><td class="gt_row gt_left">Pike County</td>
<td class="gt_row gt_right">$37,837</td>
<td class="gt_row gt_right">$41,463</td>
<td class="gt_row gt_right">−$3,626</td></tr>
    <tr><td class="gt_row gt_left">Pope County</td>
<td class="gt_row gt_right">$32,396</td>
<td class="gt_row gt_right">$44,375</td>
<td class="gt_row gt_right">−$11,979</td></tr>
    <tr><td class="gt_row gt_left">Pulaski County</td>
<td class="gt_row gt_right">$28,884</td>
<td class="gt_row gt_right">$35,643</td>
<td class="gt_row gt_right">−$6,759</td></tr>
    <tr><td class="gt_row gt_left">Randolph County</td>
<td class="gt_row gt_right">$36,902</td>
<td class="gt_row gt_right">$48,542</td>
<td class="gt_row gt_right">−$11,640</td></tr>
    <tr><td class="gt_row gt_left">Richland County</td>
<td class="gt_row gt_right">$24,671</td>
<td class="gt_row gt_right">$48,986</td>
<td class="gt_row gt_right">−$24,315</td></tr>
    <tr><td class="gt_row gt_left">Rock Island County</td>
<td class="gt_row gt_right">$31,542</td>
<td class="gt_row gt_right">$40,817</td>
<td class="gt_row gt_right">−$9,275</td></tr>
    <tr><td class="gt_row gt_left">Saline County</td>
<td class="gt_row gt_right">$32,188</td>
<td class="gt_row gt_right">$43,554</td>
<td class="gt_row gt_right">−$11,366</td></tr>
    <tr><td class="gt_row gt_left">Sangamon County</td>
<td class="gt_row gt_right">$22,489</td>
<td class="gt_row gt_right">$40,010</td>
<td class="gt_row gt_right">−$17,521</td></tr>
    <tr><td class="gt_row gt_left">Schuyler County</td>
<td class="gt_row gt_right">$52,768</td>
<td class="gt_row gt_right">$48,594</td>
<td class="gt_row gt_right">$4,174</td></tr>
    <tr><td class="gt_row gt_left">Scott County</td>
<td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">$47,024</td>
<td class="gt_row gt_right">NA</td></tr>
    <tr><td class="gt_row gt_left">Shelby County</td>
<td class="gt_row gt_right">$37,689</td>
<td class="gt_row gt_right">$49,664</td>
<td class="gt_row gt_right">−$11,975</td></tr>
    <tr><td class="gt_row gt_left">St. Clair County</td>
<td class="gt_row gt_right">$20,160</td>
<td class="gt_row gt_right">$32,148</td>
<td class="gt_row gt_right">−$11,988</td></tr>
    <tr><td class="gt_row gt_left">Stark County</td>
<td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">$52,614</td>
<td class="gt_row gt_right">NA</td></tr>
    <tr><td class="gt_row gt_left">Stephenson County</td>
<td class="gt_row gt_right">$26,674</td>
<td class="gt_row gt_right">$46,470</td>
<td class="gt_row gt_right">−$19,796</td></tr>
    <tr><td class="gt_row gt_left">Tazewell County</td>
<td class="gt_row gt_right">$47,367</td>
<td class="gt_row gt_right">$47,821</td>
<td class="gt_row gt_right">−$454</td></tr>
    <tr><td class="gt_row gt_left">Union County</td>
<td class="gt_row gt_right">$40,506</td>
<td class="gt_row gt_right">$48,030</td>
<td class="gt_row gt_right">−$7,524</td></tr>
    <tr><td class="gt_row gt_left">Vermilion County</td>
<td class="gt_row gt_right">$28,462</td>
<td class="gt_row gt_right">$39,597</td>
<td class="gt_row gt_right">−$11,134</td></tr>
    <tr><td class="gt_row gt_left">Wabash County</td>
<td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">$54,207</td>
<td class="gt_row gt_right">NA</td></tr>
    <tr><td class="gt_row gt_left">Warren County</td>
<td class="gt_row gt_right">$37,185</td>
<td class="gt_row gt_right">$48,815</td>
<td class="gt_row gt_right">−$11,630</td></tr>
    <tr><td class="gt_row gt_left">Washington County</td>
<td class="gt_row gt_right">$46,406</td>
<td class="gt_row gt_right">$57,554</td>
<td class="gt_row gt_right">−$11,148</td></tr>
    <tr><td class="gt_row gt_left">Wayne County</td>
<td class="gt_row gt_right">$47,645</td>
<td class="gt_row gt_right">$45,951</td>
<td class="gt_row gt_right">$1,694</td></tr>
    <tr><td class="gt_row gt_left">White County</td>
<td class="gt_row gt_right">$31,250</td>
<td class="gt_row gt_right">$48,981</td>
<td class="gt_row gt_right">−$17,731</td></tr>
    <tr><td class="gt_row gt_left">Whiteside County</td>
<td class="gt_row gt_right">$45,106</td>
<td class="gt_row gt_right">$45,458</td>
<td class="gt_row gt_right">−$352</td></tr>
    <tr><td class="gt_row gt_left">Will County</td>
<td class="gt_row gt_right">$30,419</td>
<td class="gt_row gt_right">$50,754</td>
<td class="gt_row gt_right">−$20,335</td></tr>
    <tr><td class="gt_row gt_left">Williamson County</td>
<td class="gt_row gt_right">$38,083</td>
<td class="gt_row gt_right">$42,193</td>
<td class="gt_row gt_right">−$4,110</td></tr>
    <tr><td class="gt_row gt_left">Winnebago County</td>
<td class="gt_row gt_right">$20,346</td>
<td class="gt_row gt_right">$37,655</td>
<td class="gt_row gt_right">−$17,309</td></tr>
    <tr><td class="gt_row gt_left">Woodford County</td>
<td class="gt_row gt_right">NA</td>
<td class="gt_row gt_right">$61,875</td>
<td class="gt_row gt_right">NA</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>Note that <code>cols_label</code> allows us to adjust column labels by supplying the variable name and then the desired name of the column.</p>
<p>gt provides a <a href="https://gt.rstudio.com/articles/intro-creating-gt-tables.html">nice workflow example</a> to show you step by step how you might apply formatting options to style a table. Also see the <a href="https://gt.rstudio.com/reference/index.html">reference guide</a> for specific formats.</p>
</section>
<section id="saving-a-table" class="level3">
<h3 class="anchored" data-anchor-id="saving-a-table">Saving a Table</h3>
<p>We can easily use code to insert a table into our document, but what if you want to save it out as a separate file? The <code>gtsave()</code> command allows you to save your formatted table in a variety of formats.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"Illinois"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county, Designated) <span class="sc">|&gt;</span> </span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Designated, <span class="at">values_from =</span> Income) <span class="sc">|&gt;</span> </span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Difference =</span> Designated <span class="sc">-</span> <span class="st">`</span><span class="at">Not Designated</span><span class="st">`</span>) <span class="sc">|&gt;</span> </span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_currency</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">county =</span> <span class="st">"County"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gtsave</span>(<span class="st">"il_difference.png"</span>, <span class="st">"04_describing/output"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>And here’s the actual table that was produced:</p>
<p><img src="04_describing/output/il_difference.png" class="img-fluid"></p>
</section>
</section>
<section id="lab-evaluation" class="level2">
<h2 class="anchored" data-anchor-id="lab-evaluation">Lab Evaluation</h2>
<p>In evaluating your lab submission, we’ll be paying attention to the following:</p>
<p>As you get into the lab, please feel welcome to ask us questions, and please share where you’re struggling with us and with others in the class.</p>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb47" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Describing Places"</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="an">sidebar:</span><span class="co"> false</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="an">toc-depth:</span><span class="co"> 4</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="an">page-layout:</span><span class="co"> full</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="an">bibliography:</span><span class="co"> ../references.bib</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="an">csl:</span><span class="co"> ../apa-6th-edition.csl</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: show</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a><span class="co">    code-overflow: wrap</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools:</span></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a><span class="co">      source: true</span></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a><span class="co">      toggle: false</span></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a><span class="co">      caption: none</span></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a><span class="an">fig-responsive:</span><span class="co"> true</span></span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a><span class="fu">## Introduction</span></span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>In this lab, we'll learn some techniques for creating publication-quality summary tables while working to tell policy-relevant stories about places.</span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a>In addition to thinking about the basics of how we describe places, we will perform a basic policy analysis of the location of federal Opportunity Zones. This analysis will help illustrate how we can strategically build layers of stories. We'll add some basic information about all census tracts so that we can describe the differences between ineligible, eligible but not designated, and eligible and designated census tracts.</span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a><span class="fu">## Goals</span></span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Set up your computer so that RStudio can communicate with your Github account.</span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-31"><a href="#cb47-31" aria-hidden="true" tabindex="-1"></a><span class="fu">## Core Concepts</span></span>
<span id="cb47-32"><a href="#cb47-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-33"><a href="#cb47-33" aria-hidden="true" tabindex="-1"></a>This lab asks you to practice some basic data manipulation and management skills using the dplyr package.</span>
<span id="cb47-34"><a href="#cb47-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-35"><a href="#cb47-35" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Introduce several commonly used demographic indicators from the census</span>
<span id="cb47-36"><a href="#cb47-36" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Introduce how to join datasets together based upon a common field</span>
<span id="cb47-37"><a href="#cb47-37" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Introduce how to recode and classify data based upon one or more characteristics</span>
<span id="cb47-38"><a href="#cb47-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-39"><a href="#cb47-39" aria-hidden="true" tabindex="-1"></a>Let's get going...</span>
<span id="cb47-40"><a href="#cb47-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-41"><a href="#cb47-41" aria-hidden="true" tabindex="-1"></a><span class="fu">## Github Lab Repository</span></span>
<span id="cb47-42"><a href="#cb47-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-43"><a href="#cb47-43" aria-hidden="true" tabindex="-1"></a>If you have not already done so, follow <span class="co">[</span><span class="ot">this link</span><span class="co">](https://classroom.github.com/a/f9phgn1X)</span> to accept the lab Github Classroom assignment repository.</span>
<span id="cb47-44"><a href="#cb47-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-45"><a href="#cb47-45" aria-hidden="true" tabindex="-1"></a><span class="fu">## Principles of Tidy Data</span></span>
<span id="cb47-46"><a href="#cb47-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-47"><a href="#cb47-47" aria-hidden="true" tabindex="-1"></a>In the book <span class="co">[</span><span class="ot">*R for Data Science*</span><span class="co">](https://r4ds.had.co.nz/tidy-data.html)</span>, Hadley Wickam describes three principles for tidy data:</span>
<span id="cb47-48"><a href="#cb47-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-49"><a href="#cb47-49" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Each variable must have its own column</span>
<span id="cb47-50"><a href="#cb47-50" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Each observation must have its own row</span>
<span id="cb47-51"><a href="#cb47-51" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Each value must have its own cell</span>
<span id="cb47-52"><a href="#cb47-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-53"><a href="#cb47-53" aria-hidden="true" tabindex="-1"></a><span class="al">![](https://d33wubrfki0l68.cloudfront.net/6f1ddb544fc5c69a2478e444ab8112fb0eea23f8/91adc/images/tidy-1.png)</span> Much of the data we work with in the context of basic planning and policy analysis applications already conforms to this format (or is easily transformed into this format). This makes packages like <span class="in">`tidyverse`</span> particularly useful for the common types of data manipulation that we perform.</span>
<span id="cb47-54"><a href="#cb47-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-55"><a href="#cb47-55" aria-hidden="true" tabindex="-1"></a>While we'll occasionally use base r coding over the course of the semester, for the most part, we'll rely upon the <span class="in">`tidyverse`</span> suite to help us. Let's explore some basic command syntax.</span>
<span id="cb47-56"><a href="#cb47-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-57"><a href="#cb47-57" aria-hidden="true" tabindex="-1"></a><span class="fu">### Load Example Data</span></span>
<span id="cb47-58"><a href="#cb47-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-59"><a href="#cb47-59" aria-hidden="true" tabindex="-1"></a>We're going to work with a dataset that describes those census tracts that were designated as <span class="co">[</span><span class="ot">Opportunity Zones</span><span class="co">](https://www.irs.gov/credits-deductions/businesses/opportunity-zones)</span> as part of the federal <span class="co">[</span><span class="ot">Tax Cuts and Jobs Act</span><span class="co">](https://www.congress.gov/bill/115th-congress/house-bill/1)</span>. These incentives are designed to spur investment in low-income and undercapitalized cities, by providing investors with tax incentives to invest capital in these locations.</span>
<span id="cb47-60"><a href="#cb47-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-61"><a href="#cb47-61" aria-hidden="true" tabindex="-1"></a>The specific dataset which we'll work with was developed by the Urban Institute, and adds to basic identification of designated census tracts some additional analysis of the characteristics of those places.</span>
<span id="cb47-62"><a href="#cb47-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-63"><a href="#cb47-63" aria-hidden="true" tabindex="-1"></a><span class="fu">### Loading Required Packages</span></span>
<span id="cb47-64"><a href="#cb47-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-65"><a href="#cb47-65" aria-hidden="true" tabindex="-1"></a>We're already learned how to use <span class="in">`install.packages()`</span> and <span class="in">`library()`</span> to (respectively) install and load packages that extend R and RStudio's functionality. As a reminder, <span class="in">`install.packages()`</span> downloads the package from a central server and installs it on your computer. You only have to install a package once. Using <span class="in">`library()`</span> loads that package for use in your current RStudio session. If you plan to use that package in a given analysis, you'll need to load it. To stay organized, you should load packages at the beginning of your script or markdown document.</span>
<span id="cb47-66"><a href="#cb47-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-67"><a href="#cb47-67" aria-hidden="true" tabindex="-1"></a>::: aside</span>
<span id="cb47-68"><a href="#cb47-68" aria-hidden="true" tabindex="-1"></a>Note that to install the package, you need to treat the package name as a character vector <span class="in">`"tidyverse"`</span>, but when you load it in your R session, it does not need to be treated as a character vector <span class="in">`tidyverse`</span> because it is an object that R recognizes after it is installed.</span>
<span id="cb47-69"><a href="#cb47-69" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb47-70"><a href="#cb47-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-71"><a href="#cb47-71" aria-hidden="true" tabindex="-1"></a>We are going to load the following packages:</span>
<span id="cb47-72"><a href="#cb47-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-73"><a href="#cb47-73" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`tidyverse`</span> contains tools which we'll use to subset, filter, group, and summarize our data</span>
<span id="cb47-74"><a href="#cb47-74" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`readxl`</span> contains tools which will help us to read Excel files into R</span>
<span id="cb47-75"><a href="#cb47-75" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`gt`</span> contains tools for making nicely formatted tables.</span>
<span id="cb47-76"><a href="#cb47-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-79"><a href="#cb47-79" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-80"><a href="#cb47-80" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb47-81"><a href="#cb47-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-82"><a href="#cb47-82" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb47-83"><a href="#cb47-83" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb47-84"><a href="#cb47-84" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb47-85"><a href="#cb47-85" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-86"><a href="#cb47-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-87"><a href="#cb47-87" aria-hidden="true" tabindex="-1"></a>The <span class="in">`read_xlsx()`</span> command from the <span class="in">`readxl`</span> package will read Microsoft Excel files into data tables. Let's start by loading the Urban Institute Opportunity Zone dataset:</span>
<span id="cb47-88"><a href="#cb47-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-89"><a href="#cb47-89" aria-hidden="true" tabindex="-1"></a>Let's read the Excel data and place it in an object called "ozs":</span>
<span id="cb47-90"><a href="#cb47-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-93"><a href="#cb47-93" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-94"><a href="#cb47-94" aria-hidden="true" tabindex="-1"></a>ozs <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"04_describing/data/urbaninstitute_tractlevelozanalysis_update1242018.xlsx"</span>)</span>
<span id="cb47-95"><a href="#cb47-95" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-96"><a href="#cb47-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-97"><a href="#cb47-97" aria-hidden="true" tabindex="-1"></a>You can either do a Google search for <span class="co">[</span><span class="ot">Readxl</span><span class="co">](https://readxl.tidyverse.org)</span> to find documentation, or you can use R's built in documentation by typing <span class="in">`?readxl`</span></span>
<span id="cb47-98"><a href="#cb47-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-99"><a href="#cb47-99" aria-hidden="true" tabindex="-1"></a>As the documentation states, <span class="in">`readxl`</span> imports excel files. Looking at the documentation, the <span class="in">`read_excel()`</span> command will read a single excel sheet, or we can optionally select a sheet by name or number from an excel workbook with multiple sheets. In this case, the Urban Institute data is in a workbook with a single sheet, so we just need to tell R where the file is to load.</span>
<span id="cb47-100"><a href="#cb47-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-101"><a href="#cb47-101" aria-hidden="true" tabindex="-1"></a><span class="fu">### Describing Data</span></span>
<span id="cb47-102"><a href="#cb47-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-103"><a href="#cb47-103" aria-hidden="true" tabindex="-1"></a>One of the first steps that we should do when we load an unfamiliar dataset is to get to know it using some basic description commands.</span>
<span id="cb47-104"><a href="#cb47-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-105"><a href="#cb47-105" aria-hidden="true" tabindex="-1"></a>Let's use the <span class="in">`str()`</span> command to analyze the dataset's structure:</span>
<span id="cb47-106"><a href="#cb47-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-109"><a href="#cb47-109" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-110"><a href="#cb47-110" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ozs)</span>
<span id="cb47-111"><a href="#cb47-111" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-112"><a href="#cb47-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-113"><a href="#cb47-113" aria-hidden="true" tabindex="-1"></a>We get a list where each row is a variable in the dataset. We also learn more about the format of the variable (e.g. character, numeric), the number of observations, and we see examples of the first few observations.</span>
<span id="cb47-114"><a href="#cb47-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-115"><a href="#cb47-115" aria-hidden="true" tabindex="-1"></a>Let's next use <span class="in">`summary()`</span> to get a statistical summary of each variable:</span>
<span id="cb47-116"><a href="#cb47-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-119"><a href="#cb47-119" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-120"><a href="#cb47-120" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ozs)</span>
<span id="cb47-121"><a href="#cb47-121" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-122"><a href="#cb47-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-123"><a href="#cb47-123" aria-hidden="true" tabindex="-1"></a>This gives us a statistical summary including distribution and central tendency statistics, as well as information on the number of values that are <span class="in">`NA`</span>.</span>
<span id="cb47-124"><a href="#cb47-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-125"><a href="#cb47-125" aria-hidden="true" tabindex="-1"></a>A few things to note after your preliminary inspection:</span>
<span id="cb47-126"><a href="#cb47-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-127"><a href="#cb47-127" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>These data are at the census tract level and include geographic identifiers including **geoid**, the combined, state-county-tract FIPS code, **state** the state name, and **county** the county name.</span>
<span id="cb47-128"><a href="#cb47-128" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>These data include a field named **Designated** which is 1 when an eligible tract was designated as an opportunity zone, and <span class="in">`NA`</span> where the tract was not designated.</span>
<span id="cb47-129"><a href="#cb47-129" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The dataset also includes some other tract-level demographic measures, as well as additional geographic flags (variables that take the value 0 or 1).</span>
<span id="cb47-130"><a href="#cb47-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-131"><a href="#cb47-131" aria-hidden="true" tabindex="-1"></a><span class="fu">## Query and Describe the Data</span></span>
<span id="cb47-132"><a href="#cb47-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-133"><a href="#cb47-133" aria-hidden="true" tabindex="-1"></a>The dataset we're looking at is for the entire United States. We can easily summarize characteristics of the entire dataset.</span>
<span id="cb47-134"><a href="#cb47-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-135"><a href="#cb47-135" aria-hidden="true" tabindex="-1"></a><span class="fu">## Recoding Values</span></span>
<span id="cb47-136"><a href="#cb47-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-137"><a href="#cb47-137" aria-hidden="true" tabindex="-1"></a>One of the characteristics tracked in the Urban Institute data is the median household income for each designated census tract. We might question whether there's a difference in the median household income for designated and not-designated but eligible census tracts. This may help us understand something about whether the most needy tracts were selected from those that are eligible.</span>
<span id="cb47-138"><a href="#cb47-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-139"><a href="#cb47-139" aria-hidden="true" tabindex="-1"></a>How would we do this? Conceptually...</span>
<span id="cb47-140"><a href="#cb47-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-141"><a href="#cb47-141" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>We need to split our data into designated and not designated census tracts, and then calculate the average of the median income separately for these tracts.</span>
<span id="cb47-142"><a href="#cb47-142" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Before we do this, let's take care of one bit of housekeeping. The Urban Institute has coded the designated variable as either taking a value of 1 when designated or <span class="in">`NA`</span> when not. Let's *recode* those NA values to equal 0 instead.</span>
<span id="cb47-143"><a href="#cb47-143" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>To recode, we need to select those values from the Designated column in the ozs data frame where the value is <span class="in">`NA`</span> and overwrite them with a new value of 0.</span>
<span id="cb47-144"><a href="#cb47-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-145"><a href="#cb47-145" aria-hidden="true" tabindex="-1"></a>There's lots of ways we could do this:</span>
<span id="cb47-146"><a href="#cb47-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-147"><a href="#cb47-147" aria-hidden="true" tabindex="-1"></a><span class="fu">### Strategy 1 - Conditional Statement</span></span>
<span id="cb47-148"><a href="#cb47-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-149"><a href="#cb47-149" aria-hidden="true" tabindex="-1"></a>We could use a conditional statement <span class="in">`ifelse()`</span> to specify that if a value is NA in the Designated column we change it to 0.</span>
<span id="cb47-150"><a href="#cb47-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-153"><a href="#cb47-153" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-154"><a href="#cb47-154" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Designated =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(Designated), <span class="dv">0</span>, Designated))</span>
<span id="cb47-155"><a href="#cb47-155" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-156"><a href="#cb47-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-157"><a href="#cb47-157" aria-hidden="true" tabindex="-1"></a>In <span class="in">`dplyr`</span> syntax, what we said here was *with reference to the ozs dataset* <span class="in">`ozs |&gt;`</span> let's alter the dataset <span class="in">`mutate()`</span>. Let's alter the column named Designated <span class="in">`mutate(Designated = )`</span>. Let's alter the column named Designated conditionally <span class="in">`mutate(Designated = ifelse())`</span>. If the value of Designated is equal to <span class="in">`NA`</span>, replace it with 0, otherwise keep the value present in the Designated observation <span class="in">`mutate(Designated = ifelse(is.na(Designated), 0, Designated))`</span>.</span>
<span id="cb47-158"><a href="#cb47-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-159"><a href="#cb47-159" aria-hidden="true" tabindex="-1"></a>::: aside</span>
<span id="cb47-160"><a href="#cb47-160" aria-hidden="true" tabindex="-1"></a>Looking at this <span class="in">`ifelse()`</span> statement, you might have been tempted to write something like <span class="in">`Designated ==`</span>NA<span class="sc">\`</span><span class="in">`which will not work.`</span>is.na()<span class="in">`is the proper logical test to return whether a value is or is not`</span>NA<span class="sc">\`</span>.</span>
<span id="cb47-161"><a href="#cb47-161" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb47-162"><a href="#cb47-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-163"><a href="#cb47-163" aria-hidden="true" tabindex="-1"></a><span class="fu">### Strategy 2: Use a Specialized Command</span></span>
<span id="cb47-164"><a href="#cb47-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-165"><a href="#cb47-165" aria-hidden="true" tabindex="-1"></a>We could use a specialized command such as <span class="in">`replace_na()`</span> from the <span class="in">`tidyr`</span> package to replace our <span class="in">`NA`</span> values:</span>
<span id="cb47-166"><a href="#cb47-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-169"><a href="#cb47-169" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-170"><a href="#cb47-170" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Designated =</span> <span class="fu">replace_na</span>(Designated, <span class="dv">0</span>))</span>
<span id="cb47-171"><a href="#cb47-171" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-172"><a href="#cb47-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-173"><a href="#cb47-173" aria-hidden="true" tabindex="-1"></a>Note that in <span class="in">`replace_na()`</span> we are specifying the column we want to replace the NA value in as well as the value we want to replace NA with.</span>
<span id="cb47-174"><a href="#cb47-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-175"><a href="#cb47-175" aria-hidden="true" tabindex="-1"></a><span class="fu">### Strategy 3: Recode and Change Format</span></span>
<span id="cb47-176"><a href="#cb47-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-177"><a href="#cb47-177" aria-hidden="true" tabindex="-1"></a>Depending upon what we wanted to do with our Designated labels, we could simultaneously deal with recoding our NA values and relabeling the values for legibility. <span class="in">`case_when()`</span> is useful for these more complex operations:</span>
<span id="cb47-178"><a href="#cb47-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-181"><a href="#cb47-181" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-182"><a href="#cb47-182" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb47-183"><a href="#cb47-183" aria-hidden="true" tabindex="-1"></a>  <span class="at">Designated =</span> <span class="fu">case_when</span>(</span>
<span id="cb47-184"><a href="#cb47-184" aria-hidden="true" tabindex="-1"></a>    Designated <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span><span class="st">"Designated"</span>,</span>
<span id="cb47-185"><a href="#cb47-185" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(Designated) <span class="sc">~</span><span class="st">"Not Designated"</span></span>
<span id="cb47-186"><a href="#cb47-186" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb47-187"><a href="#cb47-187" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-188"><a href="#cb47-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-189"><a href="#cb47-189" aria-hidden="true" tabindex="-1"></a>What's going on here? <span class="in">`case_when()`</span> allows us to conditionally recode values. We specify the condition and then what to do when that condition is met. For instance, we specify the condition <span class="in">`Designated == 1`</span> and then say when this condition is met, we want you to change that observation to Designated <span class="in">`~"Designated"`</span>. We then say what to do if the value is <span class="in">`NA`</span> - label it as "Not Designated".</span>
<span id="cb47-190"><a href="#cb47-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-191"><a href="#cb47-191" aria-hidden="true" tabindex="-1"></a>For the sake of legibility, let's use the third strategy on our dataset:</span>
<span id="cb47-192"><a href="#cb47-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-195"><a href="#cb47-195" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-196"><a href="#cb47-196" aria-hidden="true" tabindex="-1"></a>ozs <span class="ot">&lt;-</span> ozs <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb47-197"><a href="#cb47-197" aria-hidden="true" tabindex="-1"></a>  <span class="at">Designated =</span> <span class="fu">case_when</span>(</span>
<span id="cb47-198"><a href="#cb47-198" aria-hidden="true" tabindex="-1"></a>    Designated <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span><span class="st">"Designated"</span>,</span>
<span id="cb47-199"><a href="#cb47-199" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(Designated) <span class="sc">~</span><span class="st">"Not Designated"</span></span>
<span id="cb47-200"><a href="#cb47-200" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb47-201"><a href="#cb47-201" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-202"><a href="#cb47-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-203"><a href="#cb47-203" aria-hidden="true" tabindex="-1"></a>And here's what our Designated column now looks like:</span>
<span id="cb47-204"><a href="#cb47-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-207"><a href="#cb47-207" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-208"><a href="#cb47-208" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb47-209"><a href="#cb47-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-210"><a href="#cb47-210" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb47-211"><a href="#cb47-211" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(geoid, state, county, Designated) <span class="sc">|&gt;</span> </span>
<span id="cb47-212"><a href="#cb47-212" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span> </span>
<span id="cb47-213"><a href="#cb47-213" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb47-214"><a href="#cb47-214" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-215"><a href="#cb47-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-216"><a href="#cb47-216" aria-hidden="true" tabindex="-1"></a><span class="fu">## Summarizing Data</span></span>
<span id="cb47-217"><a href="#cb47-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-218"><a href="#cb47-218" aria-hidden="true" tabindex="-1"></a>Now that we've recoded our designated column, let's do some description of the characteristics of designated and not designated places.</span>
<span id="cb47-219"><a href="#cb47-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-220"><a href="#cb47-220" aria-hidden="true" tabindex="-1"></a>Let's use a combination of <span class="in">`group_by()`</span> and <span class="in">`summarise()`</span> to produce a summary table showing the mean value for designated and not designated census tracts.</span>
<span id="cb47-221"><a href="#cb47-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-224"><a href="#cb47-224" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-225"><a href="#cb47-225" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb47-226"><a href="#cb47-226" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Designated) <span class="sc">|&gt;</span> </span>
<span id="cb47-227"><a href="#cb47-227" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract))</span>
<span id="cb47-228"><a href="#cb47-228" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-229"><a href="#cb47-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-230"><a href="#cb47-230" aria-hidden="true" tabindex="-1"></a>We getting a table back, but why did we get <span class="in">`NA`</span> insted of numbers here? If you've ever used the average <span class="in">`mean()`</span> command in R, you probably understand what's going on here. As a safety measure, when you average values, R will return NA if any value in that series is <span class="in">`NA`</span>. If you're not expecting any <span class="in">`NA`</span> values, this is good, becuase you'll quickly discover that there are unexpected <span class="in">`NA`</span> values in your dataset. We might expect a few census tracts with missing income values coded as <span class="in">`NA`</span>, so we will want to indicate <span class="in">`na.rm = TRUE`</span> here so that R removes those NAs when calculating the mean.</span>
<span id="cb47-231"><a href="#cb47-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-234"><a href="#cb47-234" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-235"><a href="#cb47-235" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb47-236"><a href="#cb47-236" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Designated) <span class="sc">|&gt;</span> </span>
<span id="cb47-237"><a href="#cb47-237" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb47-238"><a href="#cb47-238" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-239"><a href="#cb47-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-240"><a href="#cb47-240" aria-hidden="true" tabindex="-1"></a>Much better. We can see that that *on average*, the median household income for eligible designated census tracts is lower than that for eligible not designated census tracts. Since the Opportunity Zone legislation is designed to target distressed neighborhoods, this is a good sign that program targeting is focused on neighborhoods with greater need.</span>
<span id="cb47-241"><a href="#cb47-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-242"><a href="#cb47-242" aria-hidden="true" tabindex="-1"></a>We might want to add some additional information to our summary table. One useful piece of information would be the number of census tracts that are designated or not designated.</span>
<span id="cb47-243"><a href="#cb47-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-246"><a href="#cb47-246" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-247"><a href="#cb47-247" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb47-248"><a href="#cb47-248" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Designated) <span class="sc">|&gt;</span> </span>
<span id="cb47-249"><a href="#cb47-249" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb47-250"><a href="#cb47-250" aria-hidden="true" tabindex="-1"></a>    <span class="at">Tracts =</span> <span class="fu">n</span>(),</span>
<span id="cb47-251"><a href="#cb47-251" aria-hidden="true" tabindex="-1"></a>    <span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb47-252"><a href="#cb47-252" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-253"><a href="#cb47-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-254"><a href="#cb47-254" aria-hidden="true" tabindex="-1"></a>Within a <span class="in">`summarise()`</span> statement, <span class="in">`n()`</span> gives us a count of observations (rows) for each grouping. In this case, there are 8,762 census tracts designated as opportunity zones, and an additional 33,414 that were eligible based upon program criteria but not designated.</span>
<span id="cb47-255"><a href="#cb47-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-256"><a href="#cb47-256" aria-hidden="true" tabindex="-1"></a>We could easily add other summaries to our summary table for this dataset, or further modify.</span>
<span id="cb47-257"><a href="#cb47-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-258"><a href="#cb47-258" aria-hidden="true" tabindex="-1"></a><span class="fu">## Filtering Data</span></span>
<span id="cb47-259"><a href="#cb47-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-260"><a href="#cb47-260" aria-hidden="true" tabindex="-1"></a>Now that we have some sense for how we might produce basic summaries of our data, how can we query out (filter) observations by row? How, for instance, would you modify the above code to produce the same table for *counties* in *Illinois*?</span>
<span id="cb47-261"><a href="#cb47-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-262"><a href="#cb47-262" aria-hidden="true" tabindex="-1"></a>We can use a <span class="in">`filter()`</span> statement to easily accomplish this. <span class="in">`filter()`</span> allows us to specify one (or more) criteria for which we want to select rows from a larger dataset.</span>
<span id="cb47-263"><a href="#cb47-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-264"><a href="#cb47-264" aria-hidden="true" tabindex="-1"></a>Let's take a step back and filter our base dataset to focus on observations in Illinois.</span>
<span id="cb47-265"><a href="#cb47-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-268"><a href="#cb47-268" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-269"><a href="#cb47-269" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"Illinois"</span>)</span>
<span id="cb47-270"><a href="#cb47-270" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-271"><a href="#cb47-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-272"><a href="#cb47-272" aria-hidden="true" tabindex="-1"></a>Recall that the ozs dataset has 42,176 observations (rows). We filtered the data using the criteria that the value of state is equal to "Illinois", resulting in 1,659 observations (eligible census tracts in Illinois).</span>
<span id="cb47-273"><a href="#cb47-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-274"><a href="#cb47-274" aria-hidden="true" tabindex="-1"></a>From here, we can re-use our prior code to produce a summary table that is focused on Illinois.</span>
<span id="cb47-275"><a href="#cb47-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-278"><a href="#cb47-278" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-279"><a href="#cb47-279" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb47-280"><a href="#cb47-280" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"Illinois"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb47-281"><a href="#cb47-281" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Designated) <span class="sc">|&gt;</span> </span>
<span id="cb47-282"><a href="#cb47-282" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb47-283"><a href="#cb47-283" aria-hidden="true" tabindex="-1"></a>    <span class="at">Tracts =</span> <span class="fu">n</span>(),</span>
<span id="cb47-284"><a href="#cb47-284" aria-hidden="true" tabindex="-1"></a>    <span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb47-285"><a href="#cb47-285" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-286"><a href="#cb47-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-287"><a href="#cb47-287" aria-hidden="true" tabindex="-1"></a>Ok - but how do we summarise by county? We just need to add that as an additional grouping criteria in our <span class="in">`group_by()`</span> statement:</span>
<span id="cb47-288"><a href="#cb47-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-291"><a href="#cb47-291" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-292"><a href="#cb47-292" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb47-293"><a href="#cb47-293" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb47-294"><a href="#cb47-294" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"Illinois"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb47-295"><a href="#cb47-295" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county, Designated) <span class="sc">|&gt;</span> </span>
<span id="cb47-296"><a href="#cb47-296" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb47-297"><a href="#cb47-297" aria-hidden="true" tabindex="-1"></a>    <span class="at">Tracts =</span> <span class="fu">n</span>(),</span>
<span id="cb47-298"><a href="#cb47-298" aria-hidden="true" tabindex="-1"></a>    <span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb47-299"><a href="#cb47-299" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-300"><a href="#cb47-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-301"><a href="#cb47-301" aria-hidden="true" tabindex="-1"></a>We are basically saying, group by both county and designated and then summarize for each.</span>
<span id="cb47-302"><a href="#cb47-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-303"><a href="#cb47-303" aria-hidden="true" tabindex="-1"></a>With a few lines of code, we can produce very powerful and specific kinds of summaries for our data.</span>
<span id="cb47-304"><a href="#cb47-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-305"><a href="#cb47-305" aria-hidden="true" tabindex="-1"></a><span class="fu">## Pivoting Data</span></span>
<span id="cb47-306"><a href="#cb47-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-307"><a href="#cb47-307" aria-hidden="true" tabindex="-1"></a>Our summary is getting more nuanced. We've used <span class="in">`group_by()`</span> and <span class="in">`summarise()`</span> to sumamrise data based upon certain characteristics. We've summarized in such a way where for our Illinois counties, we have two observations for each county - one that summarises values for designated tracts in that county, and one that summarises values for not designated tracts.</span>
<span id="cb47-308"><a href="#cb47-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-309"><a href="#cb47-309" aria-hidden="true" tabindex="-1"></a>It might be useful for us to reshape our summary table so that there is one row for each county, with each row containing the summary value for both designated and not designated tracts.</span>
<span id="cb47-310"><a href="#cb47-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-311"><a href="#cb47-311" aria-hidden="true" tabindex="-1"></a>The two commands <span class="in">`pivot_wider()`</span> and <span class="in">`pivot_longer()`</span> are useful for reshaping our data. <span class="in">`pivot_wider()`</span> essentially adds columns to a dataset by transitioning content from rows to columns. <span class="in">`pivot_longer()`</span> does the opposite - it makes a dataset longer by transitioning columns to rows.</span>
<span id="cb47-312"><a href="#cb47-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-313"><a href="#cb47-313" aria-hidden="true" tabindex="-1"></a>In our case, let's use <span class="in">`pivot_wider()`</span> to transition our Designated and Not Designated rows into columns.</span>
<span id="cb47-314"><a href="#cb47-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-317"><a href="#cb47-317" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-318"><a href="#cb47-318" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb47-319"><a href="#cb47-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-320"><a href="#cb47-320" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb47-321"><a href="#cb47-321" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"Illinois"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb47-322"><a href="#cb47-322" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county, Designated) <span class="sc">|&gt;</span> </span>
<span id="cb47-323"><a href="#cb47-323" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb47-324"><a href="#cb47-324" aria-hidden="true" tabindex="-1"></a>    <span class="at">Tracts =</span> <span class="fu">n</span>(),</span>
<span id="cb47-325"><a href="#cb47-325" aria-hidden="true" tabindex="-1"></a>    <span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Designated, <span class="at">values_from =</span> Income)</span>
<span id="cb47-326"><a href="#cb47-326" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-327"><a href="#cb47-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-328"><a href="#cb47-328" aria-hidden="true" tabindex="-1"></a>We start with our previous summary and pass two arguments to <span class="in">`pivot_wider()`</span>.</span>
<span id="cb47-329"><a href="#cb47-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-330"><a href="#cb47-330" aria-hidden="true" tabindex="-1"></a>We use <span class="in">`names_from`</span> to specify the column in our dataset contining row values that we *want* to become new columns. In this case we'd expect that our Desginated column would result in the creation of two new columns - one where values are Designated and one where values are Not Designated.</span>
<span id="cb47-331"><a href="#cb47-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-332"><a href="#cb47-332" aria-hidden="true" tabindex="-1"></a>We use <span class="in">`values_from`</span> to specify the column containing the values we want in our new columns, in this case, the average of tract income.</span>
<span id="cb47-333"><a href="#cb47-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-334"><a href="#cb47-334" aria-hidden="true" tabindex="-1"></a>One problem though - our tract count column is still present and these values are not reshaped. To simplify things, let's just get rid of this count so we can see what things look like:</span>
<span id="cb47-335"><a href="#cb47-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-338"><a href="#cb47-338" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-339"><a href="#cb47-339" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb47-340"><a href="#cb47-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-341"><a href="#cb47-341" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb47-342"><a href="#cb47-342" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"Illinois"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb47-343"><a href="#cb47-343" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county, Designated) <span class="sc">|&gt;</span> </span>
<span id="cb47-344"><a href="#cb47-344" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb47-345"><a href="#cb47-345" aria-hidden="true" tabindex="-1"></a>    <span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Designated, <span class="at">values_from =</span> Income)</span>
<span id="cb47-346"><a href="#cb47-346" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-347"><a href="#cb47-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-348"><a href="#cb47-348" aria-hidden="true" tabindex="-1"></a>Looking good! To make things a bit more informative, let's also show the difference in income between designated and not designated tracts:</span>
<span id="cb47-349"><a href="#cb47-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-352"><a href="#cb47-352" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-353"><a href="#cb47-353" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb47-354"><a href="#cb47-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-355"><a href="#cb47-355" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb47-356"><a href="#cb47-356" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"Illinois"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb47-357"><a href="#cb47-357" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county, Designated) <span class="sc">|&gt;</span> </span>
<span id="cb47-358"><a href="#cb47-358" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb47-359"><a href="#cb47-359" aria-hidden="true" tabindex="-1"></a>    <span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Designated, <span class="at">values_from =</span> Income) <span class="sc">|&gt;</span> </span>
<span id="cb47-360"><a href="#cb47-360" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Difference =</span> Designated <span class="sc">-</span> <span class="st">`</span><span class="at">Not Designated</span><span class="st">`</span>)</span>
<span id="cb47-361"><a href="#cb47-361" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-362"><a href="#cb47-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-363"><a href="#cb47-363" aria-hidden="true" tabindex="-1"></a>One note here - in the last <span class="in">`mutate()`</span> statement, you see that Not Designated has backticks around it. This is because there's a space between "Not" and "Designated" which will be treated as separate variable names. The backticks allow this to be referenced as a column. We could change the name to something like Not_Designated, but backticks will allow us to appropriately reference it as well.</span>
<span id="cb47-364"><a href="#cb47-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-365"><a href="#cb47-365" aria-hidden="true" tabindex="-1"></a><span class="fu">## Joining Tables</span></span>
<span id="cb47-366"><a href="#cb47-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-367"><a href="#cb47-367" aria-hidden="true" tabindex="-1"></a>Linking together the place data to the ozs data might would give us some additional context regarding opportunity zones. Remember that the opportunity zones data itemizes those census tracts that were *eligible* for designation with the Designated column denoting which eligible census tracts actually became opportunity zones. If we link together information for census tracts which were not eligible for designation, we could learn something about the differences between undesignated, eligible not designated, and eligible designated census tracts.</span>
<span id="cb47-368"><a href="#cb47-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-369"><a href="#cb47-369" aria-hidden="true" tabindex="-1"></a>In order to link together these two datasets, we need to learn about and apply *relational joins* to bring these two datasets together.</span>
<span id="cb47-370"><a href="#cb47-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-371"><a href="#cb47-371" aria-hidden="true" tabindex="-1"></a><span class="fu">### Joins Overview</span></span>
<span id="cb47-372"><a href="#cb47-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-373"><a href="#cb47-373" aria-hidden="true" tabindex="-1"></a>Joins are methods to merge two datasets based on common attributes. It's rare that one single dataset contains all of the information you wish to tell a story about, so it's important to understand how joins work.</span>
<span id="cb47-374"><a href="#cb47-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-375"><a href="#cb47-375" aria-hidden="true" tabindex="-1"></a>A Venn diagram of join types.</span>
<span id="cb47-376"><a href="#cb47-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-377"><a href="#cb47-377" aria-hidden="true" tabindex="-1"></a><span class="al">![](04_describing/images/joins_venn.png)</span></span>
<span id="cb47-378"><a href="#cb47-378" aria-hidden="true" tabindex="-1"></a>The <span class="in">`tidyverse`</span> package which we've installed and loaded in the past can perform seven different types of relational joins. We'll discuss six of them briefly, but focus on four key types. Joins require us to have two tables with some type of common identifier column present in both that we can match records based on.</span>
<span id="cb47-379"><a href="#cb47-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-380"><a href="#cb47-380" aria-hidden="true" tabindex="-1"></a><span class="fu">### Join Types</span></span>
<span id="cb47-381"><a href="#cb47-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-382"><a href="#cb47-382" aria-hidden="true" tabindex="-1"></a>Let's assume we have two data frames named <span class="in">`x`</span> and <span class="in">`y`</span>, and we're trying to match a column called <span class="in">`key`</span> in both datasets.</span>
<span id="cb47-383"><a href="#cb47-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-384"><a href="#cb47-384" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`left_join()`</span>: A left join returns every row in <span class="in">`x`</span> and all the columns from <span class="in">`x`</span> and <span class="in">`y`</span>. If a value in the <span class="in">`key`</span> column in <span class="in">`x`</span> doesn't exist in <span class="in">`y`</span>, the row will contain <span class="in">`NA`</span> values for all the <span class="in">`y`</span> columns. If there are multiple <span class="in">`key`</span> matches, all the possible combinations will be returned.</span>
<span id="cb47-385"><a href="#cb47-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-386"><a href="#cb47-386" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`right_join()`</span>: This is similar to a left join, but returns every row in <span class="in">`y`</span> instead.</span>
<span id="cb47-387"><a href="#cb47-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-388"><a href="#cb47-388" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`inner_join()`</span>: An inner join returns all the rows in <span class="in">`x`</span> where there is an <span class="in">`key`</span> match in <span class="in">`y`</span>, and all the columns in <span class="in">`x`</span> and <span class="in">`y`</span>.</span>
<span id="cb47-389"><a href="#cb47-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-390"><a href="#cb47-390" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`full_join()`</span>: A full join returns all rows and all columns from <span class="in">`x`</span> and <span class="in">`y`</span>. If there isn't a match in the <span class="in">`x`</span> <span class="in">`key`</span> column, all <span class="in">`x`</span> columns will return <span class="in">`NA`</span>. (The same is true for <span class="in">`y`</span>.)</span>
<span id="cb47-391"><a href="#cb47-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-392"><a href="#cb47-392" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`semi_join()`</span>: A semi-join returns the rows in <span class="in">`x`</span> where there is an <span class="in">`key`</span> match in <span class="in">`y`</span>. It is different than an inner join in that it only returns the columns in <span class="in">`x`</span> and doesn't duplicate rows if there are multiple matches in <span class="in">`y`</span>.</span>
<span id="cb47-393"><a href="#cb47-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-394"><a href="#cb47-394" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`anti_join()`</span>: An anti-join returns the rows in <span class="in">`x`</span> where there is not a matching <span class="in">`key`</span> in <span class="in">`y`</span>. It only returns the columns in <span class="in">`x`</span>.</span>
<span id="cb47-395"><a href="#cb47-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-396"><a href="#cb47-396" aria-hidden="true" tabindex="-1"></a>You'll notice that only the first four joins---left, right, inner, and full---merge two datasets. Those are going to be the most valuable ones to learn. Here are a couple of additional illustrations to illustrate how joins work.</span>
<span id="cb47-397"><a href="#cb47-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-398"><a href="#cb47-398" aria-hidden="true" tabindex="-1"></a><span class="al">![Join example 1](04_describing/images/Join_Types_2.png)</span></span>
<span id="cb47-399"><a href="#cb47-399" aria-hidden="true" tabindex="-1"></a><span class="al">![Join example 2](04_describing/images/Join_Types_3.jpeg)</span></span>
<span id="cb47-400"><a href="#cb47-400" aria-hidden="true" tabindex="-1"></a>The basic general syntax for the joins is the same:</span>
<span id="cb47-401"><a href="#cb47-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-402"><a href="#cb47-402" aria-hidden="true" tabindex="-1"></a><span class="in">`*_join(x, y, by = "key name")`</span></span>
<span id="cb47-403"><a href="#cb47-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-404"><a href="#cb47-404" aria-hidden="true" tabindex="-1"></a><span class="in">`x`</span> and <span class="in">`y`</span> are self-explanatory. The <span class="in">`by`</span> attribute is used to name the key, or the variable that the two datasets have in common. If you're lucky, they'll have the same name. If you're unlucky, you'll have to type a bit more: <span class="in">`by = c("name1" = "name2")`</span>, assuming "name1" is the name of the key column in <span class="in">`x`</span> and "name2" is the name of the key column in <span class="in">`y`</span>.</span>
<span id="cb47-405"><a href="#cb47-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-406"><a href="#cb47-406" aria-hidden="true" tabindex="-1"></a><span class="fu">### Example</span></span>
<span id="cb47-407"><a href="#cb47-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-408"><a href="#cb47-408" aria-hidden="true" tabindex="-1"></a>Let's assume we have two data frames: <span class="in">`fruit_1`</span> that contains some characteristics about fruit, and <span class="in">`fruit_2`</span> that has some others. Here's how they're defined:</span>
<span id="cb47-409"><a href="#cb47-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-412"><a href="#cb47-412" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-413"><a href="#cb47-413" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb47-414"><a href="#cb47-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-415"><a href="#cb47-415" aria-hidden="true" tabindex="-1"></a>fruit_1 <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb47-416"><a href="#cb47-416" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>fruit, <span class="sc">~</span>color,</span>
<span id="cb47-417"><a href="#cb47-417" aria-hidden="true" tabindex="-1"></a>  <span class="st">"apple"</span>, <span class="st">"red"</span>,</span>
<span id="cb47-418"><a href="#cb47-418" aria-hidden="true" tabindex="-1"></a>  <span class="st">"orange"</span>, <span class="st">"orange"</span>,</span>
<span id="cb47-419"><a href="#cb47-419" aria-hidden="true" tabindex="-1"></a>  <span class="st">"banana"</span>, <span class="st">"yellow"</span>,</span>
<span id="cb47-420"><a href="#cb47-420" aria-hidden="true" tabindex="-1"></a>  <span class="st">"lime"</span>, <span class="st">"green"</span></span>
<span id="cb47-421"><a href="#cb47-421" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-422"><a href="#cb47-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-423"><a href="#cb47-423" aria-hidden="true" tabindex="-1"></a>fruit_2 <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb47-424"><a href="#cb47-424" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>fruit, <span class="sc">~</span>shape, <span class="sc">~</span>price,</span>
<span id="cb47-425"><a href="#cb47-425" aria-hidden="true" tabindex="-1"></a>  <span class="st">"orange"</span>, <span class="st">"round"</span>, <span class="fl">0.40</span>,</span>
<span id="cb47-426"><a href="#cb47-426" aria-hidden="true" tabindex="-1"></a>  <span class="st">"banana"</span>, <span class="st">"long"</span>, <span class="fl">0.30</span>,</span>
<span id="cb47-427"><a href="#cb47-427" aria-hidden="true" tabindex="-1"></a>  <span class="st">"lime"</span>, <span class="st">"oval"</span>, <span class="fl">0.25</span>,</span>
<span id="cb47-428"><a href="#cb47-428" aria-hidden="true" tabindex="-1"></a>  <span class="st">"durian"</span>, <span class="st">"spiky"</span>, <span class="fl">8.00</span> </span>
<span id="cb47-429"><a href="#cb47-429" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-430"><a href="#cb47-430" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-431"><a href="#cb47-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-432"><a href="#cb47-432" aria-hidden="true" tabindex="-1"></a>Note that the code above is just another syntax for creating tables as we did in the past.</span>
<span id="cb47-433"><a href="#cb47-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-436"><a href="#cb47-436" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-437"><a href="#cb47-437" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(fruit_1)</span>
<span id="cb47-438"><a href="#cb47-438" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(fruit_2)</span>
<span id="cb47-439"><a href="#cb47-439" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-440"><a href="#cb47-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-441"><a href="#cb47-441" aria-hidden="true" tabindex="-1"></a>What would be the result of a left join, right join, and inner join of <span class="in">`fruit_1`</span> and <span class="in">`fruit 2`</span>?</span>
<span id="cb47-442"><a href="#cb47-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-443"><a href="#cb47-443" aria-hidden="true" tabindex="-1"></a>Note the following:</span>
<span id="cb47-444"><a href="#cb47-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-445"><a href="#cb47-445" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The **left join** includes all records from fruit_1, but excludes those measures from fruit_2 where there isn't a match in the fruit column (durian). Note that even though there's not shape and price information for apples in fruit_2, the rows are still included, but with NA where the data would be were it present.</span>
<span id="cb47-446"><a href="#cb47-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-447"><a href="#cb47-447" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The **right join** includes all records from fruit_2 but excludes those columns from fruit_1 where there isn't a match in the fruit column. In this case, we're missing color information for durian fruit.</span>
<span id="cb47-448"><a href="#cb47-448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-449"><a href="#cb47-449" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The **inner join** includes only those records from fruit_1 and fruit_2 where there were matches in both datasets.</span>
<span id="cb47-450"><a href="#cb47-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-451"><a href="#cb47-451" aria-hidden="true" tabindex="-1"></a>The powerful thing about these joins is that they allow us to bring together data with different shapes and we can control which elements of the data are joined. Joins will become far more intuitive as you use them more.</span>
<span id="cb47-452"><a href="#cb47-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-453"><a href="#cb47-453" aria-hidden="true" tabindex="-1"></a><span class="fu">### Joining Together OZs and Place datasets</span></span>
<span id="cb47-454"><a href="#cb47-454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-455"><a href="#cb47-455" aria-hidden="true" tabindex="-1"></a>Now that we have a sense for how joins work, let's combine our oz and place into one larger table. </span>
<span id="cb47-456"><a href="#cb47-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-459"><a href="#cb47-459" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-460"><a href="#cb47-460" aria-hidden="true" tabindex="-1"></a>place <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"04_describing/data/place_name.csv"</span>)</span>
<span id="cb47-461"><a href="#cb47-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-462"><a href="#cb47-462" aria-hidden="true" tabindex="-1"></a>place</span>
<span id="cb47-463"><a href="#cb47-463" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-464"><a href="#cb47-464" aria-hidden="true" tabindex="-1"></a>If you take a look at both tables, you'll note that they have a field in common called geoid. This represents a unique code that is assigned to each census tract geography. Technically, this is a FIPS (<span class="co">[</span><span class="ot">Federal Information Processing Standards</span><span class="co">](https://www.nist.gov/standardsgov/compliance-faqs-federal-information-processing-standards-fips)</span>) code. FIPS codes for tracts are hierarchical - the first two digits are unique to each state, the next three digits correspond to each county, and the remaining six digits are unique to each census tract in that county.</span>
<span id="cb47-465"><a href="#cb47-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-466"><a href="#cb47-466" aria-hidden="true" tabindex="-1"></a>Because each tract is labelled with corresponding FIPS codes, we can join the two datasets together based upon this common field. This will become a fairly common action for you that you will repeat over the course of this class.</span>
<span id="cb47-467"><a href="#cb47-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-468"><a href="#cb47-468" aria-hidden="true" tabindex="-1"></a>Next, we should think carefully about what kind of join we want. We know we have ozs data for a subset of census tracts in the U.S. and we have the place data for a more expansive set of tracts. If we want to preserve the more extensive data (including those rows that do not match up with oz- eligible tracts), what type of join should we use and how would we construct it?</span>
<span id="cb47-469"><a href="#cb47-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-470"><a href="#cb47-470" aria-hidden="true" tabindex="-1"></a>Just to make sure we get this correct, I'm going to provide you with the way to complete your first join on real data. We have one more issue to deal with here to successfully join our data together. Recall that join takes three arguments - two table objects to join together and at least one common field to complete the join based on. These columns are both labelled geoid, but one is capitalized and one is not. We'll need to tell our join function that these two columns with different names (different in that one is capitalized and one is not) should be joined to each other. We use the modified <span class="in">`by=c("GEOID" = "geoid")`</span> to denote that GEOID in the place data should be joined to geoid in the ozs data. If the names were the same (say, both were GEOID), we could simply say <span class="in">`by="GEOID"`</span> and this would work.</span>
<span id="cb47-471"><a href="#cb47-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-472"><a href="#cb47-472" aria-hidden="true" tabindex="-1"></a>Okay, with that out of the way, let's join our data together:</span>
<span id="cb47-473"><a href="#cb47-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-476"><a href="#cb47-476" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-477"><a href="#cb47-477" aria-hidden="true" tabindex="-1"></a>dataset<span class="ot">&lt;-</span><span class="fu">left_join</span>(place, ozs, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"GEOID"</span> <span class="ot">=</span> <span class="st">"geoid"</span>))</span>
<span id="cb47-478"><a href="#cb47-478" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-479"><a href="#cb47-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-480"><a href="#cb47-480" aria-hidden="true" tabindex="-1"></a>Into a new object called dataset, we joined all rows from place and those records from ozs that matched. Records from place without a match in ozs will have NA where there could be data.</span>
<span id="cb47-481"><a href="#cb47-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-482"><a href="#cb47-482" aria-hidden="true" tabindex="-1"></a>Take a look at the data:</span>
<span id="cb47-483"><a href="#cb47-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-486"><a href="#cb47-486" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-487"><a href="#cb47-487" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(dataset)</span>
<span id="cb47-488"><a href="#cb47-488" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-489"><a href="#cb47-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-490"><a href="#cb47-490" aria-hidden="true" tabindex="-1"></a>Start by looking at the number of rows in the data - 73,057 - the same number as in the place data - we have brought in all rows from the place data and have joined to in matching rows in the ozs data. It would be useful for us to start off by knowing how many rows fall into each of our three categories - ineligible for designated, eligible and undesignated, and eligible and designated. At this point, the <span class="in">`NA`</span> values in the Designated column reflect ineligible, the 0's in that column reflect eligible but not designated, and the 1's represent eligible and designated.</span>
<span id="cb47-491"><a href="#cb47-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-492"><a href="#cb47-492" aria-hidden="true" tabindex="-1"></a>Use your new knowledge of dplyr's <span class="in">`group_by()`</span> and <span class="in">`summarise()`</span> to create a summary table based upon the three values that we expect the Designated column to take. You've learned that you could define what type of summary you'd like to produce in your <span class="in">`summarise()`</span> statement. Let's use <span class="in">`n()`</span> which counts the number of rows that meet each category specified in group_by():</span>
<span id="cb47-493"><a href="#cb47-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-496"><a href="#cb47-496" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-497"><a href="#cb47-497" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Designated) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="fu">n</span>())</span>
<span id="cb47-498"><a href="#cb47-498" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-499"><a href="#cb47-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-500"><a href="#cb47-500" aria-hidden="true" tabindex="-1"></a>You should see that we have 31,841 rows (census tracts) that were ineligible for designation, an additional 33,391 that were eligible but not designated, and 7,825 that were eligible and designated. Excellent!</span>
<span id="cb47-501"><a href="#cb47-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-502"><a href="#cb47-502" aria-hidden="true" tabindex="-1"></a>What might you want to do next to be able to properly label the three categories that now exist for designated?</span>
<span id="cb47-503"><a href="#cb47-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-504"><a href="#cb47-504" aria-hidden="true" tabindex="-1"></a><span class="fu">## Making Nice Tables</span></span>
<span id="cb47-505"><a href="#cb47-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-506"><a href="#cb47-506" aria-hidden="true" tabindex="-1"></a>As many of you have remarked in class, outputting "nice" tables is not R's default. There are several packages that can help to clean up tables and make them presentable. Let's learn how to use one such package, the <span class="in">`gt`</span> package. Similar to how GGPlot describes a *grammar of graphics* for visualizations, gt similarly provides methods to shape elements of a table.</span>
<span id="cb47-507"><a href="#cb47-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-508"><a href="#cb47-508" aria-hidden="true" tabindex="-1"></a><span class="fu">### Table Components in GT</span></span>
<span id="cb47-509"><a href="#cb47-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-510"><a href="#cb47-510" aria-hidden="true" tabindex="-1"></a>In GT, there are numerous table components which you can format as you wish:</span>
<span id="cb47-511"><a href="#cb47-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-512"><a href="#cb47-512" aria-hidden="true" tabindex="-1"></a><span class="al">![](https://gt.rstudio.com/reference/figures/gt_parts_of_a_table.svg)</span></span>
<span id="cb47-513"><a href="#cb47-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-514"><a href="#cb47-514" aria-hidden="true" tabindex="-1"></a>gt's <span class="co">[</span><span class="ot">documentation</span><span class="co">](https://gt.rstudio.com)</span> can help you become more familiar with these different components.</span>
<span id="cb47-515"><a href="#cb47-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-516"><a href="#cb47-516" aria-hidden="true" tabindex="-1"></a><span class="fu">### Making a First GT Table</span></span>
<span id="cb47-517"><a href="#cb47-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-518"><a href="#cb47-518" aria-hidden="true" tabindex="-1"></a>Let's start off by taking the Illinois data we were previously working on and styling the table using gt:</span>
<span id="cb47-519"><a href="#cb47-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-522"><a href="#cb47-522" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-523"><a href="#cb47-523" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb47-524"><a href="#cb47-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-525"><a href="#cb47-525" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb47-526"><a href="#cb47-526" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"Illinois"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb47-527"><a href="#cb47-527" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county, Designated) <span class="sc">|&gt;</span> </span>
<span id="cb47-528"><a href="#cb47-528" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb47-529"><a href="#cb47-529" aria-hidden="true" tabindex="-1"></a>    <span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Designated, <span class="at">values_from =</span> Income) <span class="sc">|&gt;</span> </span>
<span id="cb47-530"><a href="#cb47-530" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Difference =</span> Designated <span class="sc">-</span> <span class="st">`</span><span class="at">Not Designated</span><span class="st">`</span>) <span class="sc">|&gt;</span> </span>
<span id="cb47-531"><a href="#cb47-531" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span>
<span id="cb47-532"><a href="#cb47-532" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-533"><a href="#cb47-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-534"><a href="#cb47-534" aria-hidden="true" tabindex="-1"></a>We simply added <span class="in">`gt()`</span> as a final command after producing a summary table.</span>
<span id="cb47-535"><a href="#cb47-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-536"><a href="#cb47-536" aria-hidden="true" tabindex="-1"></a><span class="fu">### Formatting Columns</span></span>
<span id="cb47-537"><a href="#cb47-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-538"><a href="#cb47-538" aria-hidden="true" tabindex="-1"></a>There's a range of formatting options we can take advantage of to style our table. most formatting options begin with <span class="in">`fmt_`</span> which makes it fairly easy to search for the format type you're looking for. Let's format the "Designated", "Not Designated", and "Difference" columns as currency with no decimal places. While we're at it, let's rename the "county" column so "county" is capitalized:</span>
<span id="cb47-539"><a href="#cb47-539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-542"><a href="#cb47-542" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-543"><a href="#cb47-543" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb47-544"><a href="#cb47-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-545"><a href="#cb47-545" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb47-546"><a href="#cb47-546" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"Illinois"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb47-547"><a href="#cb47-547" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county, Designated) <span class="sc">|&gt;</span> </span>
<span id="cb47-548"><a href="#cb47-548" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb47-549"><a href="#cb47-549" aria-hidden="true" tabindex="-1"></a>    <span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Designated, <span class="at">values_from =</span> Income) <span class="sc">|&gt;</span> </span>
<span id="cb47-550"><a href="#cb47-550" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Difference =</span> Designated <span class="sc">-</span> <span class="st">`</span><span class="at">Not Designated</span><span class="st">`</span>) <span class="sc">|&gt;</span> </span>
<span id="cb47-551"><a href="#cb47-551" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb47-552"><a href="#cb47-552" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb47-553"><a href="#cb47-553" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_currency</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb47-554"><a href="#cb47-554" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">county =</span> <span class="st">"County"</span>)</span>
<span id="cb47-555"><a href="#cb47-555" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb47-556"><a href="#cb47-556" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-557"><a href="#cb47-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-558"><a href="#cb47-558" aria-hidden="true" tabindex="-1"></a>Note that <span class="in">`cols_label`</span> allows us to adjust column labels by supplying the variable name and then the desired name of the column.</span>
<span id="cb47-559"><a href="#cb47-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-560"><a href="#cb47-560" aria-hidden="true" tabindex="-1"></a>gt provides a <span class="co">[</span><span class="ot">nice workflow example</span><span class="co">](https://gt.rstudio.com/articles/intro-creating-gt-tables.html)</span> to show you step by step how you might apply formatting options to style a table. Also see the <span class="co">[</span><span class="ot">reference guide</span><span class="co">](https://gt.rstudio.com/reference/index.html)</span> for specific formats.</span>
<span id="cb47-561"><a href="#cb47-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-562"><a href="#cb47-562" aria-hidden="true" tabindex="-1"></a><span class="fu">### Saving a Table</span></span>
<span id="cb47-563"><a href="#cb47-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-564"><a href="#cb47-564" aria-hidden="true" tabindex="-1"></a>We can easily use code to insert a table into our document, but what if you want to save it out as a separate file? The <span class="in">`gtsave()`</span> command allows you to save your formatted table in a variety of formats.</span>
<span id="cb47-565"><a href="#cb47-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-568"><a href="#cb47-568" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-569"><a href="#cb47-569" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb47-570"><a href="#cb47-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-571"><a href="#cb47-571" aria-hidden="true" tabindex="-1"></a>ozs <span class="sc">|&gt;</span> </span>
<span id="cb47-572"><a href="#cb47-572" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"Illinois"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb47-573"><a href="#cb47-573" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(county, Designated) <span class="sc">|&gt;</span> </span>
<span id="cb47-574"><a href="#cb47-574" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb47-575"><a href="#cb47-575" aria-hidden="true" tabindex="-1"></a>    <span class="at">Income =</span> <span class="fu">mean</span>(medhhincome2014_tract, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Designated, <span class="at">values_from =</span> Income) <span class="sc">|&gt;</span> </span>
<span id="cb47-576"><a href="#cb47-576" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Difference =</span> Designated <span class="sc">-</span> <span class="st">`</span><span class="at">Not Designated</span><span class="st">`</span>) <span class="sc">|&gt;</span> </span>
<span id="cb47-577"><a href="#cb47-577" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb47-578"><a href="#cb47-578" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb47-579"><a href="#cb47-579" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_currency</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb47-580"><a href="#cb47-580" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">county =</span> <span class="st">"County"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb47-581"><a href="#cb47-581" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gtsave</span>(<span class="st">"il_difference.png"</span>, <span class="st">"04_describing/output"</span>)</span>
<span id="cb47-582"><a href="#cb47-582" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb47-583"><a href="#cb47-583" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-584"><a href="#cb47-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-585"><a href="#cb47-585" aria-hidden="true" tabindex="-1"></a>And here's the actual table that was produced:</span>
<span id="cb47-586"><a href="#cb47-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-587"><a href="#cb47-587" aria-hidden="true" tabindex="-1"></a><span class="al">![](04_describing/output/il_difference.png)</span></span>
<span id="cb47-588"><a href="#cb47-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-589"><a href="#cb47-589" aria-hidden="true" tabindex="-1"></a><span class="fu">## Lab Evaluation</span></span>
<span id="cb47-590"><a href="#cb47-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-591"><a href="#cb47-591" aria-hidden="true" tabindex="-1"></a>In evaluating your lab submission, we'll be paying attention to the following:</span>
<span id="cb47-592"><a href="#cb47-592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-593"><a href="#cb47-593" aria-hidden="true" tabindex="-1"></a>As you get into the lab, please feel welcome to ask us questions, and please share where you're struggling with us and with others in the class.</span>
<span id="cb47-594"><a href="#cb47-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-595"><a href="#cb47-595" aria-hidden="true" tabindex="-1"></a><span class="fu">## References</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Content <i class="fa-regular fa-copyright" aria-label="copyright"></i> Andrew J. Greenlee</div>   
    <div class="nav-footer-right">Made with <i class="fa-brands fa-r-project" aria-label="r-project"></i> and <a href="https://quarto.org/">Quarto</a> <br> Website Code on <a href="https://github.com/agreen4/UP570_S23_Website">Github <i class="fa-brands fa-github" aria-label="github"></i></a></div>
  </div>
</footer>



</body></html>