{
  "hash": "23aa819b367541688301ba2e382e2785",
  "result": {
    "markdown": "---\ntitle: \"Measuring Transit Equity\"\nsidebar: false\ntoc: true\ntoc-depth: 4\npage-layout: full\nformat: \n  html:\n    code-fold: show\n    code-overflow: wrap\n    code-tools:\n      source: true\n      toggle: false\n      caption: none\nfig-responsive: true\neditor: visual\n---\n\n\n## Introduction\n\nIn this lab, we will learn how to use different types of data to explore and visualize access to transportation. This will allow us to identify the spatial disparities due to unequal distribution of transportation infrastructure (e.g. transit stops, transit routes, transit frequency, etc.). We are also able to see the repercussions on commute quality (i.e., trip duration, transportation expenses, etc.)\n\nIn this lab(**link**) the main things you will learn are the following:\n\n1.  Calculate and visualize accessibility measure to transportation infrastructure (i.e., bus stops, charging stations, etc)\n\n2.  Calculate and visualize percentage of public transportation users\n\n3.  Calculate and visualize average commute times\n\nYou can build on those to see the correlation between income/race/gender and the different transportation equity measures.\n\n## Github Lab Repository\n\nIf you have not already done so, follow [this link](https://classroom.github.com/a/GaBYrVKl) to accept the lab Github Classroom assignment repository.\n\n## Access to transportation infrastructure\n\nIn this example I am using bus stops as a proxy for transportation infrastructure. You can use many other infrastructure types and explore their distribution in relation to socioeconomic and demographics of you neighborhood/region. You can find transit information from [GTFS](https://developers.google.com/transit/gtfs/reference) as well as open source portals. For the example I showed during class on electric charging stations, I had to grab this data from a private provider.\n\nFirst lets start by loading our libraries. By now, you should be familiar with tidycensus, tidyverse, and tigris. I am introducing [Simple Futures (sf)](https://r-spatial.github.io/sf/) for some spatial analysis (i.e., calculating the density of buses per census tract)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load required packages\nlibrary(tidycensus)\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.4.1     ✔ purrr   0.3.4\n✔ tibble  3.2.1     ✔ dplyr   1.1.1\n✔ tidyr   1.2.0     ✔ stringr 1.4.1\n✔ readr   2.1.2     ✔ forcats 0.5.2\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n```\n:::\n\n```{.r .cell-code}\nlibrary(sf)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLinking to GEOS 3.10.2, GDAL 3.4.2, PROJ 8.2.1; sf_use_s2() is TRUE\n```\n:::\n\n```{.r .cell-code}\nlibrary(tigris)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nTo enable caching of data, set `options(tigris_use_cache = TRUE)`\nin your R script or .Rprofile.\n```\n:::\n:::\n\n\nLet's download our shape files for our neighborhood. I am using Cook County as my case study. I am using the census tract level. I have defined a certain type of projection [crs=4326](https://epsg.io/4326) to unify our projection system\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Download and filter Chicago census tracts\ncook_county_tracts <- tracts(state = \"IL\", county = \"Cook\") |>\n  st_transform(crs = 4326)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRetrieving data for the year 2020\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n\n  |                                                                            \n  |                                                                      |   0%\n  |                                                                            \n  |                                                                      |   1%\n  |                                                                            \n  |=                                                                     |   1%\n  |                                                                            \n  |=                                                                     |   2%\n  |                                                                            \n  |==                                                                    |   2%\n  |                                                                            \n  |==                                                                    |   3%\n  |                                                                            \n  |===                                                                   |   4%\n  |                                                                            \n  |===                                                                   |   5%\n  |                                                                            \n  |====                                                                  |   5%\n  |                                                                            \n  |====                                                                  |   6%\n  |                                                                            \n  |=====                                                                 |   7%\n  |                                                                            \n  |======                                                                |   8%\n  |                                                                            \n  |======                                                                |   9%\n  |                                                                            \n  |=======                                                               |  10%\n  |                                                                            \n  |========                                                              |  11%\n  |                                                                            \n  |========                                                              |  12%\n  |                                                                            \n  |=========                                                             |  13%\n  |                                                                            \n  |==========                                                            |  14%\n  |                                                                            \n  |==========                                                            |  15%\n  |                                                                            \n  |=============                                                         |  19%\n  |                                                                            \n  |===============                                                       |  22%\n  |                                                                            \n  |================                                                      |  23%\n  |                                                                            \n  |=================                                                     |  24%\n  |                                                                            \n  |====================                                                  |  28%\n  |                                                                            \n  |=======================                                               |  32%\n  |                                                                            \n  |==========================                                            |  37%\n  |                                                                            \n  |=============================                                         |  41%\n  |                                                                            \n  |=============================                                         |  42%\n  |                                                                            \n  |================================                                      |  46%\n  |                                                                            \n  |===================================                                   |  51%\n  |                                                                            \n  |======================================                                |  54%\n  |                                                                            \n  |======================================                                |  55%\n  |                                                                            \n  |=======================================                               |  56%\n  |                                                                            \n  |========================================                              |  58%\n  |                                                                            \n  |=========================================                             |  58%\n  |                                                                            \n  |=========================================                             |  59%\n  |                                                                            \n  |==========================================                            |  60%\n  |                                                                            \n  |===========================================                           |  61%\n  |                                                                            \n  |============================================                          |  62%\n  |                                                                            \n  |============================================                          |  63%\n  |                                                                            \n  |============================================                          |  64%\n  |                                                                            \n  |=============================================                         |  64%\n  |                                                                            \n  |=============================================                         |  65%\n  |                                                                            \n  |==============================================                        |  65%\n  |                                                                            \n  |==============================================                        |  66%\n  |                                                                            \n  |===============================================                       |  67%\n  |                                                                            \n  |===============================================                       |  68%\n  |                                                                            \n  |================================================                      |  68%\n  |                                                                            \n  |================================================                      |  69%\n  |                                                                            \n  |=================================================                     |  69%\n  |                                                                            \n  |====================================================                  |  74%\n  |                                                                            \n  |====================================================                  |  75%\n  |                                                                            \n  |=====================================================                 |  75%\n  |                                                                            \n  |=====================================================                 |  76%\n  |                                                                            \n  |======================================================                |  77%\n  |                                                                            \n  |======================================================                |  78%\n  |                                                                            \n  |=======================================================               |  78%\n  |                                                                            \n  |========================================================              |  81%\n  |                                                                            \n  |=========================================================             |  82%\n  |                                                                            \n  |==========================================================            |  82%\n  |                                                                            \n  |==========================================================            |  83%\n  |                                                                            \n  |=============================================================         |  87%\n  |                                                                            \n  |================================================================      |  92%\n  |                                                                            \n  |===================================================================   |  96%\n  |                                                                            \n  |====================================================================  |  98%\n  |                                                                            \n  |===================================================================== |  98%\n  |                                                                            \n  |===================================================================== |  99%\n  |                                                                            \n  |======================================================================| 100%\n```\n:::\n:::\n\n\nNow that we have our census tract shapefile, let's download the bus stops data, read them, and project them.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Read bus stop data\nbus_stops <- read_csv(\"stops.txt\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 11217 Columns: 9\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): stop_name, stop_desc\ndbl (7): stop_id, stop_code, stop_lat, stop_lon, location_type, parent_stati...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\n# Convert bus_stops data to an sf object\nbus_stops_sf <- st_as_sf(bus_stops, coords = c(\"stop_lon\", \"stop_lat\"), crs = 4326)\n```\n:::\n\n\nLast data input we need is the socioeconomic of our neighborhood. For the sake of this tutorial I am limiting it to population and household median and income. But please feel free to explore further attribute.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Specify the ACS variables you want to download\nvariables <- c(\"B01003_001\", # Total population\n               \"B19013_001\") # Median household income\n\n# Download the data for Cook County census tracts\ncook_county_data <- get_acs(geography = \"tract\",\n                            state = \"17\",\n                            county = \"031\",\n                            variables = variables,\n                            year = 2019,\n                            output=\"wide\",\n                            survey = \"acs5\",\n                            geometry = FALSE)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nGetting data from the 2015-2019 5-year ACS\n```\n:::\n:::\n\n\nTo make our table more legible, I am renaming our columns and rescaling the median income variable\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncook_county_data <- cook_county_data |> \n  rename(name = NAME, pop_tot = B01003_001E, med_income = B19013_001E) |> \n  select(GEOID, name, pop_tot, med_income) \n\n# scale income data so you are able to correlate it with transportation infrastructure\ncook_county_data <- cook_county_data |>  mutate(income_scaled = scale(med_income))\n\nlibrary(gt)\ncook_county_data |> head() |> gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"uhlzppqjhy\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#uhlzppqjhy .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#uhlzppqjhy .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#uhlzppqjhy .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#uhlzppqjhy .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#uhlzppqjhy .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#uhlzppqjhy .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#uhlzppqjhy .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#uhlzppqjhy .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#uhlzppqjhy .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#uhlzppqjhy .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#uhlzppqjhy .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#uhlzppqjhy .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#uhlzppqjhy .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#uhlzppqjhy .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#uhlzppqjhy .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#uhlzppqjhy .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#uhlzppqjhy .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#uhlzppqjhy .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#uhlzppqjhy .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#uhlzppqjhy .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#uhlzppqjhy .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#uhlzppqjhy .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#uhlzppqjhy .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#uhlzppqjhy .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#uhlzppqjhy .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#uhlzppqjhy .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#uhlzppqjhy .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#uhlzppqjhy .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#uhlzppqjhy .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#uhlzppqjhy .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#uhlzppqjhy .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#uhlzppqjhy .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#uhlzppqjhy .gt_left {\n  text-align: left;\n}\n\n#uhlzppqjhy .gt_center {\n  text-align: center;\n}\n\n#uhlzppqjhy .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#uhlzppqjhy .gt_font_normal {\n  font-weight: normal;\n}\n\n#uhlzppqjhy .gt_font_bold {\n  font-weight: bold;\n}\n\n#uhlzppqjhy .gt_font_italic {\n  font-style: italic;\n}\n\n#uhlzppqjhy .gt_super {\n  font-size: 65%;\n}\n\n#uhlzppqjhy .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#uhlzppqjhy .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#uhlzppqjhy .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#uhlzppqjhy .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#uhlzppqjhy .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#uhlzppqjhy .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#uhlzppqjhy .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"GEOID\">GEOID</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"name\">name</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"pop_tot\">pop_tot</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"med_income\">med_income</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"income_scaled\">income_scaled</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">17031630200</td>\n<td headers=\"name\" class=\"gt_row gt_left\">Census Tract 6302, Cook County, Illinois</td>\n<td headers=\"pop_tot\" class=\"gt_row gt_right\">1825</td>\n<td headers=\"med_income\" class=\"gt_row gt_right\">37422</td>\n<td headers=\"income_scaled\" class=\"gt_row gt_center\">-0.83877210</td></tr>\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">17031580700</td>\n<td headers=\"name\" class=\"gt_row gt_left\">Census Tract 5807, Cook County, Illinois</td>\n<td headers=\"pop_tot\" class=\"gt_row gt_right\">5908</td>\n<td headers=\"med_income\" class=\"gt_row gt_right\">47000</td>\n<td headers=\"income_scaled\" class=\"gt_row gt_center\">-0.57701469</td></tr>\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">17031590600</td>\n<td headers=\"name\" class=\"gt_row gt_left\">Census Tract 5906, Cook County, Illinois</td>\n<td headers=\"pop_tot\" class=\"gt_row gt_right\">3419</td>\n<td headers=\"med_income\" class=\"gt_row gt_right\">46033</td>\n<td headers=\"income_scaled\" class=\"gt_row gt_center\">-0.60344186</td></tr>\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">17031600700</td>\n<td headers=\"name\" class=\"gt_row gt_left\">Census Tract 6007, Cook County, Illinois</td>\n<td headers=\"pop_tot\" class=\"gt_row gt_right\">2835</td>\n<td headers=\"med_income\" class=\"gt_row gt_right\">45294</td>\n<td headers=\"income_scaled\" class=\"gt_row gt_center\">-0.62363801</td></tr>\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">17031611900</td>\n<td headers=\"name\" class=\"gt_row gt_left\">Census Tract 6119, Cook County, Illinois</td>\n<td headers=\"pop_tot\" class=\"gt_row gt_right\">1639</td>\n<td headers=\"med_income\" class=\"gt_row gt_right\">24507</td>\n<td headers=\"income_scaled\" class=\"gt_row gt_center\">-1.19172646</td></tr>\n    <tr><td headers=\"GEOID\" class=\"gt_row gt_right\">17031804505</td>\n<td headers=\"name\" class=\"gt_row gt_left\">Census Tract 8045.05, Cook County, Illinois</td>\n<td headers=\"pop_tot\" class=\"gt_row gt_right\">3445</td>\n<td headers=\"med_income\" class=\"gt_row gt_right\">71438</td>\n<td headers=\"income_scaled\" class=\"gt_row gt_center\">0.09085204</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nGreat! Now we have our census demographic data ready. Let's spend time on preparing our bus stops data. Remeber these are represented in Lat, Long. We have to associate them to the correct census tracts. To do so, we will have to spatial join the bus shapefile to the census tract shapefile. We can then calculate how many bus stops per tract are available.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# buses per census tract\n#sf_use_s2(FALSE)\nbus_stops_per_census_tract <- bus_stops_sf %>%\n  st_join(cook_county_tracts) %>%\n  group_by(TRACTCE) %>%\n  summarise(bus_stop_count = n()) %>%\n  ungroup()\n```\n:::\n\n\nView results\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbus_stops_per_census_tract |> head() |> gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"wukbbwpefx\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#wukbbwpefx .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#wukbbwpefx .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#wukbbwpefx .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#wukbbwpefx .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#wukbbwpefx .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#wukbbwpefx .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wukbbwpefx .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#wukbbwpefx .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#wukbbwpefx .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#wukbbwpefx .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#wukbbwpefx .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#wukbbwpefx .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#wukbbwpefx .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#wukbbwpefx .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#wukbbwpefx .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#wukbbwpefx .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#wukbbwpefx .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#wukbbwpefx .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wukbbwpefx .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#wukbbwpefx .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#wukbbwpefx .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wukbbwpefx .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#wukbbwpefx .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#wukbbwpefx .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wukbbwpefx .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wukbbwpefx .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#wukbbwpefx .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#wukbbwpefx .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wukbbwpefx .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#wukbbwpefx .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wukbbwpefx .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#wukbbwpefx .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wukbbwpefx .gt_left {\n  text-align: left;\n}\n\n#wukbbwpefx .gt_center {\n  text-align: center;\n}\n\n#wukbbwpefx .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#wukbbwpefx .gt_font_normal {\n  font-weight: normal;\n}\n\n#wukbbwpefx .gt_font_bold {\n  font-weight: bold;\n}\n\n#wukbbwpefx .gt_font_italic {\n  font-style: italic;\n}\n\n#wukbbwpefx .gt_super {\n  font-size: 65%;\n}\n\n#wukbbwpefx .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#wukbbwpefx .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#wukbbwpefx .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#wukbbwpefx .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#wukbbwpefx .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#wukbbwpefx .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#wukbbwpefx .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"TRACTCE\">TRACTCE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"bus_stop_count\">bus_stop_count</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"geometry\">geometry</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"TRACTCE\" class=\"gt_row gt_right\">010100</td>\n<td headers=\"bus_stop_count\" class=\"gt_row gt_right\">2</td>\n<td headers=\"geometry\" class=\"gt_row gt_center\">c(-87.6770962, -87.6663015, 42.02289954, 42.01930539)</td></tr>\n    <tr><td headers=\"TRACTCE\" class=\"gt_row gt_right\">010201</td>\n<td headers=\"bus_stop_count\" class=\"gt_row gt_right\">3</td>\n<td headers=\"geometry\" class=\"gt_row gt_center\">c(-87.68426462, -87.68054061, -87.6777439, 42.01941115, 42.01936686, 42.01937362)</td></tr>\n    <tr><td headers=\"TRACTCE\" class=\"gt_row gt_right\">010202</td>\n<td headers=\"bus_stop_count\" class=\"gt_row gt_right\">18</td>\n<td headers=\"geometry\" class=\"gt_row gt_center\">c(-87.67632528, -87.67580666, -87.67532833, -87.675138, -87.67380984, -87.67305981, -87.67316244, -87.672892, -87.67290599, -87.67281382, -87.67279844, -87.67279597, -87.6724214, -87.67456121, 42.01918517, 42.01798492, 42.01611703, 42.01595, 42.01665359, 42.0180352, 42.01896555, 42.019063, 42.01874262, 42.01850551, 42.01822603, 42.01776729, 42.01744751, 42.01276478)</td></tr>\n    <tr><td headers=\"TRACTCE\" class=\"gt_row gt_right\">010300</td>\n<td headers=\"bus_stop_count\" class=\"gt_row gt_right\">17</td>\n<td headers=\"geometry\" class=\"gt_row gt_center\">c(-87.67058707, -87.67103858, -87.6692571266, -87.669092, -87.66932276, -87.6689834, -87.66617692, -87.665802, -87.66551305, -87.665018, -87.66511368, -87.66467448, -87.663375, -87.663994, -87.664145, -87.66469399, 42.01928162, 42.01808861, 42.0160204165, 42.015876, 42.01931247, 42.0190888, 42.01919502, 42.018021, 42.01802283, 42.016268, 42.01580068, 42.01520955, 42.013005, 42.014113, 42.013757, 42.01482404)</td></tr>\n    <tr><td headers=\"TRACTCE\" class=\"gt_row gt_right\">010400</td>\n<td headers=\"bus_stop_count\" class=\"gt_row gt_right\">9</td>\n<td headers=\"geometry\" class=\"gt_row gt_center\">c(-87.65693556, -87.65834886, -87.66071682, -87.66060059, -87.660658, -87.660848, -87.661598, -87.661995, -87.662803, 41.99833161, 41.99827386, 42.003871, 42.00038209, 42.001702, 42.00572, 42.008133, 42.009358, 42.01166)</td></tr>\n    <tr><td headers=\"TRACTCE\" class=\"gt_row gt_right\">010501</td>\n<td headers=\"bus_stop_count\" class=\"gt_row gt_right\">8</td>\n<td headers=\"geometry\" class=\"gt_row gt_center\">c(-87.66177918, -87.661749, -87.662146, -87.6623874, -87.662952, -87.663526, -87.66563004, -87.66379711, 42.00790263, 42.007777, 42.009002, 42.0092214, 42.011414, 42.012649, 42.0078605, 42.00787643)</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nNow, lets create the final dataset that includes both the bus data and demographics/socioeconomics of our neighborhood. Use join.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Merge the count of bus stations per census tract back to the original census tracts shapefile.\ncook_county_tracts_merged <- st_join(cook_county_tracts, bus_stops_per_census_tract, left = FALSE)\n\n# Merge the count of bus stations per census tract back to the original census tracts shapefile.\ncook_county_tracts_merged <- left_join(cook_county_tracts_merged, cook_county_data, by = \"GEOID\")\n```\n:::\n\n\nNow let's visualize this and see the ratio of population served by buses. Where are they clustered and if there are any inferences we can make.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a map.\nggplot() +\n  geom_sf(data = cook_county_tracts_merged, \n          mapping = aes(fill =cut_number((pop_tot/bus_stop_count), 5)), \n          color = \"white\", \n          size = 0.1) +\n  scale_fill_brewer(palette = \"PuBu\", \n                     name = \"Bus stations normalized per populatin\",\n                    na.value = \"gray\")+       \n  labs(title = \"Bus Stations per Census Tract in Cook County\",\n       subtitle = \"Number of Bus Stations\",\n       caption = \"Source: Census data and Bus Stations data\") +\n  theme_minimal() +\n  theme(panel.background = element_blank()) +                   \n  coord_sf(datum = NA) \n```\n\n::: {.cell-output-display}\n![](10_transit_equity_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\nNow it's your turn to explore other demographic attributes and see how they are correlated to various transportation infrastructure.\n\n## Travel behavior\n\nProviding transportation infrastructure is not sufficient for assuring equitable access to mobility. By investigating travel behavior, one can see the discrepancies in accessibility, as well as the burden that certain communities have to face. In this example, I will look at transportation modes and commute times. To make this more informative, try to explore the relationship between average commute times and race ratios per census tract.\n\nFor this analysis we will need commute information from ACS and census tract shape files for visualization.\n\nLet's first start by identifying the variables we are interested in. I haven't renamed them, but good practice is to always rename your columns with legible names.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvariables <- c(\"B19013_001\", # Median Household Income\n\"B01003_001\", # Total population\n\"B03002_003\", # White population\n\"B03002_012\", # Hispanic or Latinx population\n\"B03002_004\", # African American population\n\"B08201_001\", # Number of households\n\"B08141_001\", # population using transportation\n\"B08141_006\", # population drive\n\"B08141_011\", # population carpool\n\"B08141_016\", # population transit\n\"B08141_021\", # population walk\n\"B08141_026\", # population other\n\"B08141_031\", # Population working from home \n\"B08303_001\", # Population of commuters to work\n\"B08303_002\", # Population of commuters less than 5 min\n\"B08303_003\", # Population of commuters 5 to 9 minutes\n\"B08303_004\", # Population of commuters 10 to 14 minutes\n\"B08303_005\", # Population of commuters 15 to 19 minutes\n\"B08303_006\", # Population of commuters 20 to 24 minutes \n\"B08303_007\", # Population of commuters 25 to 29 minutes \n\"B08303_008\", # Population of commuters 30 to 34 minutes \n\"B08303_009\", # Population of commuters 35 to 39 minutes \n\"B08303_010\", # Population of commuters 40 to 44 minutes \n\"B08303_011\", # Population of commuters 45 to 59 minutes \n\"B08303_012\", # Population of commuters 60 to 89 minutes\n\"B08303_013\") # Population of commuters 90 or more minutes\n```\n:::\n\n\nLet's download the data from ACS using tidycensus.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncook_county_data <- get_acs(geography = \"tract\", \n                            variables = variables, \n                            state = \"IL\", \n                            county = \"Cook\",\n                            survey = \"acs5\", \n                            output=\"wide\",\n                            year = 2019)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nGetting data from the 2015-2019 5-year ACS\n```\n:::\n:::\n\n\nWe can use the same shapefile from the previous exercise, so there is no need to re download the census tract shapefile. Now let's join our demographic data to our shapefile using GEOID as our common index.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncook_county_tracts <- tracts(state = \"IL\", county = \"Cook\") |>\n  erase_water(area_threshold = .9, year = 2020) %>% \n  st_transform(crs = 4326)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRetrieving data for the year 2020\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nFetching area water data for your dataset's location...\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nErasing water area...\nIf this is slow, try a larger area threshold value.\n```\n:::\n\n```{.r .cell-code}\ncook_county_data_sf <- left_join(cook_county_tracts, cook_county_data, by = c(\"GEOID\" = \"GEOID\"))\n```\n:::\n\n\nNow that we have master dataframe with all the data in it. Let's go ahead and calculate two measure:\n\n1.  Percentage of transit users (pct_public_transit)\n\n2.  Average commute time (avg_commute_travel_time). For this measure, I am multiplying each range of commute time by the lowest value in the range (i.e. 5 mins in 5-10mins). I then add all the values and divide them by the total number pf commuters.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncook_county_data_sf <- cook_county_data_sf %>%\n  mutate(pct_public_transit = B08141_016E / B08141_001E * 100,\n         avg_commute_travel_time = ((B08303_002E*1+\n                                      B08303_003E*5+\n                                      B08303_004E*10+\n                                      B08303_005E*15+\n                                      B08303_006E*20+ \n                                      B08303_007E*25+ \n                                      B08303_008E*30+\n                                      B08303_009E*35+ \n                                      B08303_010E*40+ \n                                      B08303_011E*45+\n                                      B08303_012E*60+\n                                      B08303_013E*90)/\n                                      1)/B08303_001E)\n```\n:::\n\n\nSince the are regions with no commuters, we get inf (infinite values). We have to make sure to convert them to NA so we are able to analyse these and visualize them.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncook_county_data_sf$avg_commute_travel_time[sapply(cook_county_data_sf$avg_commute_travel_time, is.infinite)] <- NA\n```\n:::\n\n\nLets have a look at the public transportation users and where they are located\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create public trasnportation users map\nggplot() +\n  geom_sf(data = cook_county_data_sf, \n          mapping = aes(fill =cut_number((avg_commute_travel_time), 5)), \n          color = \"white\", \n          size = 0.1) +\n  scale_fill_brewer(palette = \"PuBu\", \n                     name = \"Percentage\",\n                    na.value = \"gray\")+       \n  labs(title = \"Percentage of Workers with Public Transportation by Census Tract in Cook County\",\n       caption = \"Source: US Census Bureau ACS 5-Year Estimates, 2019\") +\n  theme_minimal() +\n  theme(panel.background = element_blank()) +                   \n  coord_sf(datum = NA) \n```\n\n::: {.cell-output-display}\n![](10_transit_equity_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\nNow let's have a look at the average commute time in each census tract and how they are spatially distributed.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create average commute times map\nggplot() +\n  geom_sf(data = cook_county_data_sf, \n          mapping = aes(fill =cut_number((avg_commute_travel_time), 5)), \n          color = \"white\", \n          size = 0.1) +\n  scale_fill_brewer(palette = \"PuBu\", \n                     name = \"Avergae commute times\",\n                    na.value = \"gray\")+       \n  labs(title = \"Average Commute map by Census Tract in Cook County\",\n       caption = \"Source: US Census Bureau ACS 5-Year Estimates, 2019\") +\n  theme_minimal() +\n  theme(panel.background = element_blank()) +                   \n  coord_sf(datum = NA) \n```\n\n::: {.cell-output-display}\n![](10_transit_equity_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\nLab Evaluation\n\nIn evaluating your lab submission, we'll be paying attention to the following:\n\nAs you get into the lab, please feel welcome to ask us questions, and please share where you're struggling with us and with others in the class.\n\n## References\n",
    "supporting": [
      "10_transit_equity_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}