{
  "hash": "adb041447aa457475a57ba27b74728b5",
  "result": {
    "markdown": "---\ntitle: \"Neighborhood Change\"\nsidebar: false\ntoc: true\ntoc-depth: 4\npage-layout: full\nexecute: \n  cache: true\nformat: \n  html:\n    code-fold: show\n    code-overflow: wrap\n    code-tools:\n      source: true\n      toggle: false\n      caption: none\nfig-responsive: true\neditor: visual\n---\n\n::: {.cell hash='08_neighborhood_change_cache/html/unnamed-chunk-1_44b1481c15e54aa7a295a28fde4eecc8'}\n\n```{.r .cell-code}\nlibrary(gt)\nlibrary(tidycensus)\nlibrary(tidyverse)\n```\n:::\n\n\n## Introduction\n\nIn this lab, we'll explore in detail the [Nathalie P. Voorhees Center's](https://voorheescenter.uic.edu) methodology for measuring neighborhood change. The center has produced multiple analyses and strategies for measuring such change, focused on the Chicago metropolitan area.\n\nBy the end of this lab, you will replicate elements of the Voorhees Center's *Who Can Live in Chicago?* report including maps and other visualizations of neighborhood change. We will develop a code base that could be applied to any location in the United States.\n\n## Goals\n\nIn this lab, we will use a combination of decennial census data and American Community Survey data to examine patterns of neighborhood income change. We will overlay on these patterns of income change information about the demographics of who lives in these neighborhoods. Our goals for this lab are as follows:\n\n-   Continue to work with common sources of sociodemographic information, including those that have been pre-processed by sources other than the Census Bureau.\n-   Think critically about data processing pipelines and data requirements.\n-   Explore strategies for spatial longitudinal data description and analysis.\n\nTaking a close look at the visuals from the [Voorhees Center website](https://voorheescenter.uic.edu/chicago_communities/), they calculate for each census tract in each year the average per capita income for the time periods 1970, 1980, 1990, 2000, 2010, and 2017 for each census tract and then compare it to the regional weighted average income.\n\n![](08_neighborhood_change/images/02_NVC_Combined-Decades.png)\n\nThey classify tracts based upon whether they are:\n\n-   **Very High Income:** Greater than 40% above the regional average\n-   **High Income:** 20% - 40% above the reg ional average\n-   **Middle Income:** 20% below to 20% above the regional average\n-   **Low Income:** 20% below to 40% below the regional average\n-   **Very Low Income:** Greater than 40% below the regional average\n\nAfter classifying tracts, the study examines change over time, and then examines recent demographic characteristics based upon this change.\n\n![](08_neighborhood_change/images/03_NVC_Three_Cities.png) This gives us a sense of what we need to do to prepare our data.\n\n## Github Lab Repository\n\nIf you have not already done so, follow [this link](https://classroom.github.com/a/QZUuklCL) to accept the lab Github Classroom assignment repository.\n\n## Introduction to LTDB Data\n\nAt this point, you have spent time working with census data and common census geographies. We have used the tidycensus package to download census data from the Census Bureau's servers using API calls.\n\nIn this lab, we are going to look at another source of historical census data - the Longitudinal Tract Database. Census tracts are a common geography used by planners and other analysts because tracts roughly approximate neighborhoods, especially in highly urbanized areas where population density means that tracts are relatively small. One challenge faced by analysts looking to examine neighborhood level characteristics over time is that the geographic definitions for census tracts change every 10 years following the decennial census. These changes are performed as part of the Census' [Participant Statistical Areas Program (PSAP)](https://www.census.gov/programs-surveys/decennial-census/about/psap.html).\n\nWhile some tracts may stay the same, some may be *split* in cases where the population increases, and others may be *merged* in cases where the population decreases. See this [quick reference guide](https://www2.census.gov/geo/pdfs/partnerships/psap/G-650.pdf) for more information on thresholds for redefinition:\n\n![](08_neighborhood_change/images/04_2020PSAP.png)\n\nThe Census Bureau produces [geographic relationship files](https://www.census.gov/geographies/reference-files/time-series/geo/relationship-files.2020.html) which can help show the relationships between geographies over time.\n\n\n::: {.cell hash='08_neighborhood_change_cache/html/unnamed-chunk-2_e835385d87ca52fca121e57454526fd2'}\n::: {.cell-output-display}\n```{=html}\n<div id=\"vgzhellzdj\" style=\"overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#vgzhellzdj .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#vgzhellzdj .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#vgzhellzdj .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#vgzhellzdj .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#vgzhellzdj .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#vgzhellzdj .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#vgzhellzdj .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#vgzhellzdj .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#vgzhellzdj .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#vgzhellzdj .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#vgzhellzdj .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#vgzhellzdj .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#vgzhellzdj .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#vgzhellzdj .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#vgzhellzdj .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#vgzhellzdj .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#vgzhellzdj .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vgzhellzdj .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#vgzhellzdj .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#vgzhellzdj .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vgzhellzdj .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#vgzhellzdj .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#vgzhellzdj .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#vgzhellzdj .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vgzhellzdj .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#vgzhellzdj .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#vgzhellzdj .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#vgzhellzdj .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#vgzhellzdj .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vgzhellzdj .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#vgzhellzdj .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vgzhellzdj .gt_left {\n  text-align: left;\n}\n\n#vgzhellzdj .gt_center {\n  text-align: center;\n}\n\n#vgzhellzdj .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#vgzhellzdj .gt_font_normal {\n  font-weight: normal;\n}\n\n#vgzhellzdj .gt_font_bold {\n  font-weight: bold;\n}\n\n#vgzhellzdj .gt_font_italic {\n  font-style: italic;\n}\n\n#vgzhellzdj .gt_super {\n  font-size: 65%;\n}\n\n#vgzhellzdj .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#vgzhellzdj .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#vgzhellzdj .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#vgzhellzdj .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#vgzhellzdj .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#vgzhellzdj .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#vgzhellzdj .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\">GEOID_TRACT_10</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\">GEOID_TRACT_20</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\">NAMELSAD_TRACT_10</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\">NAMELSAD_TRACT_20</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\">AREALAND_TRACT_10</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\">AREALAND_TRACT_20</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td class=\"gt_row gt_right\">01001020100</td>\n<td class=\"gt_row gt_right\">01001020100</td>\n<td class=\"gt_row gt_left\">Census Tract 201</td>\n<td class=\"gt_row gt_left\">Census Tract 201</td>\n<td class=\"gt_row gt_right\">9,827,271</td>\n<td class=\"gt_row gt_right\">9,825,304</td></tr>\n    <tr><td class=\"gt_row gt_right\">01001020200</td>\n<td class=\"gt_row gt_right\">01001020100</td>\n<td class=\"gt_row gt_left\">Census Tract 202</td>\n<td class=\"gt_row gt_left\">Census Tract 201</td>\n<td class=\"gt_row gt_right\">3,325,674</td>\n<td class=\"gt_row gt_right\">9,825,304</td></tr>\n    <tr><td class=\"gt_row gt_right\">01001020200</td>\n<td class=\"gt_row gt_right\">01001020200</td>\n<td class=\"gt_row gt_left\">Census Tract 202</td>\n<td class=\"gt_row gt_left\">Census Tract 202</td>\n<td class=\"gt_row gt_right\">3,325,674</td>\n<td class=\"gt_row gt_right\">3,320,818</td></tr>\n    <tr><td class=\"gt_row gt_right\">01001020300</td>\n<td class=\"gt_row gt_right\">01001020300</td>\n<td class=\"gt_row gt_left\">Census Tract 203</td>\n<td class=\"gt_row gt_left\">Census Tract 203</td>\n<td class=\"gt_row gt_right\">5,349,271</td>\n<td class=\"gt_row gt_right\">5,349,271</td></tr>\n    <tr><td class=\"gt_row gt_right\">01001020400</td>\n<td class=\"gt_row gt_right\">01001020400</td>\n<td class=\"gt_row gt_left\">Census Tract 204</td>\n<td class=\"gt_row gt_left\">Census Tract 204</td>\n<td class=\"gt_row gt_right\">6,384,282</td>\n<td class=\"gt_row gt_right\">6,384,282</td></tr>\n    <tr><td class=\"gt_row gt_right\">01001020500</td>\n<td class=\"gt_row gt_right\">01001020501</td>\n<td class=\"gt_row gt_left\">Census Tract 205</td>\n<td class=\"gt_row gt_left\">Census Tract 205.01</td>\n<td class=\"gt_row gt_right\">11,408,867</td>\n<td class=\"gt_row gt_right\">6,203,654</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nNote from these example records shifts in tract definitions and areas. These relationship files can help you identify which census tracts have changed, however, creating consistent estimates over time from this information is challenging. Researchers tend to use strategies that either attribute characteristics using either *area* or *share of population* to weight how portions of one tract might translate into a new boundary in a different year.\n\nBrown University's [Spatial Structures in the Social Sciences](https://s4.ad.brown.edu/projects/diversity/index.htm) group has produced a [Longitudinal Tract Database](https://s4.ad.brown.edu/projects/diversity/researcher/LTDB.htm) which provides demographic estimates for prior decennial census years 1970, 1980, 1990, and 2000 adjusted to 2010 boundaries. The files also include selected demographic indicators that are comparable across each of these decennial census enumerations (the questions are asked in the same or similar enough way to be able to reliably compare these qualities over time).\n\nLTDB data come from two sources:\n\n1.  Decennial \"short form\" census data from the 100 percent count of the population. This includes race and ethnicity, age, household composition, and household tenure information.\n\n2.  Decennial \"long form\" census data administered to a sample of 1 in 6 households. These surveys contain far more detailed information on the characteristics of the population.\n\nDecennial data continues to be collected, but the 1 in 6 count sample data has now been replaced by the American Community Survey which annually samples the population creating valuable intercensal estimates used by analysts today.\n\nYou can find more information about the LTDB in the following [technical documentation](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4134912/pdf/nihms-522336.pdf).\n\nIn order to examine income and demographic change for census tracts, we're going to use LTDB data, and ultimately will supplement what's in these data with additional ACS data. We do this so that we can compare estimates over time using the same census tract geographies.\n\n## Setup\n\nLet's get set up by loading a few packages:\n\n\n::: {.cell hash='08_neighborhood_change_cache/html/unnamed-chunk-3_769e930f5089e06bd7275aa20076d430'}\n\n```{.r .cell-code}\nlibrary(gt)\nlibrary(tidyverse)\n```\n:::\n\n\n### LTDB Data Download\n\nLet's start by downloading LTDB data for analysis.\n\nGo to the [data download](https://s4.ad.brown.edu/projects/diversity/researcher/LTBDDload/Default.aspx) page. You will need to enter your email address and certify that you will follow terms of use for the data.\n\nMake note of what datasets are aggregated in the LTDB Standard Datasets. ![](08_neighborhood_change/images/01_ltdb.png)\n\nDownload both the *full* and *sample* standard data set files for all years. Also download the codebook.\n\nDecompress the downloaded folder containing the data files and place the raw data csv files in your raw data folder. You should have 12 files - six \"fullcount\" files and six \"sample\" files (you can ignore those files in the fullcount download with \"Global Neighborhood\" in their file name).\n\nPlace the codebook in your data documentation folder.\n\nNow that we have data and documentation manually downloaded, we can import the data for analysis.\n\n### Data Import\n\n\n::: {.cell hash='08_neighborhood_change_cache/html/unnamed-chunk-4_da11c70e38198ec2b19ef5b26314d21a'}\n\n:::\n\n\nLet's import our data. These are csv files - in the past we've used `read_csv()` from the readr package to do this (readr is part of the tidyverse so you don't need to load it separately).\n\nFor clarity, use the prefix \"F\\_\" for full count data and \"S\\_\" for sample data when you read the LTDB into table objects in R. Go ahead and import the ten data files:\n\n\n::: {.cell hash='08_neighborhood_change_cache/html/unnamed-chunk-5_3f57ffc13432cc6aa0ac8c2dfe1d8cef'}\n\n```{.r .cell-code}\nF_1970<-read_csv(\"data_raw/LTDB_Std_1970_fullcount.csv\")\nS_1970<-read_csv(\"data_raw/ltdb_std_1970_sample.csv\")\n\nF_1980<-read_csv(\"data_raw/LTDB_Std_1980_fullcount.csv\")\nS_1980<-read_csv(\"data_raw/ltdb_std_1980_sample.csv\")\n\nF_1990<-read_csv(\"data_raw/LTDB_Std_1990_fullcount.csv\")\nS_1990<-read_csv(\"data_raw/ltdb_std_1990_sample.csv\")\n\nF_2000<-read_csv(\"data_raw/LTDB_Std_2000_fullcount.csv\")\nS_2000<-read_csv(\"data_raw/ltdb_std_2000_sample.csv\")\n\nF_2010<-read_csv(\"data_raw/LTDB_Std_2010_fullcount.csv\")\nS_2010<-read_csv(\"data_raw/LTDB_std_200812_Sample.csv\")\n\nF_2020<-read_csv(\"data_raw/LTDB_Std_2020_fullcount.csv\")\nS_2020<-read_csv(\"data_raw/LTDB_std_201519_Sample.csv\")\n```\n:::\n\n\nNow that we have all of the data loaded, we can start working on preparing it for analysis.\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}